<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
    <link href='//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Reverland, Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="http://wx.qlogo.cn/mmopen/xiaR0Twic472lOTwH1OBL4JeeIT174LxwcYvg3QBJYrV00Yfacmae1QTrhuQsjszkR4NhHbYWEtIE2ITRzVhVBRI4HuSpQBEwR/0?v=0.4.5.2" />






<meta name="description" content="我希望生活是诗的，是画的，是无数动听的音符。我希望我是自由的，摇滚的，有一颗黑客的心。">
<meta property="og:type" content="website">
<meta property="og:title" content="Reverland的行知阁">
<meta property="og:url" content="http://reverland.org/page/12/index.html">
<meta property="og:site_name" content="Reverland的行知阁">
<meta property="og:description" content="我希望生活是诗的，是画的，是无数动听的音符。我希望我是自由的，摇滚的，有一颗黑客的心。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Reverland的行知阁">
<meta name="twitter:description" content="我希望生活是诗的，是画的，是无数动听的音符。我希望我是自由的，摇滚的，有一颗黑客的心。">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> Reverland的行知阁 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Reverland的行知阁</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">开放、分享、自由与进步</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/Life/2012/10/14/always-look-on-the-bright-side-of-life/" itemprop="url">
                  Always Look on the Bright Side of Life
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-10-14T00:00:00+08:00" content="2012-10-14">
              2012-10-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index">
                    <span itemprop="name">Life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>blahblahblah,这几天看了三部电影，随便感慨下。</p>
<h2 id="Always_Look_on_the_Bright_Side_of_Life">Always Look on the Bright Side of Life</h2><p>也许执念太深，从一年前开始看到无所事事的人就极度不爽，也无法忍受自己浪费一分一秒，然而事情总是这样：你越想抓住什么，什么就越从你的指缝间溜走得越快。</p>
<p>一年来总是给自己一些莫名奇妙的压力，天天为各种各样的琐事烦得一塌糊涂。结果身体一直也不好，要不要感冒每个月就像大姨妈一样来一次？[^1]有很多人和事，只觉得他们二逼，然而搅扰的自己也无法静下心。也许只是我自己太在意。</p>
<p>我想黑我们学校，黑自己专业，黑这学校很多人很久了。然而最终还是忍住，也许世界就该这样，或者你爱怎样就怎样。没必要因此搅扰得自己不安。</p>
<p>也许我就该笑笑，依旧回头走我的路，如果路被人堵上，换另一条继续走，条条大路通罗马。</p>
<p>也许我就该放下许多执念，在心灵上解放自我，在行动上自我解放。</p>
<p>也许我就该随波逐流，无所谓得失，让该来的来，让该去的去，万事随缘。</p>
<p>每天入夜，当我怨恨时，我不断暗示自己，神赐你一颗平和的心，不要怨恨。</p>
<p>当我为周围的风吹草动胆颤心惊时，不断鼓舞自己，神赐给你的是一个刚强的心，无所畏惧。</p>
<p>让心平和下来吧，</p>
<p>一直想考研，跨掉自己的专业，离开熟悉的学校，寻找更好的环境和人<a href="希望不要误解，对每个人好坏都是不同的，我不想黑任何人。">^2</a>。</p>
<p>但没必要逼自己，让心平和下来吧</p>
<p>好好锻炼身体，考不上明年再来。</p>
<p>再考不上再做打算。</p>
<p>留得青山在，不怕没柴烧。</p>
<p>总是看见生活光明的一面。</p>
<embed src="http://www.xiami.com/widget/0_2018536/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent">


<blockquote>
<p>some things in life are bad,生命中总有些不如意</p>
<p>they can really make you mad, 它们真的能让你抓狂</p>
<p>other things just make you swear and curse.还有些使你诅咒和咒骂</p>
<p>when you’re chewing on life’s gristle 当你咀嚼生活的乏味</p>
<p>don’t grumble, give a whistle. 别抱怨 ,吹个口哨</p>
<p>and this’ll help things turn out for the best.这能帮事情变好 </p>
<p>and…. 还有</p>
<p>always look on the bright side of life,(whistle) 总是看到好的一面</p>
<p>always look on the bright side of life,(whistle) 总是看到好的一面</p>
<p>if life seems jolly rotten, 如果生活看起来非常糟糕</p>
<p>there’s something you’ve forgotten, 肯定有什么事你忘了</p>
<p>and that’s to laugh and smile and dance and sing.那些关于高兴、微笑、舞蹈和歌唱的事情 </p>
<p>when you’re feeling in the dumps,当你觉得一团糟 </p>
<p>don’t be silly chumps. 别象个榆木疙瘩</p>
<p>just purse your lips and whistle, that’s the thing.缩起你的嘴，吹个口哨，就这样</p>
<p>and… 还有</p>
<p>always look on the bright side of life.(whistle) 总是看到好的一面</p>
<p>come on… 来吧</p>
<p>always look on the bright side of life…总是看到好的一面 </p>
<p>for life is quite absurd, 因为生活如此荒诞</p>
<p>and death’s the final word, 死亡是最终的结局</p>
<p>you must always face the curtain with a bow. 你总得鞠躬谢幕</p>
<p>forget about your sin, 忘了你的罪</p>
<p>give the audience a grin, 给观众一个开怀的笑</p>
<p>enjoy it - it’s your last chance anyhow.享受它，不管怎么说这是你最后的机会 </p>
<p>so always look on the bright side of death, 所以总是看到好的一面</p>
<p>just before you draw your terminal breath, 就在你最后一次呼吸之前</p>
<p>life’s a piece of shit, 生活是坨屎</p>
<p>when you look at it, 当你看着它的时候</p>
<p>life’s a laugh and death’s a joke, it’s true. 生活是一次大笑，死亡是个玩笑，真的</p>
<p>you’ll see it’s all a show,你会看到这都是一场戏 </p>
<p>keep ‘em laughing as you go. 当你上演时保持是喜剧</p>
<p>just remember that the last laugh is on you.记住要笑到最后 </p>
<p>and always look on the bright side of life, 总是看到好的一面</p>
<p>always look on the right side of life, 看生活好的一面</p>
<p>come on guys, cheer up. 来吧伙伴，庆祝一下</p>
<p>always look on the bright side of life. 总看到好的一面</p>
<p>worse things happen at sea, you know. 世界末日离你还远，知道吗？</p>
<p>always look on the bright side of life. 总是看到好的一面</p>
<p>i mean - what have you got to lose? 我是说——你将会失去什么？</p>
<p>you know, you come from nothing, 你知道，你本来就一无所有</p>
<p>you’re going back to nothing. 你会再回到虚无</p>
<p>what have you lost? nothing 你将会失去什么？什么也没有</p>
</blockquote>
<h2 id="Aal_izz_well">Aal izz well</h2><p>你在做自己不喜欢的事情吗？</p>
<p>你总是担心太多吗？</p>
<p>兰彻导师说：追随自己的心，不断追求卓越，其它的都会追随而来的。</p>
<p>兰彻导师说：我们心很怯懦，需要我们“欺骗”，Aal izz well(一切都好)。</p>
<p>三年前和玩伴在他的mp4上看了一半，只是觉的好笑，如今看着确是完全不同的感觉。</p>
<p>一切都好，一语胜千言。</p>
<h2 id="纵使抛弃一切终归还有执着">纵使抛弃一切终归还有执着</h2><p>“人人都愿意相信自已愿意相信的东西。”</p>
<p>不断想起大一在图书馆的日日夜夜</p>
<p>翻看那些心理学、社会科学的书籍，</p>
<p>甚至很多成功学的书(我现在依然非常喜欢卡耐基的书)。</p>
<p>里头很多观点、看法、假说，深深植入我的心里。</p>
<p>我会怀念，整个学校我最喜欢的地方。</p>
<p>怀念那里的光影，味道，声音。</p>
<p>还有无法忘怀的记忆。</p>
<p>有些执着我永远不愿放弃，</p>
<p>不过是想让自己的心冷静下来，</p>
<p>该来的终将到来。</p>
<p>有意思的喜剧。</p>
<h2 id="Footnotes">Footnotes</h2><p>[^1]:<del>真尼玛扯淡，几次跑步回去就觉的嗓子疼，然后他妈的就生病来着。我他妈的每次保持一个月一晚一小时的习惯都被一场接一场莫名奇妙的感冒什么的给毁了。我还记得冬天跑步手被冻伤过，还记得从没什么人到天气转暖到处是人的操场，然而现实的冷水泼的比谁都厉害。</del></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/Life/2012/09/20//" itemprop="url">
                  创新项目要结束了
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-09-20T00:00:00+08:00" content="2012-09-20">
              2012-09-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index">
                    <span itemprop="name">Life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="序">序</h2><p>最近室友在忙着写简历找工作(其实也没忙着，该dota还dota，该看电视剧的还是电视剧，总之貌似很闲，难道我大江大……)，我想很久怎么写自己简历了，可是愈发感觉自己碌碌无为，啥也不会。也从各路大牛网站看过好几份Resume或者CV来着，更加感到自己弱爆了，真应了fengya90之前说的，出去就是被秒的份。今天还看了同学的浙大同级同学简历，算了，我真是弱爆了。</p>
<p>大概大多数人看来，我就是混了三年，保研什么都扯淡了，成绩垃圾得一塌糊，学术完全无力，工作兼职更是扯淡，也没担过当啥重任。不管从哪里看，大概都是彻头彻尾的loser。</p>
<p>但不说了，目测创新项目要结题了。</p>
<h2 id="创新项目之大坑">创新项目之大坑</h2><p>大学生创新项目逐渐变成了一个大坑……，如何从一个国家级项目沦落到校级项目又如何立项之后导师也被换了就不细说了。话说新导师不错啊，可是他中途接手别人的项目也很蛋疼……</p>
<p>总之，五个人开始填这个大坑。嘛，这dota[^1]阵容，我怎么评价么。</p>
<p>总之，我就是苦逼的技术支持。一出问题就被召唤……</p>
<p>开始技术支持的时候我刚接触linux不久<a href="其实也两三个月了，大概我换archlinux单系统那段时间吧">^2</a>，实际上想做另一个偏计算机的项目，不过无所谓了，于是开始了这个NdFeB磁特性的项目。</p>
<p>本来我没什么热情的，但竟然是在理学院数学实验室机房，做计算。关键是几台linux机器，嘛，真棒。我以前只在我的计算机上和化工学院研究生实验室看到过，没想到自己做的项目和linux有关。虽然是学校的机器上都是古老而难懂的RHEL5。<a href="我是相对与arch说的新旧……莫喷。">^3</a></p>
<p>竟然还有幸使用学院十八万一年购入的NB软件——<a href="http://www.quantumwise.com/" target="_blank" rel="external">Atomistix ToolKit (ATK)</a>,顺便说下使用了一年，我只想说真尼玛感觉没开源软件好用，不过技术支持不错。</p>
<p>紧接着，我们就发现这多大一个坑了：</p>
<ul>
<li>学长对计算机及软件一知半解，多靠学长的学长或学姐(没见到过)留下的笔记和口口相传来进行计算。但他们理论比我们好多了，帮助我们解决了一些问题。但还是有很多坑……</li>
<li>老师中途接手项目，完全不熟悉这个软件，也不很熟悉这个项目</li>
<li>我们接着换导师前的导师的研究生的项目继续往下做，直接使用前辈建好的模型再根据自己需要修改。可是这个模型太大了，几百个原子……计算机吃不消，经常内存都不够，有次半个月没算出来。</li>
<li>一堆参数不知道怎么设定，发现前辈留下的log都是各种不收敛……</li>
<li>有买来的atk的REHL那台机器上的atk/vnl经常出错，学院一堆机器经常有些莫名奇妙的问题</li>
<li>有atk那台的机器卡爆了……</li>
<li>各种因为不了解软件及原理本身的而造成的错误</li>
<li>各种手误，还有不良的管理习惯，比如说新建的那一堆文件夹，结果我现在都不知道各个文件夹都放的什么东西了。</li>
<li>软件自身问题，比如算法bug</li>
</ul>
<h2 id="但我学到了很多">但我学到了很多</h2><p>不像有的导师直接帮学生都发好文章了，我组的同学，特别那些要出国要考研要论文的同志们就苦逼了……</p>
<p>像我这种苦逼考研党倒不在乎，可是作为技术支持永远也别想闲下来不管……</p>
<p>我们的项目在各种坑中颠簸了一年现在还没出论文，从老师开始口口声声的发国外到先发JNU学报上，到某写论文的出国党主力dps差点放弃不搞。</p>
<p>现在快结束了，跳过一个软件算法bug，希望明天算出来有个好结果。</p>
<p>一年，我还是学到了很多哦，收获不浅。</p>
<p>我学到的很多也用上了，这真让我惊奇，<strong>我从来没想过自己在折腾中学到的很多东西，竟然真的用上了。</strong></p>
<ul>
<li>将学院几台linux机器几乎和自己机器集成起来了。</li>
<li>配置好ssh和vnc，在寝室我可以通过ssh，vnc很方便的查看计算进度，结果，和其它任何操作。</li>
<li>利用dolphin的fish特性可视化ssh，这玩意太好用了。远端就像本地一样。</li>
<li>打开了vnc服务教他们怎么用浏览器使用远程桌面，可是windows用户还是更习惯去实验室用windows……</li>
<li>建立了ftp服务方便几台机器的文件共享。</li>
<li>熟悉了怎么在linux下编译软件，怎么使用软件<a href="当然第一件是看文档看教程了，然后才是google搜索(baidu弱爆了)">^4</a>。编译配置mpich尝试集群并行计算，最后发现专有软件真尼玛坑，要集群还要付钱……</li>
<li>在自己机器archlinux上装上了atk/vnl……然后半个月不到尼玛就过期不让用了……</li>
<li>熟悉了vim各种高效操作，改各种文件改的真欢，连vimdiff都用上了……</li>
<li>脚本化计算，让计算能够排队……</li>
<li>完全习惯用终端或者从其它linux或windows机器上ssh上去用cli操作，因为内存被atk吃空的那台机器卡爆了</li>
<li>最后因为atk/vnl什么莫名奇妙不能可视化图形的毛病，发现atkpython中已经集成了matplotlib和numpy，自己手动可视化。不过windows用户还是更习惯用Origin……</li>
<li>正好学了点python，然后竟然在一些关键问题上比如win和linux在python中路径，序列切片的问题用上了。</li>
<li>很多问题简直凭借常年在linux系统下的经验和直觉解决的。</li>
<li>忽然想到有次帮别人制作presentation的图连gimp都用上了。不过当时对gimp比较熟悉，完全无压力。</li>
</ul>
<h2 id="创新项目对我的影响">创新项目对我的影响</h2><p>我想说，我没有打酱油，这就很满意了。事实上要是像有的同学创新项目一样都没做什么老师都帮忙发论文什么的我反而感觉可惜了，也很庆幸竟然做了这么个大坑项目。</p>
<p>我还想说，我努力不让别人失望，希望我做到了。</p>
<p>因为<a href="http://www.quantumwise.com/" target="_blank" rel="external">Atomistix ToolKit (ATK)</a>这个大坑，还有其它一些莫名奇妙的原因我变成pythoner了，而且将来想用python作为工具从事数据挖掘和机器学习的工作。</p>
<p>更加熟悉了linux系统，竟然还把某台上的REHL偷天换日更新成CentOS了，vim和各种终端操作更加熟练。</p>
<p>ssh/vnc配置使用自不必说。</p>
<p><a href="http://www.quantumwise.com/" target="_blank" rel="external">Atomistix ToolKit (ATK)</a>基于某python的DFT(密度泛函理论)实现反过来促进了我对物理的兴趣，我本身是学物理的嘛，不过貌似被大学教育把兴趣几乎抹杀了。</p>
<p>还有其它一些关于团队和做事的思考，不写。</p>
<hr>
<h2 id="一些纪念截图">一些纪念截图</h2><p>在archlinux装的atk/vnl</p>
<p><img src="http://fmn.rrimg.com/fmn065/20120306/1650/p_large_kKj5_1476000000551260.jpg" alt="在archlinux装的atk/vnl"></p>
<p>经常内存就这么满了</p>
<p><img src="http://fmn.rrfmn.com/fmn058/20120625/1850/p_large_l0Vh_0cab00011abb1261.jpg" alt="经常内存就这么满了"></p>
<p>我用python画出来的自旋平行态密度,和下图一样因算法问题算得根本就不对……</p>
<p><img src="http://fmn.rrimg.com/fmn057/20120919/2245/p_large_C5Mt_608a00001d3b1262.jpg" alt="我用python画出来的自旋平行态密度"></p>
<p>我用python画出来的自旋反平行态密度</p>
<p><img src="http://fmn.rrimg.com/fmn056/20120919/2245/p_large_b12B_608a00001d3c1262.jpg" alt="我用python画出来的自旋反平行态密度"></p>
<p>我们的模型,我用gimp处理的，还有个彩版的。</p>
<p><img src="http://fmn.rrimg.com/fmn061/20120921/0725/p_large_BcP2_109300000ba71262.jpg" alt="模型"></p>
<h2 id="鸣谢">鸣谢</h2><p>感谢指导老师的支持，各位组员的共同努力，特别感谢某出国党的坚持，希望明天有个不错的结果，最后写论文什么就没我什么事了<a href="要是用latex或者markdown写我会不会抢着写……">^5</a>。</p>
<hr>
<p>2012年09月21日 星期五 18时23分32秒</p>
<p>还好，大家争取两天把论文写完。</p>
<hr>
<h2 id="FootNotes">FootNotes</h2><p>[^1]:I hate Dota</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/python/2012/09/12//" itemprop="url">
                  科学计算工具和工作流
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-09-12T00:00:00+08:00" content="2012-09-12">
              2012-09-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Scientific_computing_with_tools_and_workflow">Scientific computing with tools and workflow</h1><hr>
<p><strong>好长的标题……</strong></p>
<p>从<a href="http://scipy-lectures.github.com/intro/intro.html" target="_blank" rel="external">scipy lecture notes</a>引言翻译。这是篇python 做科学计算的水文……</p>
<p>作者:Fernando Perez, Emmanuelle Gouillart, Gaël Varoquaux。感谢他们贡献了如此棒的教材。</p>
<hr>
<p><strong>目录</strong></p>
<ul>
<li>toc<br>{: toc}</li>
</ul>
<h2 id="为什么Python？">为什么Python？</h2><h3 id="科学家的需求">科学家的需求</h3><ul>
<li>获取数据(模拟，试验操控)</li>
<li>操作和处理数据</li>
<li>可视化结果……让我们理解我们在做什么！</li>
<li>交流结果：产生用来做报告或出版的图像，写演示文稿。</li>
</ul>
<h3 id="要求">要求</h3><ul>
<li>对相应经典数值方法和基本作用已经存在丰富的程序块：我们不想再次为绘制曲线、傅利叶变换或者拟合算法重新编程。不要重复发明轮子。</li>
<li>简单易学：计算机科学不是我们的课程也不是工作。我们想要在几分钟内绘制曲线、平滑信号和做傅利叶变换。</li>
<li>易于和合作者、学生、顾客交流，让代码在试验室或公司内部都生动起来：代码应该像本书一样易读。因此，语言应该包含尽量少的语法符号或不必要的规范，使数学家和科学家读者能够理解代码。</li>
<li>有效率地编码和快速执行……但是不必说如果我们花太多时间来编写它，非常快的代码也变得无用。所以，我们需要同样短的开发时间和短的执行时间。</li>
<li>一个单独的环境/语言解决所有事情。如果可能，避免为每个新问题学习新的软件。</li>
</ul>
<h3 id="已经存在的解决方案">已经存在的解决方案</h3><p>科学家们用什么工作？</p>
<p><em>编译语言：C,C++,Fortran等等</em></p>
<ul>
<li>优点：<ul>
<li>非常快。高度优化的编译器。对大量计算，很难超越这些语言。</li>
<li>为这些语言已经写了一些高度优化的科学库。例如：BLAS(向量/矩阵运算库)</li>
</ul>
</li>
<li>缺点：<ul>
<li>难用：在开发时没有交互，命令式的编译步骤，累赘的语法(<code>&amp;, ::, }}, ;</code>等等)，人工内存管理(C中很棘手)。这些对非计算机科学家是<em>难懂的语言</em>。</li>
</ul>
</li>
</ul>
<p><em>脚本语言：Matlab</em></p>
<ul>
<li>优点：<ul>
<li>在许多领域有丰富的数值算法库。因为这些库经常用编译语言写成而有快的执行速度。</li>
<li>友好的开发环境：全面而且组织良好的帮助，集成的编辑器等。</li>
<li>商业支持</li>
</ul>
</li>
<li>缺点：<ul>
<li>基本语言太弱了，高级用户将很受限。</li>
<li>不免费</li>
</ul>
</li>
</ul>
<p><em>其它脚本语言：Scilab, Octave, Igor, R, IDL等等</em></p>
<ul>
<li>优点：<ul>
<li>开源、免费,或者至少比Matlab便宜。</li>
<li>有些功能非常高级(R中的统计，Igor中的绘图等等)</li>
</ul>
</li>
<li>缺点：<ul>
<li>比Matlab中可用算法少，语言不高级。</li>
<li>有些软件专注于一个领域。例如:Gnuplot或xmgrace绘制曲线。这些程序非常强大，但是它们被限制在一种类型的使用上，例如绘图。</li>
</ul>
</li>
</ul>
<p><em>Python怎么样</em></p>
<ul>
<li>优点：<ul>
<li>非常丰富的科学计算库(尽管稍微比Matlab少那么一点点)</li>
<li>很好的思考语言，允许写出非常易读和组织很好的代码：“所码即所想” 。</li>
<li>相当之多科学计算任务之外的库(网络服务器管理、串口访问等等。)</li>
<li>自由免费和开源，使用广泛，活跃的社区。</li>
</ul>
</li>
<li>缺点：<ul>
<li>不怎么友好的开发环境和某些软件相比，比如Matlab。(更加geek向一些)。</li>
<li>并非所有的算法可以在专业软件和工具箱中找到。</li>
</ul>
</li>
</ul>
<h2 id="python科学工具">python科学工具</h2><p>不像Matlab，Scilab和R，Python并不预先绑定一套科学计算模块。以下是用来搭建科学计算环境的基本构建模块：</p>
<ul>
<li><p><em>Python</em>，一个通用和现代的计算语言</p>
<ul>
<li>Python语言：数据结构(字符串、整型)，控制流，数据集合(列表、字典)，模式等等。</li>
<li>标准库的模块</li>
<li>大量用Python写成特殊用途的模块或应用：网络协议，网络框架等等，还有科学计算。</li>
<li>开发工具(自动测试，文档生成)</li>
</ul>
</li>
<li><p><em>IPython</em>，一个高级<em>Python shell</em> <a href="http://ipython.scipy.org/moin/" target="_blank" rel="external">http://ipython.scipy.org/moin/</a></p>
</li>
<li><p><em>Numpy</em>，提供强大的数值数组对象和操作它们的程序。<a href="http://www.numpy.org/" target="_blank" rel="external">http://www.numpy.org/</a></p>
</li>
<li><p><em>Scipy</em>：高水准的数据处理程序。优化、回归、插值等等。<a href="http://www.scipy.org/" target="_blank" rel="external">http://www.scipy.org/</a></p>
</li>
<li><p><em>Matplotlib</em>：二维可视化，“出版水准”的绘图。<a href="http://matplotlib.sourceforge.net/" target="_blank" rel="external">http://matplotlib.sourceforge.net/</a></p>
</li>
<li><p><em>Mayavi</em>：三维可视化。<a href="http://code.enthought.com/projects/mayavi/" target="_blank" rel="external">http://code.enthought.com/projects/mayavi/</a></p>
</li>
</ul>
<h2 id="交互工作流:IPython和文本编辑器">交互工作流:IPython和文本编辑器</h2><p><strong>交互工作来测试和理解算法</strong>：在这一部分，我们描述一个使用<a href="http://ipython.org/" target="_blank" rel="external">IPython</a>交互工作流，这很方便探索和理解算法。</p>
<p>Python是一种通用语言。因此，没有一个得天独厚的工作环境,使用它的方式不只一种。尽管这让初学者很难找到自己的路，但让Python可能被用来在服务器上或嵌入设备上写程序。</p>
<blockquote>
<p><strong>注解</strong>：这部分的参考文档：</p>
<p><strong>IPython用户手册</strong>：<a href="http://ipython.org/ipython-doc/dev/index.html" target="_blank" rel="external">http://ipython.org/ipython-doc/dev/index.html</a></p>
</blockquote>
<h3 id="命令行交互">命令行交互</h3><p>启动<em>ipython</em>：</p>
<pre><code>In [<span class="number">1</span>]: <span class="function"><span class="title">print</span><span class="params">(<span class="string">'Hello world'</span>)</span></span>
Hello world
</code></pre><p>获得帮助<a href="在python2.7以后不会这样显示了。">^1</a>：</p>
<pre><code>In [<span class="number">2</span>]: print?
Type:               builtin_function_or_method
Base Class:         &lt;type <span class="string">'builtin_function_or_method'</span>&gt;
String Form:        &lt;built-<span class="operator">in</span> <span class="function"><span class="keyword">function</span> <span class="title">print</span>&gt;</span>
Namespace:          Python builtin
Docstring:
    print(<span class="built_in">value</span>, ..., sep=<span class="string">' '</span>, <span class="keyword">end</span>=<span class="string">'\n'</span>, <span class="built_in">file</span>=sys.<span class="keyword">stdout</span>)

    Prints <span class="operator">the</span> values <span class="built_in">to</span> <span class="operator">a</span> stream, <span class="operator">or</span> <span class="built_in">to</span> sys.<span class="keyword">stdout</span> <span class="keyword">by</span> default.
    Optional keyword arguments:
    <span class="built_in">file</span>: <span class="operator">a</span> <span class="built_in">file</span>-like object (stream); defaults <span class="built_in">to</span> <span class="operator">the</span> current sys.<span class="keyword">stdout</span>.
    sep:  <span class="keyword">string</span> inserted between values, default <span class="operator">a</span> <span class="constant">space</span>.
    <span class="keyword">end</span>:  <span class="keyword">string</span> appended <span class="keyword">after</span> <span class="operator">the</span> <span class="keyword">last</span> <span class="built_in">value</span>, default <span class="operator">a</span> newline.
</code></pre><h3 id="在编辑器中拟定算法">在编辑器中拟定算法</h3><p>在文本编辑器中创建一个文件<code>my_file.py</code>。在EPD(Enthought Python Distribution)<a href="Enthought公司配置好的一套环境，教育网邮箱可以免费申请使用。">^2</a>中，你可以使用从开始菜单使用<em>Scite</em>。在Python(x,y)中<a href="另一个配置好的环境。">^3</a>，你可以使用Spyder。在Ubuntu下，如果你还没有喜欢的编辑器，我们建议安装<em>Stani’s Python editor</em>。在这个文件中，添加以下行：</p>
<pre><code>s = <span class="string">'Hello world'</span>
<span class="function"><span class="title">print</span><span class="params">(s)</span></span>
</code></pre><p>现在，你可以在IPython中运行和探索结果变量：</p>
<pre><code><span class="keyword">In</span> [3]: %<span class="keyword">run</span> my_file.py
Hello <span class="literal">word</span>

<span class="keyword">In</span> [4]: <span class="literal">s</span>
<span class="keyword">Out</span>[4]: 'Hello word'

<span class="keyword">In</span> [5]: %whos
Variable   <span class="keyword">Type</span>    Data/Info

----------------------------
s          str     Hello <span class="literal">word</span>
</code></pre><blockquote>
<p><strong>从脚本到函数</strong></p>
<p> 虽然只用一个接一个指令的脚本工作很诱惑，但请逐渐将脚本改进成一套函数：</p>
<ul>
<li>一个脚本不可复用，但函数可以。</li>
<li>以函数式思考益于将问题分解。</li>
</ul>
</blockquote>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/python/2012/09/07/matplotlib-tutorial/" itemprop="url">
                  Matplotlib Tutorial(译)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-09-07T00:00:00+08:00" content="2012-09-07">
              2012-09-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Matplotlib_Tutorial(译)">Matplotlib Tutorial(译)</h1><p>翻译自:<a href="http://www.loria.fr/~rougier/teaching/matplotlib/" target="_blank" rel="external">Matplotlib tutorial</a>Nicolas P. Rougier - Euroscipy 2012</p>
<ul>
<li>toc<br>{: toc}</li>
</ul>
<p>这个教程基于可以从<a href="http://scipy-lectures.github.com/" target="_blank" rel="external">scipy lecture note</a>得到的 Mike Müller的<a href="http://scipy-lectures.github.com/intro/matplotlib/matplotlib.html" target="_blank" rel="external">教程</a>。</p>
<p>源代码可从<a href="http://www.loria.fr/~rougier/teaching/matplotlib/matplotlib.rst" target="_blank" rel="external">这里</a>获得。图像在<a href="http://www.loria.fr/~rougier/teaching/matplotlib/figures/" target="_blank" rel="external">figures</a>文件夹内，所有的脚本位于<a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/" target="_blank" rel="external">scripts</a>文件夹。</p>
<p>所有的代码和材料以<a href="http://creativecommons.org/licenses/by/3.0/us" target="_blank" rel="external">Creative Commons Attribution 3.0 United States License (CC-by)</a>发布。</p>
<p>特别感谢Bill Wing和Christoph Deil的检查和校正。</p>
<h2 id="引言">引言</h2><p>matplotlib大概是被使用最多的二维绘图Python包。它不仅提供一个非常快捷的用python可视化数据的方法，而且提供了出版质量的多种格式图像。我们将要探索matplotlib包含最常见情况的交互模式。</p>
<h3 id="Ipython_和_pylab模式">Ipython 和 pylab模式</h3><p><a href="http://ipython.org/" target="_blank" rel="external">IPython</a>是一个增强的Python交互shell，它拥有很多有趣的特性包括被命名的输入与输出，可使用shell命令，增强的调试和许多其它特性。当我们在命令参数中用<code>-pylab</code>(自从IPython0.12版变成<code>--pylab</code>),它容许交互的matplotlib会话有像Matlab/Mathematica样的功能。</p>
<h3 id="pylab">pylab</h3><p>pylab提供了一个针对matplotlib面向对象绘图库的程序界面。它模仿Matlab(TM)开发。因此，pylab大部分的绘图命令和参数和Matlab(TM)相似。重要的命令被交互示例解释。</p>
<h2 id="简单绘图">简单绘图</h2><p>在这一部分，我们想在同一个图片中绘制正弦和余弦函数。从默认设置开始，我们将一步一步地改进使它看上去更棒。</p>
<p>首先获得正弦和余弦函数的数据：</p>
<pre><code>from pylab <span class="preprocessor"><span class="keyword">import</span> *</span>

X = np.linspace(-np.<span class="built_in">pi</span>, np.<span class="built_in">pi</span>, <span class="number">256</span>,endpoint=<span class="literal">True</span>)
C,S = np.<span class="built_in">cos</span>(X), np.<span class="built_in">sin</span>(X)
</code></pre><p>X现在是一个numpy数组，包含从-π到+π(包含π)等差分布的256个值。C是正弦(256个值)，S是余弦(256个值)。</p>
<p>运行这个例子，你可以在IPython交互会话键入它们</p>
<pre><code>[lyy@arch ~]$ ipython2 <span class="comment">--pylab</span>
Python <span class="number">2.7</span>.<span class="number">3</span> (<span class="keyword">default</span>, Apr <span class="number">24</span> <span class="number">2012</span>, <span class="number">00</span>:<span class="number">00</span>:<span class="number">54</span>) 
<span class="keyword">Type</span> <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.

IPython <span class="number">0.13</span> <span class="comment">-- An enhanced Interactive Python.</span>
?         -&gt; Introduction <span class="keyword">and</span> overview <span class="keyword">of</span> IPython<span class="attribute">'s</span> features.
%quickref -&gt; Quick reference.
help      -&gt; Python<span class="attribute">'s</span> own help system.
object?   -&gt; Details about <span class="attribute">'object</span>', <span class="keyword">use</span> <span class="attribute">'object</span>??' <span class="keyword">for</span> extra details.

Welcome <span class="keyword">to</span> pylab, a matplotlib-based Python environment [backend: Qt4Agg].
<span class="keyword">For</span> more information, <span class="keyword">type</span> <span class="attribute">'help</span>(pylab)'.
</code></pre><p>或者你可以下载每个示例然后使用普通的的python运行它：</p>
<pre><code>$ <span class="keyword">python</span> exercice_1.<span class="keyword">py</span>
</code></pre><p>你可以点击相应图片的获得每一步的源码。</p>
<h3 id="使用默认">使用默认</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_1.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_1.png" alt="using defaults"></a></p>
<p>matplotlib有一套允许定制各种属性的默认设置。你可以几乎控制matplotlib中的每一个默认属性：图像大小，每英寸点数，线宽，色彩和样式，子图(axes)，坐标轴和网格属性，文字和字体属性，等等。虽然matplotlib的默认设置在大多数情况下相当好，你却可能想要在一些特别的情形下更改一些属性。</p>
<pre><code>from pylab <span class="preprocessor"><span class="keyword">import</span> *</span>

X = np.linspace(-np.<span class="built_in">pi</span>, np.<span class="built_in">pi</span>, <span class="number">256</span>,endpoint=<span class="literal">True</span>)
C,S = np.<span class="built_in">cos</span>(X), np.<span class="built_in">sin</span>(X)

plot(X,C)
plot(X,S)

show()
</code></pre><h3 id="示例默认">示例默认</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_2.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_2.png" alt="using defaults"></a></p>
<p>在以下脚本中，我们示例(并注释)所有影响图像外观的图像设定。这些设定被显式地设置成它们的默认值，但是现在你可以交互地尝试这些值来探索它们的作用(参考之后的<a href="#">线条属性</a>和<a href="#">线条样式</a>)。</p>
<pre><code><span class="preprocessor"># Import everything from matplotlib (numpy is accessible via 'np' alias)</span>
from pylab import *

<span class="preprocessor"># Create a new figure of size 8x6 points, using 80 dots per inch</span>
figure(figsize=(<span class="number">8</span>,<span class="number">6</span>), dpi=<span class="number">80</span>)

<span class="preprocessor"># Create a new subplot from a grid of 1x1</span>
subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)

X = np.linspace(-np.pi, np.pi, <span class="number">256</span>,endpoint=True)
C,S = np.cos(X), np.sin(X)

<span class="preprocessor"># Plot cosine using blue color with a continuous line of width 1 (pixels)</span>
plot(X, C, color=<span class="string">"blue"</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">"-"</span>)

<span class="preprocessor"># Plot sine using green color with a continuous line of width 1 (pixels)</span>
plot(X, S, color=<span class="string">"green"</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">"-"</span>)

<span class="preprocessor"># Set x limits</span>
xlim(-<span class="number">4.0</span>,<span class="number">4.0</span>)

<span class="preprocessor"># Set x ticks</span>
xticks(np.linspace(-<span class="number">4</span>,<span class="number">4</span>,<span class="number">9</span>,endpoint=True))

<span class="preprocessor"># Set y limits</span>
ylim(-<span class="number">1.0</span>,<span class="number">1.0</span>)

<span class="preprocessor"># Set y ticks</span>
yticks(np.linspace(-<span class="number">1</span>,<span class="number">1</span>,<span class="number">5</span>,endpoint=True))

<span class="preprocessor"># Save figure using 72 dots per inch</span>
<span class="preprocessor"># savefig("exercice_2.png",dpi=72)</span>

<span class="preprocessor"># Show result on screen</span>
show()
</code></pre><h3 id="更改色彩和线宽">更改色彩和线宽</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_3.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_3.png" alt="using defaults"></a></p>
<p>首先，我们想要余弦是蓝色而正弦是红色，它们的线条都稍厚一点。我们将也稍微更改图片大小来使它更宽一点。</p>
<pre><code><span class="function"><span class="title">figure</span><span class="params">(figsize=(<span class="number">10</span>,<span class="number">6</span>)</span></span>, dpi=<span class="number">80</span>)
<span class="function"><span class="title">plot</span><span class="params">(X, C, color=<span class="string">"blue"</span>, linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"-"</span>)</span></span>
<span class="function"><span class="title">plot</span><span class="params">(X, S, color=<span class="string">"red"</span>,  linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"-"</span>)</span></span>
</code></pre><h3 id="设置边界">设置边界</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_4.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_4.png" alt="using defaults"></a></p>
<p>当前的图像边界有点太紧了一点，而且我们想要预留一点空间使数据点更清晰。</p>
<pre><code><span class="function"><span class="title">xlim</span><span class="params">(X.min()</span></span>*<span class="number">1.1</span>, X.<span class="function"><span class="title">max</span><span class="params">()</span></span>*<span class="number">1.1</span>)
<span class="function"><span class="title">ylim</span><span class="params">(C.min()</span></span>*<span class="number">1.1</span>, C.<span class="function"><span class="title">max</span><span class="params">()</span></span>*<span class="number">1.1</span>)
</code></pre><h3 id="设置刻度">设置刻度</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_5.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_5.png" alt="using defaults"></a></p>
<p>当前刻度并不理想，因为它们不显示正余弦中我们感兴趣的值(+/-π,+/-π/2)。我们将更改它们让它们只显式这些值。</p>
<pre><code>xticks( [-np.pi, -np.pi/<span class="number">2</span>, <span class="number">0</span>, np.pi/<span class="number">2</span>, np.pi])
yticks([-<span class="number">1</span>, <span class="number">0</span>, +<span class="number">1</span>])
</code></pre><h3 id="设置刻度标签">设置刻度标签</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_6.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_6.png" alt="using defaults"></a></p>
<p>刻度已经放置合适但是他们的标签并不很清楚，我们可以猜出3.142是π但是最好让它更直接。当我们设置刻度值时，我们也可以在第二个参数列表中提供相应的标签。注意，我们用latex获得更好渲染的标签。</p>
<pre><code>xticks([-np.pi, -np.pi/<span class="number">2</span>, <span class="number">0</span>, np.pi/<span class="number">2</span>, np.pi],
       [<span class="string">r'$-\pi$'</span>, <span class="string">r'$-\pi/2$'</span>, <span class="string">r'$0$'</span>, <span class="string">r'$+\pi/2$'</span>, <span class="string">r'$+\pi$'</span>])

yticks([-<span class="number">1</span>, <span class="number">0</span>, +<span class="number">1</span>],
       [<span class="string">r'$-1$'</span>, <span class="string">r'$0$'</span>, <span class="string">r'$+1$'</span>])
</code></pre><h3 id="移动轴线(spine)">移动轴线(spine)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_7.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_7.png" alt="using defaults"></a></p>
<p>轴线(spines)是连接刻度标志和标示数据区域边界的线。它们现在可以被放置在任意地方，它们在子图的边缘。我们将改变这点，因为我们想让它们位于中间。因为一共有四个轴线(上/下/左/右)。我们将通过将它们的颜色设置成None，舍弃位于顶部和右部轴线。然后我们把底部和左部的轴线移动到数据空间坐标中的零点。</p>
<pre><code>ax = <span class="function"><span class="title">gca</span><span class="params">()</span></span>
ax<span class="class">.spines</span>[<span class="string">'right'</span>].<span class="function"><span class="title">set_color</span><span class="params">(<span class="string">'none'</span>)</span></span>
ax<span class="class">.spines</span>[<span class="string">'top'</span>].<span class="function"><span class="title">set_color</span><span class="params">(<span class="string">'none'</span>)</span></span>
ax<span class="class">.xaxis</span><span class="class">.set_ticks_position</span>(<span class="string">'bottom'</span>)
ax<span class="class">.spines</span>[<span class="string">'bottom'</span>].<span class="function"><span class="title">set_position</span><span class="params">((<span class="string">'data'</span>,<span class="number">0</span>)</span></span>)
ax<span class="class">.yaxis</span><span class="class">.set_ticks_position</span>(<span class="string">'left'</span>)
ax<span class="class">.spines</span>[<span class="string">'left'</span>].<span class="function"><span class="title">set_position</span><span class="params">((<span class="string">'data'</span>,<span class="number">0</span>)</span></span>)
</code></pre><h3 id="添加图例">添加图例</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_8.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_8.png" alt="using defaults"></a></p>
<p>让我们在图片左上角添加一个图例。这仅仅需要向plot命令添加关键字参数label(之后将被图例框使用)。</p>
<pre><code><span class="function"><span class="title">plot</span><span class="params">(X, C, color=<span class="string">"blue"</span>, linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"-"</span>, label=<span class="string">"cosine"</span>)</span></span>
<span class="function"><span class="title">plot</span><span class="params">(X, S, color=<span class="string">"red"</span>,  linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"-"</span>, label=<span class="string">"sine"</span>)</span></span>

<span class="function"><span class="title">legend</span><span class="params">(loc=<span class="string">'upper left'</span>)</span></span>
</code></pre><h3 id="注解某些点">注解某些点</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_9.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_9.png" alt="using defaults"></a></p>
<p>让我们现在使用annotate命令注解一些我们感兴趣的点。我们选择2π/3作为我们想要注解的正弦和余弦值。我们将在曲线上做一个标记和一个垂直的虚线。然后，使用annotate命令来显示一个箭头和一些文本。</p>
<pre><code>t = <span class="number">2</span>*np.pi/<span class="number">3</span>
<span class="function"><span class="title">plot</span><span class="params">([t,t],[<span class="number">0</span>,np.cos(t)</span></span>], <span class="attribute">color</span> =<span class="string">'blue'</span>, linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"--"</span>)
<span class="function"><span class="title">scatter</span><span class="params">([t,],[np.cos(t)</span></span>,], <span class="number">50</span>, <span class="attribute">color</span> =<span class="string">'blue'</span>)

<span class="function"><span class="title">annotate</span><span class="params">(r<span class="string">'$sin(\frac{2\pi}{3})=\frac{\sqrt{3}}{2}$'</span>,
         xy=(t, np.sin(t)</span></span>), xycoords=<span class="string">'data'</span>,
         xytext=(+<span class="number">10</span>, +<span class="number">30</span>), textcoords=<span class="string">'offset points'</span>, fontsize=<span class="number">16</span>,
         arrowprops=<span class="function"><span class="title">dict</span><span class="params">(arrowstyle=<span class="string">"-&gt;"</span>, connectionstyle=<span class="string">"arc3,rad=.2"</span>)</span></span>)

<span class="function"><span class="title">plot</span><span class="params">([t,t],[<span class="number">0</span>,np.sin(t)</span></span>], <span class="attribute">color</span> =<span class="string">'red'</span>, linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"--"</span>)
<span class="function"><span class="title">scatter</span><span class="params">([t,],[np.sin(t)</span></span>,], <span class="number">50</span>, <span class="attribute">color</span> =<span class="string">'red'</span>)

<span class="function"><span class="title">annotate</span><span class="params">(r<span class="string">'$cos(\frac{2\pi}{3})=-\frac{1}{2}$'</span>,
         xy=(t, np.cos(t)</span></span>), xycoords=<span class="string">'data'</span>,
         xytext=(-<span class="number">90</span>, -<span class="number">50</span>), textcoords=<span class="string">'offset points'</span>, fontsize=<span class="number">16</span>,
         arrowprops=<span class="function"><span class="title">dict</span><span class="params">(arrowstyle=<span class="string">"-&gt;"</span>, connectionstyle=<span class="string">"arc3,rad=.2"</span>)</span></span>)
</code></pre><h2 id="魔鬼在于细节">魔鬼在于细节</h2><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_10.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_10.png" alt="using defaults"></a></p>
<p>由于蓝色和红色的线，刻度标签现在很难看清。。我们可以让它们更大并且调整它们的属性使它们的背景半透明。这将让我们把数据和标签都看清。</p>
<pre><code><span class="keyword">for</span> <span class="tag">label</span> <span class="keyword">in</span> ax.<span class="function"><span class="title">get_xticklabels</span><span class="params">()</span></span> + ax.<span class="function"><span class="title">get_yticklabels</span><span class="params">()</span></span>:
    <span class="tag">label</span>.<span class="function"><span class="title">set_fontsize</span><span class="params">(<span class="number">16</span>)</span></span>
    <span class="tag">label</span>.<span class="function"><span class="title">set_bbox</span><span class="params">(dict(facecolor=<span class="string">'white'</span>, edgecolor=<span class="string">'None'</span>, alpha=<span class="number">0.65</span> )</span></span>)
</code></pre><h2 id="图像，子区，子图，刻度(Figures,Subplots,Axes,Ticks)">图像，子区，子图，刻度(Figures,Subplots,Axes,Ticks)</h2><p><em>Note:这一段很绕，我不知道该怎么翻译好。在matplotlib中axes容器处于核心地位。翻译成子图因为在《Python科学计算》中作者这样称呼.subplot翻译成子区</em></p>
<p>目前我们已经隐式地使用了图像(figure)和子图(axes)的创建。这对快速绘图很方便。我们通过显式使用figure，subplot，axes可以控制更多图像的呈现。一个图像(figure)意味着用户界面的整个窗口。在一个图像中可以有些子区(subplot)。subplot将绘图放置在常规的网格位置上而axes允许更自由的放置。它们都非常有用，取决于你的意图。我们已经隐式地使用了figure和subplot。当我们调用plot时，matplotlib调用gca来获取当前axes反过来调用gcf()获取当前图像(figure)。如果没有当前图像(figure)，它调用figure()创建一个，严格地说，是创建一个subplot(111)。让我们详细看看。</p>
<h3 id="图像(Figure)">图像(Figure)</h3><p>图像是一个图形用户界面的窗口，以”Figure #”作为标题。相对于Python通常是0索引的，图像是从一开始的。这显然是matlab风格。这里有几个决定图像外观的参数：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>默认</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>num</td>
<td>1</td>
<td>图像编号</td>
</tr>
<tr>
<td>figsize</td>
<td>figure.figsize</td>
<td>图像大小(宽度，高度)(英寸)</td>
</tr>
<tr>
<td>dpi</td>
<td>figure.dpi</td>
<td>每英寸分辨率</td>
</tr>
<tr>
<td>facecolor</td>
<td>figure.facecolor</td>
<td>背景色</td>
</tr>
<tr>
<td>edgecolor</td>
<td>figure.edgecolor</td>
<td>绘图背景边沿色</td>
</tr>
<tr>
<td>frameon</td>
<td>True</td>
<td>绘制框架与否</td>
</tr>
</tbody>
</table>
<p>默认可以在资源文件<a href="资源文件？">^1</a>指定，并将在大多数时间被使用。只有图像的编号频繁变动。</p>
<p>当你使用图形用户界面时，你可以通过点击右上角<a href="有时是左上角">^2</a>的<code>x</code>来关闭一个图像。但也可以用一种编程方式调用close来关闭一个图像。取决于参数它关闭(1)当前图像(无参数)，(2)一个指定的图像(以图像编号或图像实例作为参数),(3)所有图像(以all作为参数)。</p>
<p>和其它对象一样，你可以通过<code>setp</code>或<code>set_somethin</code>方法来设置图像属性。</p>
<h3 id="子区(subplots)">子区(subplots)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/subplot-horizontal.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/subplot-horizontal.png" alt="using defaults"></a></p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/subplot-vertical.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/subplot-vertical.png" alt="using defaults"></a></p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/subplot-grid.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/subplot-grid.png" alt="using defaults"></a></p>
<p>你可以通过subplot在正常网格中布置图像。你需要指定行数和列数和区域的编号。注意<a href="http://matplotlib.sourceforge.net/users/gridspec.html" target="_blank" rel="external">gridspec</a>命令是个更强大的选择。</p>
<h3 id="子图(axes)">子图(axes)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/gridspec.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/gridspec.png" alt="using defaults"></a></p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/axes.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/axes.png" alt="using defaults"></a></p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/axes-2.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/axes-2.png" alt="using defaults"></a></p>
<p>子图和子区(subplot)非常相似，但是允许把图片放置到图像(figure)中的任何地方。所以如果我们想要在一个大图片中嵌套一个小点的图片，我们通过子图(axes)来完成它。</p>
<h3 id="刻度(ticks)">刻度(ticks)</h3><p>良好格式化的刻度是准备发表的图片中的重要部分。Matplotlib为刻度提供完全可配置的系统。刻度定位器指定刻度出现的位置，刻度格式器让刻度看起来如你所愿。主刻度和次要刻度可以分别放置和格式化，每个默认主刻度并不显示，也就是，它们只有一个空列表，因为它们作为空定位器(NullLocator)(参见下面)。</p>
<h4 id="刻度定位器(Tick_Locator)">刻度定位器(Tick Locator)</h4><p>这有几个针对不同种类需求的各种定位器：</p>
<table>
<thead>
<tr>
<th>Class</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>NullLocator</td>
<td>没有刻度.</td>
</tr>
<tr>
<td></td>
<td><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-NullLocator.png" alt=""></td>
</tr>
<tr>
<td>IndexLocator</td>
<td>每到一个基数的倍数点放置一个刻度</td>
</tr>
<tr>
<td></td>
<td><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-IndexLocator.png" alt=""></td>
</tr>
<tr>
<td>FixedLocator</td>
<td>刻度位置是固定的</td>
</tr>
<tr>
<td></td>
<td><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-FixedLocator.png" alt=""></td>
</tr>
<tr>
<td>LinearLocator</td>
<td>决定刻度位置</td>
</tr>
<tr>
<td></td>
<td><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-LinearLocator.png" alt=""></td>
</tr>
<tr>
<td>MultipleLocator</td>
<td>在每个基于基数倍数的整数点放置刻度</td>
</tr>
<tr>
<td></td>
<td><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-MultipleLocator.png" alt=""></td>
</tr>
<tr>
<td>AutoLocator</td>
<td>在不错的位置选择不超过n个间隔</td>
</tr>
<tr>
<td></td>
<td><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-AutoLocator.png" alt=""></td>
</tr>
<tr>
<td>LogLocator</td>
<td>以log坐标决定刻度位置</td>
</tr>
<tr>
<td></td>
<td><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-LogLocator.png" alt=""></td>
</tr>
</tbody>
</table>
<p>所有这些定位器源于matplotlib基类matplotlib.ticker.Locator。你可以源于它创建你自己的定位器。处理时间刻度可能非常棘手。因此，matplotlib在matplotlib.dates中提供了特殊的定位器。</p>
<h2 id="其它种类绘图">其它种类绘图</h2><h3 id="常规绘图">常规绘图</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/plot_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/plot_ex.png" alt="reguler plots"></a></p>
<p>从下面的代码开始，尝试重新生成上边的填充图形。</p>
<pre><code>from pylab import *

n = <span class="number">256</span>
<span class="keyword">X</span> = np.linspace(-np.pi,np.pi,n,endpoint=True)
<span class="keyword">Y</span> = np.sin(<span class="number">2</span>*<span class="keyword">X</span>)

plot (<span class="keyword">X</span>, <span class="keyword">Y</span>+<span class="number">1</span>, color=<span class="string">'blue'</span>, alpha=<span class="number">1</span><span class="number">.00</span>)
plot (<span class="keyword">X</span>, <span class="keyword">Y</span>-<span class="number">1</span>, color=<span class="string">'blue'</span>, alpha=<span class="number">1</span><span class="number">.00</span>)
show()
</code></pre><p>提示：你需要使用<a href="http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.fill_between" target="_blank" rel="external">fill_between</a>命令。</p>
<p>点击图片获取答案。</p>
<h3 id="散点图(scatter_plots)">散点图(scatter plots)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/scatter_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/scatter_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，注意标记大小，颜色和透明度。</p>
<pre><code>from pylab import *

<span class="keyword">n</span> = 1024
X = np.random.<span class="literal">normal</span>(0,1,<span class="keyword">n</span>)
Y = np.random.<span class="literal">normal</span>(0,1,<span class="keyword">n</span>)

<span class="keyword">scatter</span>(X,Y)
show()
</code></pre><p>提示：色彩由(X,Y)角度给出。</p>
<p>点击图像获取答案。</p>
<h3 id="条形图(bar_plots)">条形图(bar plots)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/bar_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/bar_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，添加标签和红色条形。</p>
<pre><code>from pylab import *

n = <span class="number">12</span>
<span class="keyword">X</span> = np.arange(n)
<span class="keyword">Y</span><span class="number">1</span> = (<span class="number">1</span>-<span class="keyword">X</span>/float(n)) * np.random.uniform(<span class="number">0</span><span class="number">.5</span>,<span class="number">1</span><span class="number">.0</span>,n)
<span class="keyword">Y</span><span class="number">2</span> = (<span class="number">1</span>-<span class="keyword">X</span>/float(n)) * np.random.uniform(<span class="number">0</span><span class="number">.5</span>,<span class="number">1</span><span class="number">.0</span>,n)

bar(<span class="keyword">X</span>, +<span class="keyword">Y</span><span class="number">1</span>, facecolor=<span class="string">'#9999ff'</span>, edgecolor=<span class="string">'white'</span>)
bar(<span class="keyword">X</span>, -<span class="keyword">Y</span><span class="number">2</span>, facecolor=<span class="string">'#ff9999'</span>, edgecolor=<span class="string">'white'</span>)

for x,y in zip(<span class="keyword">X</span>,<span class="keyword">Y</span><span class="number">1</span>):
    text(x+<span class="number">0</span><span class="number">.4</span>, y+<span class="number">0</span><span class="number">.05</span>, <span class="string">'%.2f'</span> % y, ha=<span class="string">'center'</span>, va= <span class="string">'bottom'</span>)

ylim(-<span class="number">1</span><span class="number">.25</span>,+<span class="number">1</span><span class="number">.25</span>)
show()
</code></pre><p>提示:你要注意文本对齐。</p>
<p>点击图像获取答案。</p>
<h3 id="等高线图(contour_plots)">等高线图(contour plots)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/contour_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/contour_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，注意色彩表。(参见<a href="http://www.loria.fr/~rougier/teaching/matplotlib/#colormaps" target="_blank" rel="external">色彩表</a>)</p>
<pre><code><span class="keyword">from</span> pylab <span class="keyword">import</span> *

<span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x,y)</span>:</span> <span class="keyword">return</span> (<span class="number">1</span>-x/<span class="number">2</span>+x**<span class="number">5</span>+y**<span class="number">3</span>)*np.exp(-x**<span class="number">2</span>-y**<span class="number">2</span>)

n = <span class="number">256</span>
x = np.linspace(-<span class="number">3</span>,<span class="number">3</span>,n)
y = np.linspace(-<span class="number">3</span>,<span class="number">3</span>,n)
X,Y = np.meshgrid(x,y)

contourf(X, Y, f(X,Y), <span class="number">8</span>, alpha=<span class="number">.75</span>, cmap=<span class="string">'jet'</span>)
C = contour(X, Y, f(X,Y), <span class="number">8</span>, colors=<span class="string">'black'</span>, linewidth=<span class="number">.5</span>)
show()
</code></pre><p>提示：你需要使用<a href="http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.clabel" target="_blank" rel="external">clabel</a>命令。</p>
<p>点击图像获取答案。</p>
<h3 id="Imshow">Imshow</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/imshow_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/imshow_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，添加标签和红色条形。</p>
<pre><code><span class="keyword">from</span> pylab <span class="keyword">import</span> *

<span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x,y)</span>:</span> <span class="keyword">return</span> (<span class="number">1</span>-x/<span class="number">2</span>+x**<span class="number">5</span>+y**<span class="number">3</span>)*np.exp(-x**<span class="number">2</span>-y**<span class="number">2</span>)

n = <span class="number">10</span>
x = np.linspace(-<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>*n)
y = np.linspace(-<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>*n)
X,Y = np.meshgrid(x,y)
imshow(f(X,Y)), show()
</code></pre><p>提示:你需要注意imshow命令中图像的<em>来源</em>，并且使用色<a href="http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.colorbar" target="_blank" rel="external">彩条</a>(colorbar)。</p>
<p>点击图像获取答案。</p>
<h3 id="饼图(Pie_charts)">饼图(Pie charts)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/pie_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/pie_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，添加标签和红色条形。</p>
<pre><code>from pylab import *

n = <span class="number">20</span>
Z = np.random.uniform(<span class="number">0</span>,<span class="number">1</span>,n)
pie(Z), show()
</code></pre><p>提示：你需要改变Z。</p>
<p>点击图像获取答案。</p>
<h3 id="矢量图(quiver_plots)">矢量图(quiver plots)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/quiver_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/quiver_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，注意色彩和方向。</p>
<pre><code>from pylab import *

n = <span class="number">8</span>
<span class="keyword">X</span>,<span class="keyword">Y</span> = np.mgrid[<span class="number">0</span>:n,<span class="number">0</span>:n]
quiver(<span class="keyword">X</span>,<span class="keyword">Y</span>), show()
</code></pre><p>提示：你需要画两次箭头。</p>
<p>点击图像获取答案。</p>
<h3 id="网格(grids)">网格(grids)</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/grid_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/grid_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，添加标签和红色条形。</p>
<pre><code>from pylab import *

axes = gca<span class="comment">()</span>
axes.set_xlim<span class="comment">(0,4)</span>
axes.set_ylim<span class="comment">(0,3)</span>
axes.set_xticklabels<span class="comment">([])</span>
axes.set_yticklabels<span class="comment">([])</span>

show<span class="comment">()</span>
</code></pre><p>点击图像获取答案。</p>
<h3 id="多图绘制">多图绘制</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/multiplot_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/multiplot_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，添加标签和红色条形。</p>
<pre><code><span class="function">from pylab import *

<span class="title">subplot</span><span class="params">(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>)</span>
<span class="title">subplot</span><span class="params">(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span>
<span class="title">subplot</span><span class="params">(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>)</span>

<span class="title">show</span><span class="params">()</span></span>
</code></pre><p>提示：你可以对不同部分使用几个subplot命令。</p>
<p>点击图像获取答案。</p>
<h3 id="极轴图">极轴图</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/polar_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/polar_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，添加标签和红色条形。</p>
<pre><code><span class="label">from</span> pylab <span class="preprocessor">import</span> *

<span class="label">axes</span>([<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>])

N = <span class="number">20</span>
<span class="label">theta</span> = np.arange(<span class="number">0</span>.<span class="number">0</span>, <span class="number">2</span>*np.pi, <span class="number">2</span>*np.pi/N)
<span class="label">radii</span> = <span class="number">10</span>*np.random.rand(N)
<span class="label">width</span> = np.pi/<span class="number">4</span>*np.random.rand(N)
<span class="keyword">bars </span>= <span class="keyword">bar(theta, </span>radii, width<span class="label">=width</span>, <span class="keyword">bottom=0.0)
</span>
<span class="label">for</span> r,<span class="keyword">bar </span>in zip(radii, <span class="keyword">bars):
</span>    <span class="keyword">bar.set_facecolor( </span>cm.jet(r/<span class="number">10</span>.))
    <span class="keyword">bar.set_alpha(0.5)
</span>
<span class="label">show</span>()
</code></pre><p>提示：你仅仅需要修改<em>axes</em>这行。</p>
<p>点击图像获取答案。</p>
<h3 id="三维绘图">三维绘图</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/plot3d_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/plot3d_ex.png" alt="reguler plots"></a></p>
<p>从以下代码开始，尝试生成上边的图形，添加标签和红色条形。</p>
<pre><code>from pylab import *
from mpl_toolkits.mplot3d import Axes3D

fig = figure()
ax = Axes3D(fig)
<span class="keyword">X</span> = np.arange(-<span class="number">4</span>, <span class="number">4</span>, <span class="number">0</span><span class="number">.25</span>)
<span class="keyword">Y</span> = np.arange(-<span class="number">4</span>, <span class="number">4</span>, <span class="number">0</span><span class="number">.25</span>)
<span class="keyword">X</span>, <span class="keyword">Y</span> = np.meshgrid(<span class="keyword">X</span>, <span class="keyword">Y</span>)
<span class="keyword">R</span> = np.sqrt(<span class="keyword">X</span>**<span class="number">2</span> + <span class="keyword">Y</span>**<span class="number">2</span>)
<span class="keyword">Z</span> = np.sin(<span class="keyword">R</span>)

ax.plot_surface(<span class="keyword">X</span>, <span class="keyword">Y</span>, <span class="keyword">Z</span>, rstride=<span class="number">1</span>, cstride=<span class="number">1</span>, cmap=<span class="string">'hot'</span>)

show()
</code></pre><p>提示：你需要使用<a href="http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.contourf" target="_blank" rel="external">contourf</a>命令。</p>
<p>点击图像获取答案。</p>
<h3 id="绘制文本">绘制文本</h3><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/text_ex.py" target="_blank" rel="external"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/text_ex.png" alt="reguler plots"></a></p>
<p>试着从头做这个！提示：看一看<a href="http://matplotlib.sourceforge.net/examples/api/logo2.html" target="_blank" rel="external">matplotlib logo</a></p>
<p>点击图像获取答案。</p>
<h2 id="此教程之外">此教程之外</h2><p>matplotlib受益于丰富的文档和巨大的用户和开发者社区。这有几个有关的链接：</p>
<h3 id="教程">教程</h3><p><a href="http://matplotlib.sourceforge.net/users/pyplot_tutorial.html" target="_blank" rel="external">pyplot教程</a></p>
<p><a href="http://matplotlib.sourceforge.net/users/image_tutorial.html" target="_blank" rel="external">图像教程</a></p>
<p><a href="http://matplotlib.sourceforge.net/users/index_text.html" target="_blank" rel="external">文本教程</a></p>
<p><a href="http://matplotlib.sourceforge.net/users/artists.html" target="_blank" rel="external">artist对象教程</a></p>
<p><a href="http://matplotlib.sourceforge.net/users/path_tutorial.html" target="_blank" rel="external">路径教程</a></p>
<p><a href="http://matplotlib.sourceforge.net/users/transforms_tutorial.html" target="_blank" rel="external">变换教程</a></p>
<h3 id="matplotlib文档">matplotlib文档</h3><p><a href="http://matplotlib.sourceforge.net/users/index.html" target="_blank" rel="external">用户手册</a></p>
<p><a href="http://matplotlib.sourceforge.net/faq/index.html" target="_blank" rel="external">常见问题</a></p>
<p><a href="http://matplotlib.sourceforge.net/users/screenshots.html" target="_blank" rel="external">截图</a></p>
<h3 id="代码文档">代码文档</h3><p>代码相当好的文档化了，你可以在python会话中快速查询指定命令</p>
<pre><code>&gt;&gt;&gt; <span class="built_in">from</span> pylab import *
&gt;&gt;&gt; help(plot)
Help <span class="command"><span class="keyword">on</span> <span class="title">function</span> <span class="title">plot</span> <span class="title">in</span> <span class="title">module</span> <span class="title">matplotlib</span>.<span class="title">pyplot</span>:</span>

plot(*args, **kwargs)
   Plot <span class="keyword">lines</span> <span class="operator">and</span>/<span class="operator">or</span> markers <span class="built_in">to</span> <span class="operator">the</span>
   :class:`~matplotlib.axes.Axes`.  *args* is <span class="operator">a</span> <span class="built_in">variable</span> <span class="built_in">length</span>
   argument, allowing <span class="keyword">for</span> multiple *x*, *y* pairs <span class="operator">with</span> <span class="operator">an</span>
   optional <span class="built_in">format</span> <span class="keyword">string</span>.  For example, <span class="keyword">each</span> <span class="operator">of</span> <span class="operator">the</span> following is
   legal::

       plot(x, y)         <span class="comment"># plot x and y using default line style and color</span>
       plot(x, y, <span class="string">'bo'</span>)   <span class="comment"># plot x and y using blue circle markers</span>
       plot(y)            <span class="comment"># plot y using x as index array 0..N-1</span>
       plot(y, <span class="string">'r+'</span>)      <span class="comment"># ditto, but with red plusses</span>

   If *x* <span class="operator">and</span>/<span class="operator">or</span> *y* is <span class="number">2</span>-dimensional, <span class="keyword">then</span> <span class="operator">the</span> corresponding columns
   will be plotted.
</code></pre><h3 id="画廊(Galleries)">画廊(Galleries)</h3><p>当你搜寻如何绘制指定图像时，<a href="http://matplotlib.sourceforge.net/gallery.html" target="_blank" rel="external">matplotlib gallery</a>也相当有用。每个例子和它的源码一同被提供。</p>
<p>一个较小的画廊在<a href="http://www.loria.fr/~rougier/coding/gallery/" target="_blank" rel="external">这里</a></p>
<h3 id="邮件列表">邮件列表</h3><p>最后，这里有一个<a href="https://lists.sourceforge.net/lists/listinfo/matplotlib-users" target="_blank" rel="external">用户邮件列表</a>，那里你可以寻求帮助。一个<a href="https://lists.sourceforge.net/lists/listinfo/matplotlib-devel" target="_blank" rel="external">开发者邮件列表</a>是更加技术性的。</p>
<h2 id="快速参考">快速参考</h2><p>没什么好翻译的，看原文吧……<a href="http://www.loria.fr/~rougier/teaching/matplotlib/#quick-references" target="_blank" rel="external">传送门</a></p>
<h3 id="线条属性">线条属性</h3><h3 id="线型">线型</h3><h3 id="标记">标记</h3><h3 id="色彩表">色彩表</h3><hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/python/2012/08/30/sympy-tutorial/" itemprop="url">
                  SymPy Tutorial(译)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-30T00:00:00+08:00" content="2012-08-30">
              2012-08-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="SymPy_Tutorial">SymPy Tutorial</h1><p>翻译自：<a href="http://docs.sympy.org/dev/tutorial.html" target="_blank" rel="external">SymPy Tutorial</a>,其实有人译过了，但我看着不爽……你看我的不爽可以参考他的<a href="http://blankdesktop.blogbus.com/logs/74200705.html" target="_blank" rel="external">SymPy简明教程</a></p>
<p><strong>目录</strong></p>
<ul>
<li>toc<br>{: toc}</li>
</ul>
<h2 id="引言">引言</h2><p>SymPy是一个符号数学Python库。它的目标是成为一个全功能的计算机代数系统，同时保持代码的精简而易于理解和课扩展。SymPy完全由Python写成，不需要任何外部库。 </p>
<p>这个教程概述和简介SymPy。阅读它能让你知道SymPy可以为你做什么。如果你想了解更多，阅读<a href="http://docs.sympy.org/0.7.1/guide.html#guide" target="_blank" rel="external">SymPy用户指南</a>和<a href="http://docs.sympy.org/0.7.1/modules/index.html#module-docs" target="_blank" rel="external">SymPy模块参考</a>。或者直接阅读<a href="https://github.com/sympy/sympy/" target="_blank" rel="external">源码</a>。</p>
<h2 id="SymPy第一步">SymPy第一步</h2><p>下载它最简单的方法是去<a href="http://code.google.com/p/sympy/" target="_blank" rel="external">http://code.google.com/p/sympy/</a>从“推荐下载”下载最新的压缩包。<a href="不介意非稳定版我觉得git更方便一些，当然linux包管理器更方便,所以先用你的包管理器安装它。">^1</a><br><img src="http://fmn.rrimg.com/fmn061/20120901/1800/p_large_M3yG_5d30000027c61261.jpg" alt="downloads"></p>
<p>解压：</p>
<pre><code><span class="tag">tar</span> <span class="tag">xzf</span> <span class="tag">sympy-0</span><span class="class">.7</span><span class="class">.1</span><span class="class">.tar</span><span class="class">.gz</span>
</code></pre><p>然后用Python解释器尝试它：</p>
<pre><code>[lyy@arch ~]cd sympy-<span class="number">0.7</span><span class="number">.1</span>
[lyy@arch ~]$ python2
Python <span class="number">2.7</span><span class="number">.3</span> (<span class="keyword">default</span>, Apr <span class="number">24</span> <span class="number">2012</span>, <span class="number">00</span>:<span class="number">00</span>:<span class="number">54</span>) 
[GCC <span class="number">4.7</span><span class="number">.0</span> <span class="number">20120414</span> (prerelease)] on linux2
Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.
&gt;&gt;&gt; from sympy import Symbol, <span class="built_in">cos</span>
&gt;&gt;&gt; x = Symbol(<span class="string">'x'</span>)
&gt;&gt;&gt; (<span class="number">1</span>/<span class="built_in">cos</span>(x)).series(x, <span class="number">0</span>, <span class="number">10</span>)
<span class="number">1</span> + x**<span class="number">2</span>/<span class="number">2</span> + <span class="number">5</span>*x**<span class="number">4</span>/<span class="number">24</span> + <span class="number">61</span>*x**<span class="number">6</span>/<span class="number">720</span> + <span class="number">277</span>*x**<span class="number">8</span>/<span class="number">8064</span> + O(x**<span class="number">10</span>)
</code></pre><p>你可以如上展示使用SymPy。如果你在你的程序中使用它的话，这确实是推荐的方法。你也可以用<code>./setup.py install</code>像所有其它Python模块一样安装它，或者仅仅在你心爱的发行版中安装相应的包，等等。</p>
<p><strong>在archlinux中安装SymPy</strong></p>
<pre><code>[lyy@arch ~]$ sudo pacman -S python2-sympy
警告：python2-sympy-<span class="number">0.7</span><span class="number">.1</span>-<span class="number">4</span> 已经为最新 -- 重新安装
正在解决依赖关系...
正在查找内部冲突...

目标 (<span class="number">1</span>)： python2-sympy-<span class="number">0.7</span><span class="number">.1</span>-<span class="number">4</span>

全部安装大小：<span class="number">25.12</span> MiB
净更新大小：<span class="number">0.00</span> MiB

进行安装吗？ [Y/n] 
(<span class="number">1</span>/<span class="number">1</span>) 正在检查软件包完整性      [<span class="preprocessor">###############################] <span class="number">100</span>%</span>
(<span class="number">1</span>/<span class="number">1</span>) 正在加载软件包文件        [<span class="preprocessor">###############################] <span class="number">100</span>%</span>
(<span class="number">1</span>/<span class="number">1</span>) 正在检查文件冲突          [<span class="preprocessor">###############################] <span class="number">100</span>%</span>
(<span class="number">1</span>/<span class="number">1</span>) 正在检查可用硬盘空间      [<span class="preprocessor">###############################] <span class="number">100</span>%</span>
(<span class="number">1</span>/<span class="number">1</span>) 正在更新 python2-sympy
</code></pre><p>其它安装SymPy的方法，查阅SymPy主页上的<a href="http://code.google.com/p/sympy/wiki/DownloadInstallation?tm=2" target="_blank" rel="external">下载</a>标签。</p>
<h3 id="isympy控制台">isympy控制台</h3><p>为了试验新功能，或当搞清楚如何做事时，你可以使用我们对IPython的特殊封装<code>isympy</code>(它位于<code>/bin/isympy</code>中，如果你正在从源码文件夹运行的话)，它仅仅是一个已经导入相关sympy模块的标准python shell，定义了符号<code>x,y,z</code>和一些其它东西：</p>
<pre><code><span class="list">[<span class="keyword">lyy@arch</span> ~]$ cd sympy 
<span class="list">[<span class="keyword">lyy@arch</span> ~]$ ./bin/isympy 
IPython console for SymPy <span class="number">0.7</span>.1 <span class="list">(<span class="keyword">Python</span> <span class="number">2.7</span>.3-64-bit)</span> <span class="list">(<span class="keyword">ground</span> types: python)</span>

These commands were executed:
&gt;&gt;&gt; from __future__ import division
&gt;&gt;&gt; from sympy import *
&gt;&gt;&gt; x, y, z, t = symbols<span class="list">(<span class="variable">'x</span> y z t')</span>
&gt;&gt;&gt; k, m, n = symbols<span class="list">(<span class="variable">'k</span> m n', integer=True)</span>
&gt;&gt;&gt; f, g, h = symbols<span class="list">(<span class="variable">'f</span> g h', cls=Function)</span>

Documentation can be found at http://www.sympy.org

In <span class="list">[<span class="keyword">1</span>]: <span class="list">(<span class="keyword">1/cos</span><span class="list">(<span class="keyword">x</span>)</span>)</span>.series<span class="list">(<span class="keyword">x</span>, <span class="number">0</span>, <span class="number">10</span>)</span>
Out<span class="list">[<span class="keyword">1</span>]: 
     <span class="number">2</span>      <span class="number">4</span>       <span class="number">6</span>        <span class="number">8</span>           
    x    <span class="number">5</span>⋅x    <span class="number">61</span>⋅x    <span class="number">277</span>⋅x            
<span class="number">1</span> + ── + ──── + ───── + ────── + O<span class="list">(<span class="keyword">x**10</span>)</span>
    <span class="number">2</span>     <span class="number">24</span>     <span class="number">720</span>     <span class="number">8064</span>  </span></span></span></span>
</code></pre><h3 id="用SymPy做计算器">用SymPy做计算器</h3><p>SymPy有三种内建的数值类型：浮点数、有理数和整数。</p>
<p>有理数类用一对整数表示一个有理数：分子和分母，所以<code>Rational(1,2)</code>代表1/2,<code>Rational(5,2)</code>代表5/2等等。</p>
<pre><code>&gt;&gt;&gt; from sympy import *
&gt;&gt;&gt; a = Rational(<span class="number">1</span>,<span class="number">2</span>)

&gt;&gt;&gt; a
<span class="number">1</span>/<span class="number">2</span>

&gt;&gt;&gt; a*<span class="number">2</span>
<span class="number">1</span>

&gt;&gt;&gt; Rational(<span class="number">2</span>)**<span class="number">50</span>/Rational(<span class="number">10</span>)**<span class="number">50</span>
<span class="number">1</span>/<span class="number">88817841970012523233890533447265625</span>
</code></pre><p>当计算整型数据时小心处理，因为他们会截取整数部分。这就是为何：</p>
<pre><code>&gt;&gt;&gt; <span class="number">1</span>/<span class="number">2</span>
<span class="number">0</span>

&gt;&gt;&gt; <span class="number">1.0</span>/<span class="number">2</span>
<span class="number">0.5</span>
</code></pre><p>然而你可以这样做</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; from __future_<span class="number">_</span> import division

<span class="prompt">&gt;&gt;</span>&gt; <span class="number">1</span>/<span class="number">2</span> 
<span class="number">0</span>.<span class="number">5</span>
</code></pre><p>真正的除法将要成为python3k的标准，isympy中也是。</p>
<p>我们也有些特殊的常数，像e和pi，它们被视为符号(1+pi将不被数值求解，它将保持为1+pi)，并且我们可以有任意精度：</p>
<pre><code>&gt;&gt;&gt; pi**<span class="number">2</span>
pi**<span class="number">2</span>

&gt;&gt;&gt; pi.<span class="function"><span class="title">evalf</span><span class="params">()</span></span>
<span class="number">3.14159265358979</span>

&gt;&gt;&gt; (pi+<span class="function"><span class="title">exp</span><span class="params">(<span class="number">1</span>)</span></span>).<span class="function"><span class="title">evalf</span><span class="params">()</span></span>
<span class="number">5.85987448204884</span>
</code></pre><p>就像你看到的，<code>evalf</code>将表达式求解为浮点数。</p>
<p>这还有一个类表示数学上的无限，叫作<code>oo</code>：</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; oo &gt; <span class="number">99999</span>
<span class="constant">True</span>
<span class="prompt">&gt;&gt;</span>&gt; oo + <span class="number">1</span>
oo
</code></pre><h3 id="符号">符号</h3><p>和其它计算机代数系统相比，在SymPy中你不得不显式地声明符号变量：</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">from</span> sympy <span class="keyword">import</span> *
<span class="prompt">&gt;&gt;&gt; </span>x = Symbol(<span class="string">'x'</span>)
<span class="prompt">&gt;&gt;&gt; </span>y = Symbol(<span class="string">'y'</span>)
</code></pre><p>然后你可以使用它们：</p>
<pre><code>&gt;&gt;&gt; x+y+x-y
2<span class="keyword">*</span>x

&gt;&gt;&gt; (x+y)<span class="keyword">*</span><span class="keyword">*</span>2
(x + y)<span class="keyword">*</span><span class="keyword">*</span>2

&gt;&gt;&gt; ((x+y)<span class="keyword">*</span><span class="keyword">*</span>2).expand()
x<span class="keyword">*</span><span class="keyword">*</span>2 + 2<span class="keyword">*</span>x<span class="keyword">*</span>y + y<span class="keyword">*</span><span class="keyword">*</span>2
</code></pre><p>使用<code>subs(old, new)</code>用其它符号和数代换它们：</p>
<pre><code>&gt;&gt;&gt; ((x+y)<span class="keyword">*</span><span class="keyword">*</span>2).subs(x, 1)
(y + 1)<span class="keyword">*</span><span class="keyword">*</span>2

&gt;&gt;&gt; ((x+y)<span class="keyword">*</span><span class="keyword">*</span>2).subs(x, y)
4<span class="keyword">*</span>y<span class="keyword">*</span><span class="keyword">*</span>2
</code></pre><p>对于剩余的教程，我们假设我们已经运行了：</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; import sys
<span class="prompt">&gt;&gt;</span>&gt; oldhook = sys.displayhook
<span class="prompt">&gt;&gt;</span>&gt; sys.displayhook = pprint
</code></pre><p>这样就有漂亮的打印。参见之后的<a href="#section-16">打印</a>部分。如果你安装了unicode字体，你的输出可能看起来有点不同。(将看起来稍微好些)</p>
<h2 id="代数">代数</h2><p>对部分分式分解，使用<code>apart(expr, x)</code>：</p>
<pre><code>&gt;&gt;&gt; <span class="number">1</span>/((x+<span class="number">2</span>)*(x+<span class="number">1</span>))
       <span class="number">1</span>       
───────────────
(x + <span class="number">1</span>)⋅(x + <span class="number">2</span>)
&gt;&gt;&gt; apart(<span class="number">1</span>/((x+<span class="number">2</span>)*(x+<span class="number">1</span>)), x)
    <span class="number">1</span>       <span class="number">1</span>  
- ───── + ─────
  x + <span class="number">2</span>   x + <span class="number">1</span>
&gt;&gt;&gt; (x+<span class="number">1</span>)/(x-<span class="number">1</span>)
x + <span class="number">1</span>
─────
x - <span class="number">1</span>
&gt;&gt;&gt; apart((x+<span class="number">1</span>)/(x-<span class="number">1</span>), x)
      <span class="number">2</span>  
<span class="number">1</span> + ─────
    x - <span class="number">1</span>
</code></pre><p>把它们重新结合起来，使用<code>together(expr, x)</code>：</p>
<pre><code>&gt;&gt;&gt; z = Symbol(<span class="string">'z'</span>)
&gt;&gt;&gt; together(<span class="number">1</span>/x + <span class="number">1</span>/y + <span class="number">1</span>/z)
x⋅y + x⋅z + y⋅z
───────────────
     x⋅y⋅z     
&gt;&gt;&gt; together(apart((x+<span class="number">1</span>)/(x-<span class="number">1</span>), x), x)
x + <span class="number">1</span>
─────
x - <span class="number">1</span>
&gt;&gt;&gt; together(apart(<span class="number">1</span>/( (x+<span class="number">2</span>)*(x+<span class="number">1</span>) ), x), x)
       <span class="number">1</span>       
───────────────
(x + <span class="number">1</span>)⋅(x + <span class="number">2</span>)
</code></pre><h2 id="演算">演算</h2><h3 id="极限">极限</h3><p>极限在sympy中使用很简单，它们的语法是<code>limit(function, variable, point)</code>，所以计算当x趋近于0时f(x)的极限，你可以给出<code>limit(f, x, 0)</code>：</p>
<pre><code>&gt;&gt;&gt; from sympy import *
&gt;&gt;&gt; x=Symbol<span class="list">(<span class="string">"x"</span>)</span>
&gt;&gt;&gt; limit<span class="list">(<span class="keyword">sin</span><span class="list">(<span class="keyword">x</span>)</span>/x, x, <span class="number">0</span>)</span>
<span class="number">1</span>
</code></pre><p>你也可以计算在无穷的极限：</p>
<pre><code>&gt;&gt;&gt; <span class="function"><span class="title">limit</span><span class="params">(sin(x)</span></span>/x,x,<span class="number">0</span>)
<span class="number">1</span>
&gt;&gt;&gt; <span class="function"><span class="title">limit</span><span class="params">(x,x,oo)</span></span>
∞
</code></pre><p>对于一些不寻常的极限例子，你可以阅读这个测试文件<a href="https://github.com/sympy/sympy/blob/master/sympy/series/tests/test_demidovich.py" target="_blank" rel="external">test_demidovich.py</a></p>
<h3 id="微分">微分</h3><p>你可以使用<code>diff(func, var)</code>微分任何SymPy表达式。例如：</p>
<pre><code>&gt;&gt;&gt; from sympy import *
&gt;&gt;&gt; x = Symbol(<span class="string">'x'</span>)
&gt;&gt;&gt; diff(<span class="built_in">sin</span>(x), x)
<span class="built_in">cos</span>(x)
&gt;&gt;&gt; diff(<span class="built_in">sin</span>(<span class="number">2</span>*x), x)
<span class="number">2</span>⋅<span class="built_in">cos</span>(<span class="number">2</span>⋅x)
&gt;&gt;&gt; diff(<span class="built_in">tan</span>(x), x)
   <span class="number">2</span>       
<span class="built_in">tan</span> (x) + <span class="number">1</span>
</code></pre><p>你可以检查正确性：</p>
<pre><code>&gt;&gt;&gt; limit<span class="list">(<span class="list">(<span class="keyword">tan</span><span class="list">(<span class="keyword">x+y</span>)</span>-tan<span class="list">(<span class="keyword">x</span>)</span>)</span>/y, y, <span class="number">0</span>)</span>
   <span class="number">2</span>       
tan <span class="list">(<span class="keyword">x</span>)</span> + <span class="number">1</span>
</code></pre><p>高阶微分可以使用<code>diff(func, var, n)</code>来计算：</p>
<pre><code>&gt;&gt;&gt; diff(<span class="built_in">sin</span>(<span class="number">2</span>*x), x, <span class="number">1</span>)
<span class="number">2</span>⋅<span class="built_in">cos</span>(<span class="number">2</span>⋅x)
&gt;&gt;&gt; diff(<span class="built_in">sin</span>(<span class="number">2</span>*x), x, <span class="number">2</span>)
-<span class="number">4</span>⋅<span class="built_in">sin</span>(<span class="number">2</span>⋅x)
&gt;&gt;&gt; diff(<span class="built_in">sin</span>(<span class="number">2</span>*x), x, <span class="number">3</span>)
-<span class="number">8</span>⋅<span class="built_in">cos</span>(<span class="number">2</span>⋅x)
</code></pre><h3 id="级数展开">级数展开</h3><p>使用<code>.series(var, point, order)</code>:</p>
<pre><code>&gt;&gt;&gt; <span class="built_in">cos</span>(x).series(x, <span class="number">0</span>, <span class="number">10</span>)
     <span class="number">2</span>    <span class="number">4</span>     <span class="number">6</span>      <span class="number">8</span>            
    x    x     x      x             
<span class="number">1</span> - ── + ── - ─── + ───── + O(x**<span class="number">10</span>)
    <span class="number">2</span>    <span class="number">24</span>   <span class="number">720</span>   <span class="number">40320</span> 
&gt;&gt;&gt; (<span class="number">1</span>/<span class="built_in">cos</span>(x)).series(x, <span class="number">0</span>, <span class="number">10</span>)
     <span class="number">2</span>      <span class="number">4</span>       <span class="number">6</span>        <span class="number">8</span>           
    x    <span class="number">5</span>⋅x    <span class="number">61</span>⋅x    <span class="number">277</span>⋅x            
<span class="number">1</span> + ── + ──── + ───── + ────── + O(x**<span class="number">10</span>)
    <span class="number">2</span>     <span class="number">24</span>     <span class="number">720</span>     <span class="number">8064</span>            
</code></pre><p>另一个简单的例子：</p>
<pre><code>&gt;&gt;&gt; from sympy import Integral, Symbol, pprint
&gt;&gt;&gt; x = Symbol(<span class="string">'x'</span>)
&gt;&gt;&gt; y = Symbol(<span class="string">'y'</span>)
&gt;&gt;&gt; e = <span class="number">1</span>/(x + y)
&gt;&gt;&gt; s = e.series(x, <span class="number">0</span>, <span class="number">5</span>)
&gt;&gt;&gt; print(s)
<span class="number">1</span>/y - x/y**<span class="number">2</span> + x**<span class="number">2</span>/y**<span class="number">3</span> - x**<span class="number">3</span>/y**<span class="number">4</span> + x**<span class="number">4</span>/y**<span class="number">5</span> + O(x**<span class="number">5</span>)
&gt;&gt;&gt; pprint(s)
          <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>          
<span class="number">1</span>   x    x    x    x           
─ - ── + ── - ── + ── + O(x**<span class="number">5</span>)
y    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span>          
    y    y    y    y           
None
</code></pre><h3 id="求和">求和</h3><p>计算给定求和变量界限的f的总和(Summation)。[^2]</p>
<p><code>summation(f, (i, a, b))</code>变量i从a到b计算f的和，也就是，</p>
<pre><code>                            <span class="tag">b</span>
                          ____
                          \   `
<span class="function"><span class="title">summation</span><span class="params">(f, (i, a, b)</span></span>) =  )    f
                          /___,
                          <span class="tag">i</span> = a
</code></pre><p>如果不能计算总和，它将打印相应的求和公式。求值可引入额外的极限计算：</p>
<pre><code>&gt;&gt;&gt; from sympy import summation, oo, symbols, <span class="literal">log</span>
&gt;&gt;&gt; i, <span class="keyword">n</span>, <span class="keyword">m</span> = symbols('i <span class="keyword">n</span> <span class="keyword">m</span>', integer=True)
&gt;&gt;&gt; summation(2*i - 1, (i, 1, <span class="keyword">n</span>))
 2
<span class="keyword">n</span> 
&gt;&gt;&gt; summation(1/2**i, (i, 0, oo))
2
&gt;&gt;&gt; summation(1/<span class="literal">log</span>(<span class="keyword">n</span>)**<span class="keyword">n</span>, (<span class="keyword">n</span>, 2, oo))
  ∞           
 ___          
 \  `         
  \      -<span class="keyword">n</span>   
  /   <span class="keyword">log</span>  (<span class="keyword">n</span>)
 /__,         
<span class="keyword">n</span> = 2         
&gt;&gt;&gt; summation(i, (i, 0, <span class="keyword">n</span>), (<span class="keyword">n</span>, 0, <span class="keyword">m</span>))
 3    2    
<span class="keyword">m</span>    <span class="keyword">m</span>    <span class="literal">m</span>
── + ── + ─
6    2    3
&gt;&gt;&gt; from sympy.abc import x
&gt;&gt;&gt; from sympy import factorial
&gt;&gt;&gt; summation(x**<span class="keyword">n</span>/factorial(<span class="keyword">n</span>), (<span class="keyword">n</span>, 0, oo))
 x
ℯ 
</code></pre><h3 id="积分">积分</h3><p>通过<code>integrate()</code>功能(facility)，SymPy对基本和特殊函数定与不定积分有卓越的支持。<br>该功能使用有力的扩展Risch-Norman算法，启发算法和模式匹配：</p>
<pre><code>&gt;&gt;&gt; from sympy import integrate, <span class="built_in">erf</span>, <span class="built_in">exp</span>, <span class="built_in">sin</span>, <span class="built_in">log</span>, oo, <span class="built_in">pi</span>, <span class="built_in">sinh</span>, symbols
&gt;&gt;&gt; x, y = symbols(<span class="string">'x,y'</span>)
</code></pre><p>你可以对基本函数积分：</p>
<pre><code>&gt;&gt;&gt; <span class="function"><span class="title">integrate</span><span class="params">(<span class="number">6</span>*x**<span class="number">5</span>, x)</span></span>
 <span class="number">6</span>
x 
&gt;&gt;&gt; <span class="function"><span class="title">integrate</span><span class="params">(sin(x)</span></span>, x)
-<span class="function"><span class="title">cos</span><span class="params">(x)</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">integrate</span><span class="params">(log(x)</span></span>, x)
x⋅<span class="function"><span class="title">log</span><span class="params">(x)</span></span> - x
&gt;&gt;&gt; <span class="function"><span class="title">integrate</span><span class="params">(<span class="number">2</span>*x + sinh(x)</span></span>, x)
 <span class="number">2</span>          
x  + <span class="function"><span class="title">cosh</span><span class="params">(x)</span></span>
</code></pre><p>特殊函数也可以简单的处理：</p>
<pre><code>&gt;&gt;&gt; <span class="function"><span class="title">integrate</span><span class="params">(exp(-x**<span class="number">2</span>)</span></span>*<span class="function"><span class="title">erf</span><span class="params">(x)</span></span>, x)
  ⎽⎽⎽    <span class="number">2</span>   
╲╱ π ⋅erf (x)
─────────────
      <span class="number">4</span>      
</code></pre><p>还可以计算定积分：</p>
<pre><code>&gt;&gt;&gt; integrate<span class="list">(<span class="keyword">x**3</span>, <span class="list">(<span class="keyword">x</span>, <span class="number">-1</span>, <span class="number">1</span>)</span>)</span>
<span class="number">0</span>
&gt;&gt;&gt; integrate<span class="list">(<span class="keyword">sin</span><span class="list">(<span class="keyword">x</span>)</span>, <span class="list">(<span class="keyword">x</span>, <span class="number">0</span>, pi/2)</span>)</span>
<span class="number">1</span>
&gt;&gt;&gt; integrate<span class="list">(<span class="keyword">cos</span><span class="list">(<span class="keyword">x</span>)</span>, <span class="list">(<span class="keyword">x</span>, -pi/2, pi/2)</span>)</span>
<span class="number">2</span>
</code></pre><p>反常积分也被支持：</p>
<pre><code>&gt;&gt;&gt; integrate<span class="list">(<span class="keyword">exp</span><span class="list">(<span class="keyword">-x</span>)</span>, <span class="list">(<span class="keyword">x</span>, <span class="number">0</span>, oo)</span>)</span>
<span class="number">1</span>
&gt;&gt;&gt; integrate<span class="list">(<span class="keyword">log</span><span class="list">(<span class="keyword">x</span>)</span>, <span class="list">(<span class="keyword">x</span>, <span class="number">0</span>, <span class="number">1</span>)</span>)</span>
<span class="number">-1</span>
</code></pre><h3 id="复数">复数</h3><p>除了复数单元<code>I</code>是虚数，符号可以被用属性创建(例如 real,positive,complex,等等)这将影响它们的表现：</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; from sympy import <span class="constant">Symbol</span>, exp, <span class="constant">I</span>
<span class="prompt">&gt;&gt;</span>&gt; x = <span class="constant">Symbol</span>(<span class="string">'x'</span>)  <span class="comment"># a plain x with no attributes</span>
<span class="prompt">&gt;&gt;</span>&gt; exp(<span class="constant">I</span>*x).expand()
 ⅈ⋅x
ℯ   
<span class="prompt">&gt;&gt;</span>&gt; exp(<span class="constant">I</span>*x).expand(complex=<span class="constant">True</span>)
   -im(x)               -im(x)           
ⅈ⋅ℯ      ⋅sin(re(x)) + ℯ      ⋅cos(re(x))
<span class="prompt">&gt;&gt;</span>&gt; x = <span class="constant">Symbol</span>(<span class="string">'x'</span>, real=<span class="constant">True</span>)
<span class="prompt">&gt;&gt;</span>&gt; exp(<span class="constant">I</span>*x).expand(complex=<span class="constant">True</span>)
ⅈ⋅sin(x) + cos(x)
</code></pre><h3 id="函数">函数</h3><p><strong>三角函数:</strong></p>
<pre><code>&gt;&gt;&gt; from sympy import asin, asinh, cos, sin, sinh, symbols, I
&gt;&gt;&gt; x, y = <span class="function"><span class="title">symbols</span><span class="params">(<span class="string">'x,y'</span>)</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">sin</span><span class="params">(x+y)</span></span>.<span class="function"><span class="title">expand</span><span class="params">(trig=True)</span></span>
<span class="function"><span class="title">sin</span><span class="params">(x)</span></span>⋅<span class="function"><span class="title">cos</span><span class="params">(y)</span></span> + <span class="function"><span class="title">sin</span><span class="params">(y)</span></span>⋅<span class="function"><span class="title">cos</span><span class="params">(x)</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">cos</span><span class="params">(x+y)</span></span>.<span class="function"><span class="title">expand</span><span class="params">(trig=True)</span></span>
-<span class="function"><span class="title">sin</span><span class="params">(x)</span></span>⋅<span class="function"><span class="title">sin</span><span class="params">(y)</span></span> + <span class="function"><span class="title">cos</span><span class="params">(x)</span></span>⋅<span class="function"><span class="title">cos</span><span class="params">(y)</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">sin</span><span class="params">(I*x)</span></span>
ⅈ⋅<span class="function"><span class="title">sinh</span><span class="params">(x)</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">sinh</span><span class="params">(I*x)</span></span>
ⅈ⋅<span class="function"><span class="title">sin</span><span class="params">(x)</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">asinh</span><span class="params">(I)</span></span>
ⅈ⋅π
───
 <span class="number">2</span> 
&gt;&gt;&gt; <span class="function"><span class="title">asinh</span><span class="params">(I*x)</span></span>
ⅈ⋅<span class="function"><span class="title">asin</span><span class="params">(x)</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">sin</span><span class="params">(x)</span></span>.<span class="function"><span class="title">series</span><span class="params">(x, <span class="number">0</span>, <span class="number">10</span>)</span></span>
     <span class="number">3</span>     <span class="number">5</span>     <span class="number">7</span>       <span class="number">9</span>             
    x     x     x       x              
x - ── + ─── - ──── + ────── + <span class="function"><span class="title">O</span><span class="params">(x**<span class="number">10</span>)</span></span>
    <span class="number">6</span>    <span class="number">120</span>   <span class="number">5040</span>   <span class="number">362880</span>           
&gt;&gt;&gt; <span class="function"><span class="title">sinh</span><span class="params">(x)</span></span>.<span class="function"><span class="title">series</span><span class="params">(x, <span class="number">0</span>, <span class="number">10</span>)</span></span>
     <span class="number">3</span>     <span class="number">5</span>     <span class="number">7</span>       <span class="number">9</span>             
    x     x     x       x              
x + ── + ─── + ──── + ────── + <span class="function"><span class="title">O</span><span class="params">(x**<span class="number">10</span>)</span></span>
    <span class="number">6</span>    <span class="number">120</span>   <span class="number">5040</span>   <span class="number">362880</span>           
&gt;&gt;&gt; <span class="function"><span class="title">asin</span><span class="params">(x)</span></span>.<span class="function"><span class="title">series</span><span class="params">(x, <span class="number">0</span>, <span class="number">10</span>)</span></span>
     <span class="number">3</span>      <span class="number">5</span>      <span class="number">7</span>       <span class="number">9</span>           
    x    <span class="number">3</span>⋅x    <span class="number">5</span>⋅x    <span class="number">35</span>⋅x            
x + ── + ──── + ──── + ───── + <span class="function"><span class="title">O</span><span class="params">(x**<span class="number">10</span>)</span></span>
    <span class="number">6</span>     <span class="number">40</span>    <span class="number">112</span>     <span class="number">1152</span>           
&gt;&gt;&gt; <span class="function"><span class="title">asinh</span><span class="params">(x)</span></span>.<span class="function"><span class="title">series</span><span class="params">(x, <span class="number">0</span>, <span class="number">10</span>)</span></span>
     <span class="number">3</span>      <span class="number">5</span>      <span class="number">7</span>       <span class="number">9</span>           
    x    <span class="number">3</span>⋅x    <span class="number">5</span>⋅x    <span class="number">35</span>⋅x            
x - ── + ──── - ──── + ───── + <span class="function"><span class="title">O</span><span class="params">(x**<span class="number">10</span>)</span></span>
    <span class="number">6</span>     <span class="number">40</span>    <span class="number">112</span>     <span class="number">1152</span>    
</code></pre><p><strong>球谐函数：</strong></p>
<pre><code>&gt;&gt;&gt; from sympy import Ylm
&gt;&gt;&gt; from sympy<span class="class">.abc</span> import theta, phi
&gt;&gt;&gt; <span class="function"><span class="title">Ylm</span><span class="params">(<span class="number">1</span>, <span class="number">0</span>, theta, phi)</span></span>
  ⎽⎽⎽       
╲╱ <span class="number">3</span> ⋅<span class="function"><span class="title">cos</span><span class="params">(θ)</span></span>
────────────
      ⎽⎽⎽   
  <span class="number">2</span>⋅╲╱ π    
&gt;&gt;&gt; <span class="function"><span class="title">Ylm</span><span class="params">(<span class="number">1</span>, <span class="number">1</span>, theta, phi)</span></span>
   ⎽⎽⎽  ⅈ⋅φ       
-╲╱ <span class="number">6</span> ⋅ℯ   ⋅<span class="function"><span class="title">sin</span><span class="params">(θ)</span></span>
──────────────────
         ⎽⎽⎽      
     <span class="number">4</span>⋅╲╱ π       
&gt;&gt;&gt; <span class="function"><span class="title">Ylm</span><span class="params">(<span class="number">2</span>, <span class="number">1</span>, theta, phi)</span></span>
   ⎽⎽⎽⎽  ⅈ⋅φ              
-╲╱ <span class="number">30</span> ⋅ℯ   ⋅<span class="function"><span class="title">sin</span><span class="params">(θ)</span></span>⋅<span class="function"><span class="title">cos</span><span class="params">(θ)</span></span>
──────────────────────────
             ⎽⎽⎽          
         <span class="number">4</span>⋅╲╱ π       
</code></pre><p><strong>阶乘和伽马函数：</strong></p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; from sympy import factorial, gamma, <span class="constant">Symbol</span>
<span class="prompt">&gt;&gt;</span>&gt; x = <span class="constant">Symbol</span>(<span class="string">"x"</span>)
<span class="prompt">&gt;&gt;</span>&gt; n = <span class="constant">Symbol</span>(<span class="string">"n"</span>, integer=<span class="constant">True</span>)
<span class="prompt">&gt;&gt;</span>&gt; factorial(x)
x!
<span class="prompt">&gt;&gt;</span>&gt; factorial(n)
n!
<span class="prompt">&gt;&gt;</span>&gt; gamma(x + <span class="number">1</span>).series(x, <span class="number">0</span>, <span class="number">3</span>) <span class="comment"># i.e. factorial(x)</span>
                    <span class="number">2</span>  <span class="number">2</span>             <span class="number">2</span>  <span class="number">2</span>          
                   π ⋅x    <span class="constant">EulerGamma</span> ⋅x           
<span class="number">1</span> - <span class="constant">EulerGamma</span>⋅x + ───── + ────────────── + <span class="constant">O</span>(x**<span class="number">3</span>)
                     <span class="number">12</span>          <span class="number">2</span>     
</code></pre><p><strong>zeta函数：</strong></p>
<pre><code>&gt;&gt;&gt; from sympy import zeta
&gt;&gt;&gt; zeta(<span class="number">4</span>, x)
ζ(<span class="number">4</span>, x)
&gt;&gt;&gt; zeta(<span class="number">4</span>, <span class="number">1</span>)
 <span class="number">4</span>
π 
──
<span class="number">90</span>
&gt;&gt;&gt; zeta(<span class="number">4</span>, <span class="number">2</span>)
      <span class="number">4</span>
     π 
-<span class="number">1</span> + ──
     <span class="number">90</span>
&gt;&gt;&gt; zeta(<span class="number">4</span>, <span class="number">3</span>)
        <span class="number">4</span>
  <span class="number">17</span>   π 
- ── + ──
  <span class="number">16</span>   <span class="number">90</span>
</code></pre><p><strong>多项式：</strong></p>
<pre><code>&gt;&gt;&gt; from sympy import assoc_legendre, chebyshevt, legendre, hermite
&gt;&gt;&gt; chebyshevt(<span class="number">2</span>, x)
   <span class="number">2</span>    
<span class="number">2</span>⋅x  - <span class="number">1</span>
&gt;&gt;&gt; chebyshevt(<span class="number">4</span>, x)
   <span class="number">4</span>      <span class="number">2</span>    
<span class="number">8</span>⋅x  - <span class="number">8</span>⋅x  + <span class="number">1</span>
&gt;&gt;&gt; legendre(<span class="number">2</span>, x)
   <span class="number">2</span>    
<span class="number">3</span>⋅x    <span class="number">1</span>
──── - ─
 <span class="number">2</span>     <span class="number">2</span>
&gt;&gt;&gt; legendre(<span class="number">8</span>, x)
      <span class="number">8</span>         <span class="number">6</span>         <span class="number">4</span>        <span class="number">2</span>      
<span class="number">6435</span>⋅x    <span class="number">3003</span>⋅x    <span class="number">3465</span>⋅x    <span class="number">315</span>⋅x     <span class="number">35</span>
─────── - ─────── + ─────── - ────── + ───
  <span class="number">128</span>        <span class="number">32</span>        <span class="number">64</span>       <span class="number">32</span>     <span class="number">128</span>
&gt;&gt;&gt; assoc_legendre(<span class="number">2</span>, <span class="number">1</span>, x)
        ⎽⎽⎽⎽⎽⎽⎽⎽⎽⎽
       ╱    <span class="number">2</span>     
-<span class="number">3</span>⋅x⋅╲╱  - x  + <span class="number">1</span> 
&gt;&gt;&gt; assoc_legendre(<span class="number">2</span>, <span class="number">2</span>, x)
     <span class="number">2</span>    
- <span class="number">3</span>⋅x  + <span class="number">3</span>
&gt;&gt;&gt; hermite(<span class="number">3</span>, x)
   <span class="number">3</span>       
<span class="number">8</span>⋅x  - <span class="number">12</span>⋅x
</code></pre><h3 id="微分方程">微分方程</h3><p>在 isympy中：</p>
<pre><code>&gt;&gt;&gt; from sympy import Function, Symbol, dsolve
&gt;&gt;&gt; f = <span class="function"><span class="title">Function</span><span class="params">(<span class="string">'f'</span>)</span></span>
&gt;&gt;&gt; x = <span class="function"><span class="title">Symbol</span><span class="params">(<span class="string">'x'</span>)</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">f</span><span class="params">(x)</span></span>.<span class="function"><span class="title">diff</span><span class="params">(x, x)</span></span> + <span class="function"><span class="title">f</span><span class="params">(x)</span></span>
         <span class="number">2</span>      
        d       
<span class="function"><span class="title">f</span><span class="params">(x)</span></span> + ───(<span class="function"><span class="title">f</span><span class="params">(x)</span></span>)
         <span class="number">2</span>      
       dx       
&gt;&gt;&gt; <span class="function"><span class="title">dsolve</span><span class="params">(f(x)</span></span>.<span class="function"><span class="title">diff</span><span class="params">(x, x)</span></span> + <span class="function"><span class="title">f</span><span class="params">(x)</span></span>, <span class="function"><span class="title">f</span><span class="params">(x)</span></span>)
<span class="function"><span class="title">f</span><span class="params">(x)</span></span> = C₁⋅<span class="function"><span class="title">cos</span><span class="params">(x)</span></span> + C₂⋅<span class="function"><span class="title">sin</span><span class="params">(x)</span></span>
</code></pre><h3 id="代数方程">代数方程</h3><p>在isympy中：</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; from sympy import solve, symbols
<span class="prompt">&gt;&gt;</span>&gt; x, y = symbols(<span class="string">'x,y'</span>)
<span class="prompt">&gt;&gt;</span>&gt; solve(x**<span class="number">4</span> - <span class="number">1</span>, x)
[<span class="number">1</span>, -<span class="number">1</span>, -ⅈ, ⅈ]
<span class="prompt">&gt;&gt;</span>&gt; solve([x + <span class="number">5</span>*y - <span class="number">2</span>, -<span class="number">3</span>*x + <span class="number">6</span>*y - <span class="number">15</span>], [x, y])
{<span class="symbol">x:</span> -<span class="number">3</span>, <span class="symbol">y:</span> <span class="number">1</span>}
</code></pre><h2 id="线性代数">线性代数</h2><h3 id="矩阵">矩阵</h3><p>矩阵从Matrix类创建：</p>
<pre><code>&gt;&gt;&gt; from sympy import Matrix, Symbol
&gt;&gt;&gt; Matrix([[<span class="number">1</span>,<span class="number">0</span>], [<span class="number">0</span>,<span class="number">1</span>]])
⎡<span class="number">1</span>  <span class="number">0</span>⎤
⎢    ⎥
⎣<span class="number">0</span>  <span class="number">1</span>⎦
</code></pre><p>它可以包含符号：</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; x = <span class="constant">Symbol</span>(<span class="string">'x'</span>)
<span class="prompt">&gt;&gt;</span>&gt; y = <span class="constant">Symbol</span>(<span class="string">'y'</span>)
<span class="prompt">&gt;&gt;</span>&gt; <span class="constant">A</span> = <span class="constant">Matrix</span>([[<span class="number">1</span>,x], [y,<span class="number">1</span>]])
<span class="prompt">&gt;&gt;</span>&gt; <span class="constant">A</span>
⎡<span class="number">1</span>  x⎤
⎢    ⎥
⎣y  <span class="number">1</span>⎦
<span class="prompt">&gt;&gt;</span>&gt; <span class="constant">A</span>**<span class="number">2</span>
⎡x⋅y + <span class="number">1</span>    <span class="number">2</span>⋅x  ⎤
⎢                ⎥
⎣  <span class="number">2</span>⋅y    x⋅y + <span class="number">1</span>⎦
</code></pre><p>更多有关矩阵信息，参见线性代数教程。</p>
<h2 id="模式匹配">模式匹配</h2><p>使用<code>.match()</code>方法，和Wild类对表达式实行模式匹配。这个方法将返回一个发生替换的字典，如下：</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; from sympy import <span class="constant">Symbol</span>, <span class="constant">Wild</span>
<span class="prompt">&gt;&gt;</span>&gt; x = <span class="constant">Symbol</span>(<span class="string">'x'</span>)
<span class="prompt">&gt;&gt;</span>&gt; p = <span class="constant">Wild</span>(<span class="string">'p'</span>)
<span class="prompt">&gt;&gt;</span>&gt; (<span class="number">5</span>*x**<span class="number">2</span>).match(p*x**<span class="number">2</span>)
{<span class="symbol">p:</span> <span class="number">5</span>}
<span class="prompt">&gt;&gt;</span>&gt; q = <span class="constant">Wild</span>(<span class="string">'q'</span>)
<span class="prompt">&gt;&gt;</span>&gt; (x**<span class="number">2</span>).match(p*x**q)
{<span class="symbol">p:</span> <span class="number">1</span>, <span class="symbol">q:</span> <span class="number">2</span>}
</code></pre><p>如果匹配失败，将返回<code>None</code>：</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">print</span> (x+<span class="number">1</span>).match(p**x)
<span class="keyword">None</span>
</code></pre><p>可以指定<code>Wild</code>类的排除参数去保证一些东西不出现在结果之中：</p>
<pre><code>&gt;&gt;&gt; p = Wild(<span class="string">'p'</span>, exclude=[<span class="number">1</span>,x])
&gt;&gt;&gt; print (x+<span class="number">1</span>).match(x+p) <span class="preprocessor"># <span class="number">1</span> is excluded</span>
None
&gt;&gt;&gt; print (x+<span class="number">1</span>).match(p+<span class="number">1</span>) <span class="preprocessor"># x is excluded</span>
None
&gt;&gt;&gt; print (x+<span class="number">1</span>).match(x+<span class="number">2</span>+p) <span class="preprocessor"># -<span class="number">1</span> is not excluded</span>
{p_: -<span class="number">1</span>}
</code></pre><h2 id="打印">打印</h2><p>这里有许多打印表达式的方法：</p>
<p><strong>标准</strong></p>
<p>这就是<code>str(expression)</code>返回的，看起来想这样：</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">from</span> sympy <span class="keyword">import</span> Integral
<span class="prompt">&gt;&gt;&gt; </span><span class="keyword">from</span> sympy.abc <span class="keyword">import</span> x
<span class="prompt">&gt;&gt;&gt; </span><span class="keyword">print</span> x**<span class="number">2</span>
x**<span class="number">2</span>
<span class="prompt">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="number">1</span>/x
<span class="number">1</span>/x
<span class="prompt">&gt;&gt;&gt; </span><span class="keyword">print</span> Integral(x**<span class="number">2</span>, x)
Integral(x**<span class="number">2</span>, x)
</code></pre><p><strong>漂亮的打印</strong></p>
<p><code>pprint</code>函数产生好看的ascii艺术打印：</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">from</span> sympy <span class="keyword">import</span> Integral, pprint
<span class="prompt">&gt;&gt;&gt; </span><span class="keyword">from</span> sympy.abc <span class="keyword">import</span> x
<span class="prompt">&gt;&gt;&gt; </span>pprint(x**<span class="number">2</span>)
 <span class="number">2</span>
x 
<span class="keyword">None</span>
<span class="prompt">&gt;&gt;&gt; </span>pprint(<span class="number">1</span>/x)
<span class="number">1</span>
─
x
<span class="keyword">None</span>
<span class="prompt">&gt;&gt;&gt; </span>pprint(Integral(x**<span class="number">2</span>, x))
⌠      
⎮  <span class="number">2</span>   
⎮ x  dx
⌡      
<span class="keyword">None</span>
</code></pre><p>如果你安装了unicode字体，<code>pprint</code>函数将默认使用它。你可以使用<code>use_unicode</code>函数改变这个选项。：</p>
<pre><code>&gt;&gt;&gt; pprint(Integral(x<span class="keyword">*</span><span class="keyword">*</span>2, x), use_unicode=False)
  /     
 |<span class="string">      
 </span>|<span class="string">  2   
 </span>|<span class="string"> x  dx
 </span>|<span class="string">      
/       
None</span>
</code></pre><p>更多好看的unicode打印另见维基<a href="https://github.com/sympy/sympy/wiki/Pretty-Printing" target="_blank" rel="external">Pretty Printing</a>。</p>
<p>小技巧：在Python解释器中默认使用漂亮的打印，使用：</p>
<pre><code>$ python
Python <span class="number">2.5</span><span class="number">.2</span> (r252:<span class="number">60911</span>, Jun <span class="number">25</span> <span class="number">2008</span>, <span class="number">17</span>:<span class="number">58</span>:<span class="number">32</span>)
[GCC <span class="number">4.3</span><span class="number">.1</span>] on linux2
Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.
&gt;&gt;&gt; from sympy import init_printing, var, Integral
&gt;&gt;&gt; init_printing(use_unicode=False, wrap_line=False, no_global=True)
&gt;&gt;&gt; var(<span class="string">"x"</span>)
x
&gt;&gt;&gt; x**<span class="number">3</span>/<span class="number">3</span>
 <span class="number">3</span>
x
--
<span class="number">3</span>
&gt;&gt;&gt; Integral(x**<span class="number">2</span>, x) <span class="preprocessor">#doctest: +NORMALIZE_WHITESPACE</span>
  /
 |
 |  <span class="number">2</span>
 | x  dx
 |
/
</code></pre><p><strong>Python打印</strong></p>
<pre><code>&gt;&gt;&gt; from sympy<span class="class">.printing</span><span class="class">.python</span> import python
&gt;&gt;&gt; from sympy import Integral
&gt;&gt;&gt; from sympy<span class="class">.abc</span> import x
&gt;&gt;&gt; print <span class="function"><span class="title">python</span><span class="params">(x**<span class="number">2</span>)</span></span>
x = <span class="function"><span class="title">Symbol</span><span class="params">(<span class="string">'x'</span>)</span></span>
e = x**<span class="number">2</span>
&gt;&gt;&gt; print <span class="function"><span class="title">python</span><span class="params">(<span class="number">1</span>/x)</span></span>
x = <span class="function"><span class="title">Symbol</span><span class="params">(<span class="string">'x'</span>)</span></span>
e = <span class="number">1</span>/x
&gt;&gt;&gt; print <span class="function"><span class="title">python</span><span class="params">(Integral(x**<span class="number">2</span>, x)</span></span>)
x = <span class="function"><span class="title">Symbol</span><span class="params">(<span class="string">'x'</span>)</span></span>
e = <span class="function"><span class="title">Integral</span><span class="params">(x**<span class="number">2</span>, x)</span></span>
</code></pre><p><strong>LaTeX打印</strong></p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; from sympy import <span class="constant">Integral</span>, latex
<span class="prompt">&gt;&gt;</span>&gt; from sympy.abc import x
<span class="prompt">&gt;&gt;</span>&gt; latex(x**<span class="number">2</span>)
x^{<span class="number">2</span>}
<span class="prompt">&gt;&gt;</span>&gt; latex(x**<span class="number">2</span>, mode=<span class="string">'inline'</span>)
<span class="variable">$x</span>^{<span class="number">2</span>}<span class="variable">$
</span><span class="prompt">&gt;&gt;</span>&gt; latex(x**<span class="number">2</span>, mode=<span class="string">'equation'</span>)
\<span class="keyword">begin</span>{equation}x^{<span class="number">2</span>}\<span class="keyword">end</span>{equation}
<span class="prompt">&gt;&gt;</span>&gt; latex(x**<span class="number">2</span>, mode=<span class="string">'equation*'</span>)
\<span class="keyword">begin</span>{equation*}x^{<span class="number">2</span>}\<span class="keyword">end</span>{equation*}
<span class="prompt">&gt;&gt;</span>&gt; latex(<span class="number">1</span>/x)
\frac{<span class="number">1</span>}{x}
<span class="prompt">&gt;&gt;</span>&gt; latex(<span class="constant">Integral</span>(x**<span class="number">2</span>, x))
\int x^{<span class="number">2</span>}\,dx
</code></pre><p><strong>MathML</strong></p>
<pre><code>&gt;&gt;&gt; <span class="keyword">from</span> sympy.printing.mathml import mathml
&gt;&gt;&gt; <span class="keyword">from</span> sympy import Integral, latex
&gt;&gt;&gt; <span class="keyword">from</span> sympy.abc import x
&gt;&gt;&gt; print mathml(x**<span class="number">2</span>)
<span class="variable">&lt;apply&gt;</span><span class="variable">&lt;power/&gt;</span><span class="variable">&lt;ci&gt;</span>x<span class="variable">&lt;/ci&gt;</span><span class="variable">&lt;cn&gt;</span><span class="number">2</span><span class="variable">&lt;/cn&gt;</span><span class="variable">&lt;/apply&gt;</span>
&gt;&gt;&gt; print mathml(<span class="number">1</span>/x)
<span class="variable">&lt;apply&gt;</span><span class="variable">&lt;power/&gt;</span><span class="variable">&lt;ci&gt;</span>x<span class="variable">&lt;/ci&gt;</span><span class="variable">&lt;cn&gt;</span>-<span class="number">1</span><span class="variable">&lt;/cn&gt;</span><span class="variable">&lt;/apply&gt;</span>
</code></pre><p><strong>Pylet</strong></p>
<pre><code>&gt;&gt;&gt; from sympy import Integral, preview
&gt;&gt;&gt; from sympy.abc import x
&gt;&gt;&gt; preview(Integral(x**2, x))
This is pdfTeX, <span class="keyword">Version</span> 3.1415926-2.4-1.40.13 (TeX Live 2012/<span class="keyword">Arch</span> Linux)
 restricted \write18 enabled.
entering extended mode
(/tmp/tmpGYREx_.tex
LaTeX2e &lt;2011/06/27&gt;
Babel &lt;v3.8m&gt; and hyphenation patterns <span class="keyword">for</span> english, dumylang, nohyphenation, <span class="keyword">ge</span>
rman-x-2012-05-30, ngerman-x-2012-05-30, afrikaans, ancientgreek, ibycus, arabi
c, armenian, basque, bulgarian, catalan, pinyin, coptic, croatian, czech, danis
<span class="keyword">h</span>, dutch, ukenglish, usenglishmax, esperanto, estonian, ethiopic, farsi, finnis
<span class="keyword">h</span>, french, friulan, galician, german, ngerman, swissgerman, monogreek, greek, <span class="literal">h</span>
ungarian, icelandic, assamese, bengali, gujarati, hindi, kannada, malayalam, <span class="keyword">ma</span>
rathi, oriya, panjabi, tamil, telugu, indonesian, interlingua, irish, italian, 
kurmanji, latin, latvian, lithuanian, mongolian, mongolianlmc, bokmal, nynorsk,
 polish, portuguese, romanian, romansh, russian, sanskrit, serbian, serbianc, <span class="literal">s</span>
lovak, slovenian, spanish, swedish, turkish, turkmen, ukrainian, uppersorbian, 
welsh, loaded.
(/usr/share/texmf-dist/tex/latex/base/article.cls
Document <span class="keyword">Class</span>: article 2007/10/19 v1.4h Standard LaTeX document <span class="keyword">class</span>
(/usr/share/texmf-dist/tex/latex/base/size12.<span class="keyword">clo</span>))
(/usr/share/texmf-dist/tex/latex/amsmath/amsmath.sty
<span class="keyword">For</span> additional information <span class="keyword">on</span> amsmath, <span class="keyword">use</span> the `?' option.
(/usr/share/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/share/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/share/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/share/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/share/texmf-dist/tex/latex/eulervm/eulervm.sty)
<span class="keyword">No</span> <span class="keyword">file</span> tmpGYREx_.aux.
(/usr/share/texmf-dist/tex/latex/eulervm/uzeur.fd)
(/usr/share/texmf-dist/tex/latex/eulervm/uzeus.fd)
(/usr/share/texmf-dist/tex/latex/eulervm/uzeuex.fd) [1] (./tmpGYREx_.aux) )
Output written <span class="keyword">on</span> tmpGYREx_.dvi (1 page, 320 bytes).
Transcript written <span class="keyword">on</span> tmpGYREx_.<span class="keyword">log</span>.
This is dvipng 1.14 <span class="keyword">Copyright</span> 2002-2010 Jan-Ake Larsson
[1] 
</code></pre><p>如果pyglet被安装了，一个包含LaTeX渲染后表达式的pyglet窗口将被打开：</p>
<p><img src="http://fmn.rrimg.com/fmn059/20120903/1210/p_large_ViwY_2fcc000000bf1262.jpg" alt="pyglet"></p>
<h3 id="注意">注意</h3><p>isympy自动调用<code>pprint</code>,这就是为什么默认情况下你看到的是漂亮的打印。</p>
<p>注意有一个可用的打印模块<code>sympy.printing</code>。其它通过这个模块的打印方法是：</p>
<ul>
<li><code>pretty(expr)</code>,<code>pretty_print(expr)</code>,<code>pprint(expr)</code>:分别漂亮的表示<code>expr</code>.这是和之前描述的第二层表示是一样的。</li>
<li><code>latex(expr)</code>, <code>print_latex(expr)</code>：分别返回和打印<code>expr</code>的<a href="http://www.latex-project.org/" target="_blank" rel="external">LaTeX</a>表示。</li>
<li><code>mathml(expr)</code>,<code>print_mathml(expr)</code>：分别返回和打印<code>expr</code>的<a href="http://www.w3.org/Math/" target="_blank" rel="external">MathML</a>表示。</li>
<li><code>print_gtk(expr)</code>：在<a href="http://helm.cs.unibo.it/mml-widget/" target="_blank" rel="external">Gtkmathview</a>打印<code>expr</code>，这是一个呈现MathML代码的GTK部件。<a href="http://helm.cs.unibo.it/mml-widget/" target="_blank" rel="external">Gtkmathview</a>要求安装。</li>
</ul>
<h2 id="更多文档">更多文档</h2><p>现在该学更多有关SymPy的知识了。浏览<a href="http://docs.sympy.org/dev/guide.html#guide" target="_blank" rel="external">SymPy用户指南</a>和<a href="http://docs.sympy.org/dev/modules/index.html#module-docs" target="_blank" rel="external">SymPy模块参考</a>。</p>
<p>一定也浏览我们的公共<a href="http://wiki.sympy.org/" target="_blank" rel="external">wiki.sympy.org</a>，那里包含了很多我们和我们的用户贡献的示例，教程，cookbook，请自由地编辑它。</p>
<h2 id="翻译">翻译</h2><p>这个教程还有其它语言：</p>
<p><a href="http://docs.sympy.org/dev/tutorial.de.html" target="_blank" rel="external">德语</a></p>
<hr>
<h2 id="FootNotes">FootNotes</h2><p>[^2]:Compute the summation of f with respect to the given summation variable over the given limits.</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/python/2012/08/24/scipy/" itemprop="url">
                  SciPy入门指南(译)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-24T00:00:00+08:00" content="2012-08-24">
              2012-08-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="SciPy入门指南">SciPy入门指南</h1><p>这个教程是为了帮助初学者掌握scipy并且肯能快地实际使用。</p>
<ul>
<li>toc<br>{:toc }</li>
</ul>
<p><img src="http://fmn.rrimg.com/fmn056/20120825/1810/p_large_LzVl_40d700008a811261.jpg" alt="optimization"></p>
<h2 id="什么是scipy、numpy、matplotlib？">什么是scipy、numpy、matplotlib？</h2><p><em>Python</em>是一种通用语言。它被解释运行，是动态类型语言，并且非常适合交互工作和快速实现原型，然而又足够强大用来写大型应用。</p>
<p><em>NumPy</em>是一个定义了数值数组和矩阵类型和它们的基本运算的语言扩展。</p>
<p><em>SciPy</em>是另一种使用NumPy来做高等数学、信号处理、优化、统计和许多其它科学任务的语言扩展。</p>
<p><em>Matplotlib</em>是一个帮助绘图的语言扩展。</p>
<h2 id="它们是用来干什么的？">它们是用来干什么的？</h2><p>SciPy和其它这些能用来完成许多任务：</p>
<ul>
<li><p>首先它们很适于用来进行严重依赖数学和数值运算的计算,它们可以原生地使用数组、矩阵和对数组和矩阵的运算，求出特征根，计算积分，解决微分方程。</p>
<p>NumPy的数组类(被用来实现矩阵类的基础)是考虑速度的实现，所以存取NumPy数组比存取Python列表速度更快。此外，NumPy实现一种<em>数组语言</em>，以致于不需要大多数循环。例如，普通Python(C等等也是相似的):</p>
<pre><code><span class="tag">a</span> = <span class="function"><span class="title">range</span><span class="params">(<span class="number">10000000</span>)</span></span>
<span class="tag">b</span> = <span class="function"><span class="title">range</span><span class="params">(<span class="number">10000000</span>)</span></span>
c = []
<span class="keyword">for</span> <span class="tag">i</span> <span class="keyword">in</span> <span class="function"><span class="title">range</span><span class="params">(len(a)</span></span>):
  c.<span class="function"><span class="title">append</span><span class="params">(a[i] + b[i])</span></span>
</code></pre><p>这个循环将在几GHz的处理器上耗时5到10秒，而NumPy：</p>
<pre><code>import numpy as np
<span class="tag">a</span> = np.<span class="function"><span class="title">arange</span><span class="params">(<span class="number">10000000</span>)</span></span>
<span class="tag">b</span> = np.<span class="function"><span class="title">arange</span><span class="params">(<span class="number">10000000</span>)</span></span>
c = <span class="tag">a</span> + b
</code></pre><p>不仅这个更加简洁和易读，而且相比几乎是瞬间的，甚至NumPy的导入都比普通Python中的循环更快。为什么？Python是一种动态类型的解释语言，这意味着在每次循环迭代时它都必须检查运算对象a和b的类型来选则<code>+</code>正确的意义。(在python中<code>+</code>被用到许多地方，比如连接字符串、可以有不同元素类型的列表)当’+’的操作对象之一是一个NumPy数组时，NumPy的<code>add</code>函数将被Python自动选择，仅仅检测一次类型。然后它通过编译C函数执行”真正的”加法循环。这和普通python中的解释循环相比是非常快的。</p>
</li>
<li><p>有许多通用的或特定用途的数值代码使用了numpy和scipy。参考<a href="http://scipy.org/Topical_Software" target="_blank" rel="external">局部软件索引</a>来查看部分列表。Python有许多用来创建交互应用的高级的模块(例如<a href="http://scipy.org/TraitsUI" target="_blank" rel="external">TraitsUI</a>和<a href="http://scipy.org/Cookbook/wxPython_dialogs" target="_blank" rel="external">wxPython</a>)。和scipy一同使用这些是最快的创建科学应用的方法。</p>
</li>
<li><p>使用<a href="http://ipython.scipy.org/" target="_blank" rel="external">ipython</a>使得交互工作更加简单。数据处理，数值模型探索，在运行中尝试运算可以很快地从一个想法得到结果(参考<a href="https://cirl.berkeley.edu/fperez/papers/ipython-cise-final.pdf" target="_blank" rel="external">artical on ipython</a>)。</p>
</li>
<li><a href="http://matplotlib.sourceforge.net/" target="_blank" rel="external">matplotlib</a>模块制造高质量的绘图，通过它你可以把你的数据和模型转化为展示或文章用的图像。不必在一个程序中做数值计算，保存数据，然后用另一个绘图。</li>
</ul>
<h2 id="如何使用scipy工作">如何使用scipy工作</h2><p>Python是一门语言，它有几个用户界面。没有一个单独的程序可以开始并且给一个集成的用户体验。取而代之的是各种使用python的方法。<a href="是这样？还是我理解错了？">^1</a></p>
<p>最普遍的方法是使用高级python交互shell来输入命令和运行脚本。脚本可以用任何编辑器来写，例如<a href="http://stani.be/python/spe/" target="_blank" rel="external">SPE</a>,PyScripter,甚至notepad，emacs或者vi/vim。</p>
<p>scipy和numpy默认都没有提供绘图函数。它们仅仅是数值工具。推荐的绘图工具包是<a href="http://matplotlib.sourceforge.net/" target="_blank" rel="external">matplotlib</a>。</p>
<p>在Windows、Mac OS X和Linux下，所有这些工具都被<a href="http://www.enthought.com/products/epd.php" target="_blank" rel="external">Enthought Python发行版</a>提供，获取更多关于安装这些的指导参考此站点<a href="http://www.scipy.org/Installing_SciPy" target="_blank" rel="external">安装scipy</a>部分。</p>
<h2 id="学习使用scipy">学习使用scipy</h2><p>最快的使用scipy工作的方法可能就是这个<a href="http://www.scipy.org/Additional_Documentation/Astronomy_Tutorial" target="_blank" rel="external">交互数据分析教程</a></p>
<p>去学习Python语言，python教程可以让你迅速熟悉python语法和对象。你可以从<a href="http://docs.python.org/download.html" target="_blank" rel="external">http://docs.python.org/download.html</a>下载这个教程。</p>
<p>Dave Kuhlman的numpy和scipy教程是另一个很好的介绍：<a href="http://www.rexx.com/~dkuhlman/scipy\_course\_01.html" target="_blank" rel="external">http://www.rexx.com/~dkuhlman/scipy_course_01.html</a>.</p>
<p>本站点上的<a href="http://docs.scipy.org/" target="_blank" rel="external">文档</a>和<a href="http://www.scipy.org/Cookbook" target="_blank" rel="external">Cookbook</a>部分提供更多学习材料。</p>
<h2 id="示例会话">示例会话</h2><h3 id="交互工作">交互工作</h3><p>让我们看看在矩形窗函数的傅利叶变换。我们将使用一个交互python shell——ipython来做这个。因为我们想要通过交互绘图呈现结果，我们将启动使用<code>--pylab</code>参数启动ipython，这个参数允许使用<a href="http://matplotlib.sourceforge.net/" target="_blank" rel="external">matplotlib</a>交互。</p>
<pre><code>$ ipython <span class="comment">--pylab</span>
Python <span class="number">2.5</span>.<span class="number">1</span> (r251:<span class="number">54863</span>, May  <span class="number">2</span> <span class="number">2007</span>, <span class="number">16</span>:<span class="number">27</span>:<span class="number">44</span>)
<span class="keyword">Type</span> <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.
IPython <span class="number">0.7</span>.<span class="number">3</span> <span class="comment">-- An enhanced Interactive Python.</span>
?       -&gt; Introduction <span class="keyword">to</span> IPython<span class="attribute">'s</span> features.
%magic  -&gt; Information about IPython<span class="attribute">'s</span> <span class="attribute">'magic</span>' % functions.
help    -&gt; Python<span class="attribute">'s</span> own help system.
object? -&gt; Details about <span class="attribute">'object</span>'. ?object also works, ?? prints more.
  Welcome <span class="keyword">to</span> pylab, a matplotlib-based Python environment.
  <span class="keyword">For</span> more information, <span class="keyword">type</span> <span class="attribute">'help</span>(pylab)'.
</code></pre><p>ipython提供了许多方便的特性，想tab补全python函数和一个优秀的帮助系统。</p>
<pre><code>In [<span class="number">1</span>]: %logstart
Activating auto-logging. Current session state plus future input saved.
<span class="string">Filename       :</span> ipython_log.py
<span class="string">Mode           :</span> rotate
Output <span class="string">logging :</span> False
Raw input <span class="string">log  :</span> False
<span class="string">Timestamping   :</span> False
<span class="string">State          :</span> active
</code></pre><p>这个激活一个登录会话到一个文件。登录文件格式允许在以后就像一个python脚本一样被简单的执行，或编辑进一个程序。ipython也记录所有的输入输出(并把它们保存在叫In和Out的列表中)，因此你可以启动有追溯的登录。</p>
<pre><code>In [<span class="number">2</span>]: <span class="keyword">from</span> scipy <span class="keyword">import</span> *
</code></pre><p>因为numpy和scipy不是构建在python中的，你必须显示地告诉python加载它们的特性。Scipy提供numpy所以当导入scipy时导入它是不必要的。</p>
<p>现在开始实际的数学：</p>
<pre><code>In [<span class="number">3</span>]: <span class="tag">a</span> = <span class="function"><span class="title">zeros</span><span class="params">(<span class="number">1000</span>)</span></span>
In [<span class="number">4</span>]: <span class="tag">a</span>[:<span class="number">100</span>]=<span class="number">1</span>
</code></pre><p>第一行正如你所期望的那样简单地创建了一个有1000个0的数组;numpy默认使这些0是双精度浮点数，但是如果我想要单精度或复数，我可以指定<code>zeors</code>的额外参数。第二行把一百个元素设置成-1.</p>
<p>然后我想要对这个数组进行傅利叶变换，scipy提供<code>fft</code>函数来完成这些：</p>
<pre><code><span class="tag">b</span> = <span class="function"><span class="title">fft</span><span class="params">(a)</span></span>
</code></pre><p>为了看看b是什么样的，我将使用matplotlib库。如果你使用”–pylab”启动ipython将不需要导入matplotlib。否则你应导入它:<code>from pylab import *</code>但是你将没有交互功能(当你创建时自动绘图)。</p>
<pre><code>In [<span class="number">6</span>]: plot(abs(b))
Out[<span class="number">6</span>]: <span class="annotation">[&lt;matplotlib.lines.Line2D instance at 0xb7b9144c&gt;]</span>
In [<span class="number">7</span>]: show()
</code></pre><p><img src="http://fmn.rrimg.com/fmn056/20120825/1810/p_large_34di_40d700008a7f1261.jpg" alt="fft"></p>
<p>这将出现一个显示b的图像的窗口，如果你启动ipython时使用<code>--pylab</code>的话<code>show</code>命令是不必要的。</p>
<p>我注意到如果我把b的0频移动到中间看起来更好。我可以通过连接b的后半部分和前半部分来实现，但是我记不清concatenate的语法了:</p>
<pre><code><span class="keyword">In</span> [<span class="number">8</span>]: concatenate?
<span class="keyword">Type</span>:           builtin_function_or_method
Base <span class="keyword">Class</span>:     &lt;<span class="keyword">type</span> <span class="string">'builtin_function_or_method'</span>&gt;
String Form:    &lt;built-<span class="keyword">in</span> <span class="function"><span class="keyword">function</span> <span class="title">concatenate</span>&gt;
<span class="title">Namespace</span>:</span>      Interactive
Docstring:
    concatenate((a1, a2, ...), axis=<span class="number">0</span>)
    <span class="keyword">Join</span> arrays together.
    The <span class="keyword">tuple</span> <span class="keyword">of</span> sequences (a1, a2, ...) are joined along the given axis
    (<span class="keyword">default</span> <span class="keyword">is</span> the first one) <span class="keyword">into</span> a single numpy <span class="keyword">array</span>.
    Example:
    &gt;&gt;&gt; concatenate( ([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>], [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]) )
    <span class="keyword">array</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])
<span class="keyword">In</span> [<span class="number">9</span>]: f=arange(-<span class="number">500</span>,<span class="number">500</span>,<span class="number">1</span>)
<span class="keyword">In</span> [<span class="number">10</span>]: grid(<span class="keyword">True</span>)
<span class="keyword">In</span> [<span class="number">11</span>]: plot(f,abs(concatenate((b[<span class="number">500</span>:],b[:<span class="number">500</span>]))))
<span class="keyword">Out</span>[<span class="number">11</span>]: [&lt;matplotlib.lines.Line2D instance at <span class="number">0</span>xb360ca4c&gt;]
<span class="keyword">In</span> [<span class="number">12</span>]: show()
</code></pre><p><img src="http://fmn.rrimg.com/fmn062/20120825/1810/p_large_fk20_40d700008a801261.jpg" alt="scipy-2"></p>
<p>这得到了我想要的图像。我可以使用交互控制上下移动和缩放图片，并且为包含在出版物中产生postscript输出(如果你想要学习更多绘图知识，建议你阅读<a href="http://matplotlib.sourceforge.net/tutorial.html" target="_blank" rel="external">matplotlib教程</a>)。</p>
<h3 id="运行脚本">运行脚本</h3><p>当你一遍又一遍重复做着相同的工作，把一些命令保存在文件中并把它们作为脚本在ipython中运行将很有用。你可以使用”Ctrl-D”退出当前的ipython会话并且编辑<code>ipython_log.py</code>文件。当你想要执行这个文件中的指令时，你可以打开一个新的ipython会话输入命令<code>%run -i ipython_log.py</code>。</p>
<p>当编辑一个脚本文件时，在ipython中尝试一些命令也很方便。这将允许你在保存和运行之前，对一些简单的情况逐行尝试你的脚本。</p>
<h3 id="一些关于导入(import)的笔记">一些关于导入(import)的笔记</h3><p>如果你仅仅初学scipy和与其伴侣，以下的东西对你并不那么重要，不要太操心。但是当你开发一些大型的应用时最好记住它。</p>
<p>对交互工作(在ipython中)和一些小型的脚本使用<code>from scipy import *</code>没什么。这样将会有个优点就是所有的功能在当前命名空间都是立即可用的。然而，对大型的程序和软件包来说，建议只导入你真正需要的函数和模块。让我们考虑这种情况：你(为了无论什么理由)想要比较numpy和scipy的<code>fft</code>函数。在你的脚本中你应这样写：</p>
<pre><code># import from module numpy.fft
from numpy.fft import fft
# import scipy's fft implementation and <span class="operator"><span class="keyword">rename</span> it;</span>
# Note: `from scipy import fft` actually imports numpy.fft.fft (<span class="operator"><span class="keyword">check</span> <span class="keyword">with</span>
# <span class="string">`scipy.fft?`</span> <span class="keyword">in</span> Ipython <span class="keyword">or</span> look <span class="keyword">at</span> .../site-packages/scipy/__init__.py)
<span class="keyword">from</span> scipy.fftpack <span class="keyword">import</span> fft <span class="keyword">as</span> scipy_fft</span>
</code></pre><p>这个优势就是，当你查看代码时，你可以显式的知道你在导入什么，代码便因此变得清晰和可读。而且，这通常比通过<code>import *</code>导入所有东西更快，特别是如果你是从一个像scipy一样特别大的库中导入。</p>
<p>然而，如果你使用许多不同的numpy函数，如果你显式导入每一个函数导入声明将变得非常长。但是你可以导入整个包来代替使用<code>import *</code>。</p>
<pre><code><span class="built_in">from</span> numpy import *  <span class="comment"># bad</span>
<span class="built_in">from</span> numpy import <span class="built_in">abs</span>, concatenate, <span class="built_in">sin</span>, <span class="constant">pi</span>, dot, amin, amax, asarray, cov, diag, zeros, <span class="constant">empty</span>, <span class="built_in">exp</span>, eye, kaiser <span class="comment"># very long</span>
import numpy         <span class="comment"># good</span>
<span class="comment"># use numpy.fft.fft() on array 'a'</span>
b = numpy.fft.fft(<span class="operator">a</span>)
</code></pre><p>没关系，因为通常<code>import numpy</code>非常快。另一方面，scipy相当大(有很多子包)。因此<code>from scipy import *</code>第一次导入可能非常慢(所有接下来的导入声明将会更迅速地执行，因为实际上没有再次导入)。这是为什么当你导入scipy时子包的导入默认被禁止(像scipy.fft)，这样它才能像<code>import numpy</code>一样快。如果你想使用比如说scipy.fft，你不得不显式的导入它(这无论如何是个好的想法)。如果你想要一次加载所有子包，你将不得不<code>import scipy; scipy.pkgbuild()</code>。使用ipython的交互会话，你可以通过scipy profile调用它(<code>ipython -p scipy</code>),为你读取scipy的配置文件(通常在~/.ipython/ipythonrc-scipy)和加载所有scipy。对在即时交互环境使用scipy和matplotlib绘图，你可以用像这样的命令<code>ipython --pylab -p scipy</code>。</p>
<p>获得更多有关全面概述包结构和”pythonic”导入惯例的信息，看一看<a href="http://www.python.org/doc/2.5.4/tut/node8.html#SECTION008400000000000000000" target="_blank" rel="external">Python教程的这一部分</a></p>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/python/2012/08/22/numpy/" itemprop="url">
                  试验性NumPy教程(译)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-22T00:00:00+08:00" content="2012-08-22">
              2012-08-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="试验性的Numpy教程">试验性的Numpy教程</h1><p>原文来自<a href="http://scipy.org/Tentative_NumPy_Tutorial" target="_blank" rel="external">Tentative NumPy Tutorial</a></p>
<p><strong>目录</strong></p>
<ul>
<li>toc<br>{: toc }</li>
</ul>
<hr>
<h2 id="先决条件">先决条件</h2><p>在阅读这个教程之前，你多少需要知道点python。如果你想重新回忆下，请看看<a href="http://docs.python.org/tut/" target="_blank" rel="external">Python Tutorial</a>.</p>
<p>如果你想要运行教程中的示例，你至少需要在你的电脑上安装了以下一些软件:</p>
<ul>
<li><a href="http://www.python.org/" target="_blank" rel="external">Python</a></li>
<li><a href="http://numpy.scipy.org/" target="_blank" rel="external">NumPy</a></li>
</ul>
<p>这些是可能对你有帮助的:</p>
<ul>
<li><a href="http://ipython.scipy.org/" target="_blank" rel="external">ipython</a>是一个净强化的交互Python Shell，对探索NumPy的特性非常方便。</li>
<li><a href="http://matplotlib.sourceforge.net/" target="_blank" rel="external">matplotlib</a>将允许你绘图</li>
<li><a href="http://scipy.org/" target="_blank" rel="external">Scipy</a>在NumPy的基础上提供了很多科学模块</li>
</ul>
<h2 id="基础篇">基础篇</h2><p>NumPy的主要对象是同种元素的多维数组。这是一个所有的元素都是一种类型、通过一个正整数元组索引的元素表格(通常是元素是数字)。在NumPy中维度(dimensions)叫做轴(axes)，轴的个数叫做秩(rank)。</p>
<p>例如，在3D空间一个点的坐标<code>[1, 2, 3]</code>是一个秩为1的数组，因为它只有一个轴。那个轴长度为3.又例如，在以下例子中，数组的秩为2(它有两个维度).第一个维度长度为2,第二个维度长度为3.</p>
<pre><code>[[ <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],
 [ <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">2.</span>]]
</code></pre><p>NumPy的数组类被称作<em>ndarray</em>。通常被称作数组。注意numpy.array和标准Python库类array.array并不相同，后者只处理一维数组和提供少量功能。更多重要ndarray对象属性有：</p>
<ul>
<li><p>ndarray.ndim</p>
<p>数组轴的个数，在python的世界中，轴的个数被称作秩</p>
</li>
<li><p>ndarray.shape</p>
<p>数组的维度。这是一个指示数组在每个维度上大小的整数元组。例如一个n排m列的矩阵，它的shape属性将是(2,3),这个元组的长度显然是秩，即维度或者ndim属性</p>
</li>
<li><p>ndarray.size</p>
<p>数组元素的总个数，等于shape属性中元组元素的乘积。</p>
</li>
<li><p>ndarray.dtype</p>
<p>一个用来描述数组中元素类型的对象，可以通过创造或指定dtype使用标准Python类型。另外NumPy提供它自己的数据类型。</p>
</li>
<li><p>ndarray.itemsize</p>
<p>数组中每个元素的字节大小。例如，一个元素类型为float64的数组itemsiz属性值为8(=64/8),又如，一个元素类型为complex32的数组item属性为4(=32/8).</p>
</li>
<li><p>ndarray.data</p>
<p>包含实际数组元素的缓冲区，通常我们不需要使用这个属性，因为我们总是通过索引来使用数组中的元素。</p>
</li>
</ul>
<h3 id="一个例子^1">一个例子<a href="在python的交互环境或ipython中">^1</a></h3><pre><code><span class="prompt">&gt;&gt;</span>&gt; from numpy  import *
&gt;&gt;&gt; a = arange(<span class="number">15</span>).reshape(<span class="number">3</span>, <span class="number">5</span>)
<span class="prompt">&gt;&gt;</span>&gt; a
array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],
       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],
       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>]])
<span class="prompt">&gt;&gt;</span>&gt; a.shape
(<span class="number">3</span>, <span class="number">5</span>)
<span class="prompt">&gt;&gt;</span>&gt; a.ndim
<span class="number">2</span>
<span class="prompt">&gt;&gt;</span>&gt; a.dtype.name
<span class="string">'int32'</span>
<span class="prompt">&gt;&gt;</span>&gt; a.itemsize
<span class="number">4</span>
<span class="prompt">&gt;&gt;</span>&gt; a.size
<span class="number">15</span>
<span class="prompt">&gt;&gt;</span>&gt; type(a)
numpy.ndarray
<span class="prompt">&gt;&gt;</span>&gt; b = array([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])
<span class="prompt">&gt;&gt;</span>&gt; b
array([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])
<span class="prompt">&gt;&gt;</span>&gt; type(b)
numpy.ndarray
</code></pre><h3 id="创建数组">创建数组</h3><p>有好几种创建数组的方法。</p>
<p>例如，你可以使用<code>array</code>函数从常规的Python列表和元组创造数组。所创建的数组类型由原序列中的元素类型推导而来。</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; from numpy  import *
&gt;&gt;&gt; a = array( [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>] )
<span class="prompt">&gt;&gt;</span>&gt; a
array([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])
<span class="prompt">&gt;&gt;</span>&gt; a.dtype
dtype(<span class="string">'int32'</span>)
<span class="prompt">&gt;&gt;</span>&gt; b = array([<span class="number">1.2</span>, <span class="number">3.5</span>, <span class="number">5.1</span>])
<span class="prompt">&gt;&gt;</span>&gt; b.dtype
dtype(<span class="string">'float64'</span>) 
</code></pre><p>一个常见的错误包括用多个数值参数调用<code>array</code>而不是提供一个由数值组成的列表作为一个参数。</p>
<pre><code>&gt;&gt;&gt; a = <span class="built_in">array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)    <span class="preprocessor"># WRONG</span>

&gt;&gt;&gt; a = <span class="built_in">array</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])  <span class="preprocessor"># RIGHT</span>
</code></pre><p>数组将序列包含序列转化成二维的数组，序列包含序列包含序列转化成三维数组等等。</p>
<pre><code>&gt;&gt;&gt; b = <span class="built_in">array</span>( [ (<span class="number">1.5</span>,<span class="number">2</span>,<span class="number">3</span>), (<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>) ] )
&gt;&gt;&gt; <span class="function">b
<span class="title">array</span><span class="params">([[ <span class="number">1.5</span>,  <span class="number">2.</span> ,  <span class="number">3.</span> ],
       [ <span class="number">4.</span> ,  <span class="number">5.</span> ,  <span class="number">6.</span> ]])</span></span>
</code></pre><p>数组类型可以在创建时显示指定</p>
<pre><code>&gt;&gt;&gt; c = <span class="built_in">array</span>( [ [<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>,<span class="number">4</span>] ], dtype=<span class="keyword">complex</span> )
&gt;&gt;&gt; <span class="function">c
<span class="title">array</span><span class="params">([[ <span class="number">1.</span>+<span class="number">0.</span>j,  <span class="number">2.</span>+<span class="number">0.</span>j],
       [ <span class="number">3.</span>+<span class="number">0.</span>j,  <span class="number">4.</span>+<span class="number">0.</span>j]])</span></span>
</code></pre><p>通常，数组的元素开始都是未知的，但是它的大小已知。因此，NumPy提供了一些使用占位符创建数组的函数。这最小化了扩展数组的需要和高昂的运算代价。</p>
<p>函数<code>function</code>创建一个全是0的数组，函数<code>ones</code>创建一个全1的数组，函数<code>empty</code>创建一个内容随机并且依赖与内存状态的数组。默认创建的数组类型(dtype)都是float64。</p>
<pre><code>&gt;&gt;&gt; zeros( (<span class="number">3</span>,<span class="number">4</span>) )
<span class="built_in">array</span>([[<span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],
       [<span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],
       [<span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>]])
&gt;&gt;&gt; ones( (<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>), dtype=int16 )                <span class="preprocessor"># dtype can also be specified</span>
<span class="built_in">array</span>([[[ <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],
        [ <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],
        [ <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]],
       [[ <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],
        [ <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],
        [ <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]]], dtype=int16)
&gt;&gt;&gt; empty( (<span class="number">2</span>,<span class="number">3</span>) )
<span class="built_in">array</span>([[  <span class="number">3.73603959e-262</span>,   <span class="number">6.02658058e-154</span>,   <span class="number">6.55490914e-260</span>],
       [  <span class="number">5.30498948e-313</span>,   <span class="number">3.14673309e-307</span>,   <span class="number">1.00000000e+000</span>]])
</code></pre><p>为了创建一个数列，NumPy提供一个类似arange的函数返回数组而不是列表:</p>
<pre><code>&gt;&gt;&gt; arange( <span class="number">10</span>, <span class="number">30</span>, <span class="number">5</span> )
<span class="built_in">array</span>([<span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>])
&gt;&gt;&gt; arange( <span class="number">0</span>, <span class="number">2</span>, <span class="number">0.3</span> )                 <span class="preprocessor"># it accepts float arguments</span>
<span class="built_in">array</span>([ <span class="number">0.</span> ,  <span class="number">0.3</span>,  <span class="number">0.6</span>,  <span class="number">0.9</span>,  <span class="number">1.2</span>,  <span class="number">1.5</span>,  <span class="number">1.8</span>])
</code></pre><p>当<code>arange</code>使用浮点数参数时，由于有限的浮点数精度，通常无法预测获得的元素个数。因此，最好使用函数<code>linspace</code>去接收我们想要的元素个数来代替用range来指定步长。</p>
<p>其它函数array, zeros, zeros_like, ones, ones_like, empty, empty_like, arange, linspace, rand, randn, fromfunction, fromfile参考：<a href="http://scipy.org/Numpy_Example_List" target="_blank" rel="external">NumPy示例</a></p>
<h3 id="打印数组">打印数组</h3><p>当你打印一个数组，NumPy以类似嵌套列表的形式显示它，但是呈以下布局：</p>
<ul>
<li>最后的轴从左到右打印</li>
<li>次后的轴从顶向下打印</li>
<li>剩下的轴从顶向下打印，每个切片通过一个空行与下一个隔开</li>
</ul>
<p>一维数组被打印成行，二维数组成矩阵，三维数组成矩阵列表。</p>
<pre><code>&gt;&gt;&gt; a = arange(<span class="number">6</span>)                         <span class="preprocessor"># <span class="number">1</span>d array</span>
&gt;&gt;&gt; print a
[<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]
&gt;&gt;&gt;
&gt;&gt;&gt; b = arange(<span class="number">12</span>).reshape(<span class="number">4</span>,<span class="number">3</span>)           <span class="preprocessor"># <span class="number">2</span>d array</span>
&gt;&gt;&gt; print b
[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>]
 [ <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>]
 [ <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>]
 [ <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]
&gt;&gt;&gt;
&gt;&gt;&gt; c = arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)         <span class="preprocessor"># <span class="number">3</span>d array</span>
&gt;&gt;&gt; print c
[[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]
  [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]
  [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]

 [[<span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span>]
  [<span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span>]
  [<span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span>]]]
</code></pre><p>查看形状操作一节获得有关reshape的更多细节</p>
<p>如果一个数组用来打印太大了，NumPy自动省略中间部分而只打印角落</p>
<pre><code>&gt;&gt;&gt; print <span class="function">arange</span>(10000)
<span class="attr_selector">[   0    1    2 ..., 9997 9998 9999]</span>
&gt;&gt;&gt;
&gt;&gt;&gt; print <span class="function">arange</span>(10000)<span class="class">.reshape</span>(100,100)
<span class="attr_selector">[[   0    1    2 ...,   97   98   99]</span>
 <span class="attr_selector">[ 100  101  102 ...,  197  198  199]</span>
 <span class="attr_selector">[ 200  201  202 ...,  297  298  299]</span>
 ...,
 <span class="attr_selector">[9700 9701 9702 ..., 9797 9798 9799]</span>
 <span class="attr_selector">[9800 9801 9802 ..., 9897 9898 9899]</span>
 <span class="attr_selector">[9900 9901 9902 ..., 9997 9998 9999]</span>]
</code></pre><p>禁用NumPy的这种行为并强制打印整个数组，你可以设置printoptions参数来更改打印选项。</p>
<pre><code>&gt;&gt;&gt; <span class="function"><span class="title">set_printoptions</span><span class="params">(threshold=<span class="string">'nan'</span>)</span></span>
</code></pre><h3 id="基本运算">基本运算</h3><p>数组的算术运算是按元素的。新的数组被创建并且被结果填充。</p>
<pre><code>&gt;&gt;&gt; <span class="tag">a</span> = <span class="function"><span class="title">array</span><span class="params">( [<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>] )</span></span>
&gt;&gt;&gt; <span class="tag">b</span> = <span class="function"><span class="title">arange</span><span class="params">( <span class="number">4</span> )</span></span>
&gt;&gt;&gt; <span class="tag">b</span>
<span class="function"><span class="title">array</span><span class="params">([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span></span>
&gt;&gt;&gt; c = a-<span class="tag">b</span>
&gt;&gt;&gt; c
<span class="function"><span class="title">array</span><span class="params">([<span class="number">20</span>, <span class="number">29</span>, <span class="number">38</span>, <span class="number">47</span>])</span></span>
&gt;&gt;&gt; b**<span class="number">2</span>
<span class="function"><span class="title">array</span><span class="params">([<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>])</span></span>
&gt;&gt;&gt; <span class="number">10</span>*<span class="function"><span class="title">sin</span><span class="params">(a)</span></span>
<span class="function"><span class="title">array</span><span class="params">([ <span class="number">9.12945251</span>, -<span class="number">9.88031624</span>,  <span class="number">7.4511316</span> , -<span class="number">2.62374854</span>])</span></span>
&gt;&gt;&gt; a&lt;<span class="number">35</span>
<span class="function"><span class="title">array</span><span class="params">([True, True, False, False], dtype=bool)</span></span>
</code></pre><p>不像许多矩阵语言，NumPy中的乘法运算符<code>*</code>指示按元素计算，矩阵乘法可以使用<code>dot</code>函数或创建矩阵对象实现(参见教程中的矩阵章节)</p>
<pre><code>&gt;&gt;&gt; A = <span class="built_in">array</span>( [[<span class="number">1</span>,<span class="number">1</span>],
...             [<span class="number">0</span>,<span class="number">1</span>]] )
&gt;&gt;&gt; B = <span class="built_in">array</span>( [[<span class="number">2</span>,<span class="number">0</span>],
...             [<span class="number">3</span>,<span class="number">4</span>]] )
&gt;&gt;&gt; A*B                         <span class="preprocessor"># elementwise product</span>
<span class="built_in">array</span>([[<span class="number">2</span>, <span class="number">0</span>],
       [<span class="number">0</span>, <span class="number">4</span>]])
&gt;&gt;&gt; dot(A,B)                    <span class="preprocessor"># matrix product</span>
<span class="built_in">array</span>([[<span class="number">5</span>, <span class="number">4</span>],
       [<span class="number">3</span>, <span class="number">4</span>]])
</code></pre><p>有些操作符像<code>+=</code>和<code>*=</code>被用来更改已存在数组而不创建一个新的数组。</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; a = ones((<span class="number">2</span>,<span class="number">3</span>), dtype=int)
<span class="prompt">&gt;&gt;</span>&gt; b = random.random((<span class="number">2</span>,<span class="number">3</span>))
<span class="prompt">&gt;&gt;</span>&gt; a *= <span class="number">3</span>
<span class="prompt">&gt;&gt;</span>&gt; a
array([[<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>],
       [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]])
<span class="prompt">&gt;&gt;</span>&gt; b += a
<span class="prompt">&gt;&gt;</span>&gt; b
array([[ <span class="number">3.69092703</span>,  <span class="number">3.8324276</span> ,  <span class="number">3.0114541</span> ],
       [ <span class="number">3.18679111</span>,  <span class="number">3.3039349</span> ,  <span class="number">3.37600289</span>]])
<span class="prompt">&gt;&gt;</span>&gt; a += b                                  <span class="comment"># b is converted to integer type</span>
<span class="prompt">&gt;&gt;</span>&gt; a
array([[<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>],
       [<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>]])
</code></pre><p>当运算的是不同类型的数组时，结果数组和更普遍和精确的已知(这种行为叫做upcast)。</p>
<pre><code>&gt;&gt;&gt; <span class="tag">a</span> = <span class="function"><span class="title">ones</span><span class="params">(<span class="number">3</span>, dtype=int32)</span></span>
&gt;&gt;&gt; <span class="tag">b</span> = <span class="function"><span class="title">linspace</span><span class="params">(<span class="number">0</span>,pi,<span class="number">3</span>)</span></span>
&gt;&gt;&gt; <span class="tag">b</span><span class="class">.dtype</span><span class="class">.name</span>
<span class="string">'float64'</span>
&gt;&gt;&gt; c = a+<span class="tag">b</span>
&gt;&gt;&gt; c
<span class="function"><span class="title">array</span><span class="params">([ <span class="number">1</span>.        ,  <span class="number">2.57079633</span>,  <span class="number">4.14159265</span>])</span></span>
&gt;&gt;&gt; c<span class="class">.dtype</span><span class="class">.name</span>
<span class="string">'float64'</span>
&gt;&gt;&gt; d = <span class="function"><span class="title">exp</span><span class="params">(c*<span class="number">1</span>j)</span></span>
&gt;&gt;&gt; d
array([ <span class="number">0.54030231</span>+<span class="number">0.84147098</span>j, -<span class="number">0.84147098</span>+<span class="number">0.54030231</span>j,
       -<span class="number">0.54030231</span>-<span class="number">0.84147098</span>j])
&gt;&gt;&gt; d<span class="class">.dtype</span><span class="class">.name</span>
<span class="string">'complex128'</span>
</code></pre><p>许多非数组运算，如计算数组所有元素之和，被作为ndarray类的方法实现</p>
<pre><code>&gt;&gt;&gt; <span class="tag">a</span> = random.<span class="function"><span class="title">random</span><span class="params">((<span class="number">2</span>,<span class="number">3</span>)</span></span>)
&gt;&gt;&gt; <span class="tag">a</span>
array([[ <span class="number">0.6903007</span> ,  <span class="number">0.39168346</span>,  <span class="number">0.16524769</span>],
       [ <span class="number">0.48819875</span>,  <span class="number">0.77188505</span>,  <span class="number">0.94792155</span>]])
&gt;&gt;&gt; <span class="tag">a</span>.<span class="function"><span class="title">sum</span><span class="params">()</span></span>
<span class="number">3.4552372100521485</span>
&gt;&gt;&gt; <span class="tag">a</span>.<span class="function"><span class="title">min</span><span class="params">()</span></span>
<span class="number">0.16524768654743593</span>
&gt;&gt;&gt; <span class="tag">a</span>.<span class="function"><span class="title">max</span><span class="params">()</span></span>
<span class="number">0.9479215542670073</span>
</code></pre><p>这些运算默认应用到数组好像它就是一个数字组成的列表，无关数组的形状。然而，指定<code>axis</code>参数你可以吧运算应用到数组指定的轴上：</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; b = arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)
<span class="prompt">&gt;&gt;</span>&gt; b
array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],
       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],
       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; b.sum(axis=<span class="number">0</span>)                            <span class="comment"># sum of each column</span>
array([<span class="number">12</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">21</span>])
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; b.min(axis=<span class="number">1</span>)                            <span class="comment"># min of each row</span>
array([<span class="number">0</span>, <span class="number">4</span>, <span class="number">8</span>])
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; b.cumsum(axis=<span class="number">1</span>)                         <span class="comment"># cumulative sum along each row</span>
array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">3</span>,  <span class="number">6</span>],
       [ <span class="number">4</span>,  <span class="number">9</span>, <span class="number">15</span>, <span class="number">22</span>],
       [ <span class="number">8</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">38</span>]])
</code></pre><h3 id="通用函数(ufunc)">通用函数(ufunc)</h3><p>NumPy提供常见的数学函数如<code>sin</code>,<code>cos</code>和<code>exp</code>。在NumPy中，这些叫作“通用函数”(ufunc)。在NumPy里这些函数作用按数组的元素运算，产生一个数组作为输出。</p>
<pre><code>&gt;&gt;&gt; B = <span class="function"><span class="title">arange</span><span class="params">(<span class="number">3</span>)</span></span>
&gt;&gt;&gt; B
<span class="function"><span class="title">array</span><span class="params">([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>])</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">exp</span><span class="params">(B)</span></span>
<span class="function"><span class="title">array</span><span class="params">([ <span class="number">1</span>.        ,  <span class="number">2.71828183</span>,  <span class="number">7.3890561</span> ])</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">sqrt</span><span class="params">(B)</span></span>
<span class="function"><span class="title">array</span><span class="params">([ <span class="number">0</span>.        ,  <span class="number">1</span>.        ,  <span class="number">1.41421356</span>])</span></span>
&gt;&gt;&gt; C = <span class="function"><span class="title">array</span><span class="params">([<span class="number">2</span>., -<span class="number">1</span>., <span class="number">4</span>.])</span></span>
&gt;&gt;&gt; <span class="function"><span class="title">add</span><span class="params">(B, C)</span></span>
<span class="function"><span class="title">array</span><span class="params">([ <span class="number">2</span>.,  <span class="number">0</span>.,  <span class="number">6</span>.])</span></span>
</code></pre><p>更多函数all, alltrue, any, apply along axis, argmax, argmin, argsort, average, bincount, ceil, clip, conj, conjugate, corrcoef, cov, cross, cumprod, cumsum, diff, dot, floor, inner, inv, lexsort, max, maximum, mean, median, min, minimum, nonzero, outer, prod, re, round, sometrue, sort, std, sum, trace, transpose, var, vdot, vectorize, where 参见:<a href="http://scipy.org/Numpy_Example_List" target="_blank" rel="external">NumPy示例</a></p>
<h3 id="索引，切片和迭代">索引，切片和迭代</h3><p><em>一维</em>数组可以被索引、切片和迭代，就像<a href="http://docs.python.org/tutorial/introduction.html#SECTION005140000000000000000" target="_blank" rel="external">列表</a>和其它Python序列。</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; a = arange(<span class="number">10</span>)**<span class="number">3</span>
<span class="prompt">&gt;&gt;</span>&gt; a
array([  <span class="number">0</span>,   <span class="number">1</span>,   <span class="number">8</span>,  <span class="number">27</span>,  <span class="number">64</span>, <span class="number">125</span>, <span class="number">216</span>, <span class="number">343</span>, <span class="number">512</span>, <span class="number">729</span>])
<span class="prompt">&gt;&gt;</span>&gt; a[<span class="number">2</span>]
<span class="number">8</span>
<span class="prompt">&gt;&gt;</span>&gt; a[<span class="number">2</span><span class="symbol">:</span><span class="number">5</span>]
array([ <span class="number">8</span>, <span class="number">27</span>, <span class="number">64</span>])
<span class="prompt">&gt;&gt;</span>&gt; a[<span class="symbol">:</span><span class="number">6</span><span class="symbol">:</span><span class="number">2</span>] = -<span class="number">1000</span>    <span class="comment"># equivalent to a[0:6:2] = -1000; from start to position 6, exclusive, set every 2nd element to -1000</span>
<span class="prompt">&gt;&gt;</span>&gt; a
array([-<span class="number">1000</span>,     <span class="number">1</span>, -<span class="number">1000</span>,    <span class="number">27</span>, -<span class="number">1000</span>,   <span class="number">125</span>,   <span class="number">216</span>,   <span class="number">343</span>,   <span class="number">512</span>,   <span class="number">729</span>])
<span class="prompt">&gt;&gt;</span>&gt; a[ <span class="symbol">:</span> <span class="symbol">:-</span><span class="number">1</span>]                                 <span class="comment"># reversed a</span>
array([  <span class="number">729</span>,   <span class="number">512</span>,   <span class="number">343</span>,   <span class="number">216</span>,   <span class="number">125</span>, -<span class="number">1000</span>,    <span class="number">27</span>, -<span class="number">1000</span>,     <span class="number">1</span>, -<span class="number">1000</span>])
<span class="prompt">&gt;&gt;</span>&gt; for i in <span class="symbol">a:</span>
...         print i**(<span class="number">1</span>/<span class="number">3</span>.),
...
nan <span class="number">1.0</span> nan <span class="number">3.0</span> nan <span class="number">5.0</span> <span class="number">6.0</span> <span class="number">7.0</span> <span class="number">8.0</span> <span class="number">9.0</span>
</code></pre><p><em>多维</em>数组可以每个轴有一个索引。这些索引由一个逗号分割的元组给出。</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x,y)</span>:</span>
<span class="prompt">... </span>        <span class="keyword">return</span> <span class="number">10</span>*x+y
...
<span class="prompt">&gt;&gt;&gt; </span>b = fromfunction(f,(<span class="number">5</span>,<span class="number">4</span>),dtype=int)
<span class="prompt">&gt;&gt;&gt; </span>b
array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],
       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],
       [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],
       [<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>],
       [<span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>]])
<span class="prompt">&gt;&gt;&gt; </span>b[<span class="number">2</span>,<span class="number">3</span>]
<span class="number">23</span>
<span class="prompt">&gt;&gt;&gt; </span>b[<span class="number">0</span>:<span class="number">5</span>, <span class="number">1</span>]                       <span class="comment"># each row in the second column of b</span>
array([ <span class="number">1</span>, <span class="number">11</span>, <span class="number">21</span>, <span class="number">31</span>, <span class="number">41</span>])
<span class="prompt">&gt;&gt;&gt; </span>b[ : ,<span class="number">1</span>]                        <span class="comment"># equivalent to the previous example</span>
array([ <span class="number">1</span>, <span class="number">11</span>, <span class="number">21</span>, <span class="number">31</span>, <span class="number">41</span>])
<span class="prompt">&gt;&gt;&gt; </span>b[<span class="number">1</span>:<span class="number">3</span>, : ]                      <span class="comment"># each column in the second and third row of b</span>
array([[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],
       [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]])
</code></pre><p>当少于轴数的索引被提供时，确失的索引被认为是整个切片：</p>
<pre><code>&gt;&gt;&gt; b[-<span class="number">1</span>]                                  <span class="preprocessor"># the last row. Equivalent to b[-<span class="number">1</span>,:]</span>
<span class="built_in">array</span>([<span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>])
</code></pre><p><code>b[i]</code>中括号中的表达式被当作<code>i</code>和一系列<code>:</code>，来代表剩下的轴。NumPy也允许你使用“点”像<code>b[i,...]</code>。</p>
<p><em>点</em>(…)代表许多产生一个完整的索引元组必要的分号。如果x是秩为5的数组(即它有5个轴)，那么:</p>
<ul>
<li>x[1,2,…] 等同于 x[1,2,:,:,:],</li>
<li>x[…,3] 等同于 x[:,:,:,:,3]</li>
<li>x[4,…,5,:] 等同 x[4,:,:,5,:]. </li>
</ul>
<pre><code>&lt;!--￼<span class="number">0</span>--&gt;
&gt;&gt;&gt; c = <span class="built_in">array</span>( [ [[  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],      <span class="preprocessor"># a <span class="number">3</span>D array (two stacked <span class="number">2</span>D arrays)</span>
...               [ <span class="number">10</span>, <span class="number">12</span>, <span class="number">13</span>]],
...
...              [[<span class="number">100</span>,<span class="number">101</span>,<span class="number">102</span>],
...               [<span class="number">110</span>,<span class="number">112</span>,<span class="number">113</span>]] ] )
&gt;&gt;&gt; c.shape
(<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>)
&gt;&gt;&gt; c[<span class="number">1</span>,...]                          <span class="preprocessor"># same as c[<span class="number">1</span>,:,:] or c[<span class="number">1</span>]</span>
<span class="built_in">array</span>([[<span class="number">100</span>, <span class="number">101</span>, <span class="number">102</span>],
       [<span class="number">110</span>, <span class="number">112</span>, <span class="number">113</span>]])
&gt;&gt;&gt; c[...,<span class="number">2</span>]                          <span class="preprocessor"># same as c[:,:,<span class="number">2</span>]</span>
<span class="built_in">array</span>([[  <span class="number">2</span>,  <span class="number">13</span>],
       [<span class="number">102</span>, <span class="number">113</span>]])
```
</code></pre><p><em>迭代</em>多维数组是就第一个轴而言的:<a href="0轴">^2</a></p>
<pre><code>&gt;&gt;&gt; <span class="keyword">for</span> row in b:
...         print row
...
[<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]
[<span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span>]
[<span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span>]
[<span class="number">30</span> <span class="number">31</span> <span class="number">32</span> <span class="number">33</span>]
[<span class="number">40</span> <span class="number">41</span> <span class="number">42</span> <span class="number">43</span>]
</code></pre><p>然而，如果一个人想对每个数组中元素进行运算，我们可以使用flat属性，该属性是数组元素的一个迭代器:</p>
<pre><code>&gt;&gt;&gt; <span class="keyword">for</span> element in b.flat:
...         print element,
...
<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span> <span class="number">30</span> <span class="number">31</span> <span class="number">32</span> <span class="number">33</span> <span class="number">40</span> <span class="number">41</span> <span class="number">42</span> <span class="number">43</span>
</code></pre><p>更多[], …, newaxis, ndenumerate, indices, index exp 参考<a href="http://scipy.org/Numpy_Example_List" target="_blank" rel="external">NumPy示例</a></p>
<h2 id="形状操作">形状操作</h2><h3 id="更改数组的形状">更改数组的形状</h3><p>一个数组的形状由它每个轴上的元素个数给出：</p>
<pre><code>&gt;&gt;&gt; <span class="tag">a</span> = <span class="function"><span class="title">floor</span><span class="params">(<span class="number">10</span>*random.random((<span class="number">3</span>,<span class="number">4</span>)</span></span>))
&gt;&gt;&gt; <span class="tag">a</span>
array([[ <span class="number">7</span>.,  <span class="number">5</span>.,  <span class="number">9</span>.,  <span class="number">3</span>.],
       [ <span class="number">7</span>.,  <span class="number">2</span>.,  <span class="number">7</span>.,  <span class="number">8</span>.],
       [ <span class="number">6</span>.,  <span class="number">8</span>.,  <span class="number">3</span>.,  <span class="number">2</span>.]])
&gt;&gt;&gt; <span class="tag">a</span><span class="class">.shape</span>
(<span class="number">3</span>, <span class="number">4</span>)
</code></pre><p>一个数组的形状可以被多种命令修改：</p>
<pre><code>&gt;&gt;&gt; a.ravel() <span class="preprocessor"># flatten the array</span>
<span class="built_in">array</span>([ <span class="number">7.</span>,  <span class="number">5.</span>,  <span class="number">9.</span>,  <span class="number">3.</span>,  <span class="number">7.</span>,  <span class="number">2.</span>,  <span class="number">7.</span>,  <span class="number">8.</span>,  <span class="number">6.</span>,  <span class="number">8.</span>,  <span class="number">3.</span>,  <span class="number">2.</span>])
&gt;&gt;&gt; a.shape = (<span class="number">6</span>, <span class="number">2</span>)
&gt;&gt;&gt; a.transpose()
<span class="built_in">array</span>([[ <span class="number">7.</span>,  <span class="number">9.</span>,  <span class="number">7.</span>,  <span class="number">7.</span>,  <span class="number">6.</span>,  <span class="number">3.</span>],
       [ <span class="number">5.</span>,  <span class="number">3.</span>,  <span class="number">2.</span>,  <span class="number">8.</span>,  <span class="number">8.</span>,  <span class="number">2.</span>]])
</code></pre><p>由<code>ravel()</code>展平的数组元素的顺序通常是“C风格”的，就是说，最右边的索引变化得最快，所以元素a[0,0]之后是a[0,1]。如果数组被改变形状(reshape)成其它形状，数组仍然是“C风格”的。NumPy通常创建一个以这个顺序保存数据的数组，所以<code>ravel()</code>将总是不需要复制它的参数<a href="即self，它自己">^3</a>。但是如果数组是通过切片其它数组或有不同寻常的选项时，它可能需要被复制。函数<code>reshape()</code>和<code>ravel()</code>还可以被同过一些可选参数构建成FORTRAN风格的数组，即最左边的索引变化最快。</p>
<p><code>reshape</code>函数改变参数形状并返回它，而<code>resize</code>函数改变数组自身。</p>
<pre><code>&gt;&gt;&gt; a
array(<span class="comment">[<span class="comment">[ 7.,  5.]</span>,
       <span class="comment">[ 9.,  3.]</span>,
       <span class="comment">[ 7.,  2.]</span>,
       <span class="comment">[ 7.,  8.]</span>,
       <span class="comment">[ 6.,  8.]</span>,
       <span class="comment">[ 3.,  2.]</span>]</span>)
&gt;&gt;&gt; a.resize((2,6))
&gt;&gt;&gt; a
array(<span class="comment">[<span class="comment">[ 7.,  5.,  9.,  3.,  7.,  2.]</span>,
       <span class="comment">[ 7.,  8.,  6.,  8.,  3.,  2.]</span>]</span>)
</code></pre><p>如果在改变形状操作中一个维度被给做-1，其维度将自动被计算</p>
<p>更多 shape, reshape, resize, ravel 参考<a href="http://scipy.org/Numpy_Example_List" target="_blank" rel="external">NumPy示例</a></p>
<h3 id="组合(stack)不同的数组">组合(stack)不同的数组</h3><p>几种方法可以沿不同轴将数组堆叠在一起：</p>
<pre><code>&gt;&gt;&gt; a = floor(<span class="number">10</span>*random.random((<span class="number">2</span>,<span class="number">2</span>)))
&gt;&gt;&gt; a
array(<span class="string">[[ 1.,  1.],
       [ 5.,  8.]]</span>)
&gt;&gt;&gt; b = floor(<span class="number">10</span>*random.random((<span class="number">2</span>,<span class="number">2</span>)))
&gt;&gt;&gt; b
array(<span class="string">[[ 3.,  3.],
       [ 6.,  0.]]</span>)
&gt;&gt;&gt; vstack((a,b))
array(<span class="string">[[ 1.,  1.],
       [ 5.,  8.],
       [ 3.,  3.],
       [ 6.,  0.]]</span>)
&gt;&gt;&gt; hstack((a,b))
array(<span class="string">[[ 1.,  1.,  3.,  3.],
       [ 5.,  8.,  6.,  0.]]</span>)
</code></pre><p>函数<code>column_stack</code>以列将一维数组合成二维数组，它等同与<code>vstack</code>对一维数组。</p>
<pre><code>&gt;&gt;&gt; column_stack((a,b))   <span class="preprocessor"># With <span class="number">2</span>D arrays</span>
<span class="built_in">array</span>([[ <span class="number">1.</span>,  <span class="number">1.</span>,  <span class="number">3.</span>,  <span class="number">3.</span>],
       [ <span class="number">5.</span>,  <span class="number">8.</span>,  <span class="number">6.</span>,  <span class="number">0.</span>]])
&gt;&gt;&gt; a=<span class="built_in">array</span>([<span class="number">4.</span>,<span class="number">2.</span>])
&gt;&gt;&gt; b=<span class="built_in">array</span>([<span class="number">2.</span>,<span class="number">8.</span>])
&gt;&gt;&gt; a[:,newaxis]  <span class="preprocessor"># This allows to have a <span class="number">2</span>D columns vector</span>
<span class="built_in">array</span>([[ <span class="number">4.</span>],
       [ <span class="number">2.</span>]])
&gt;&gt;&gt; column_stack((a[:,newaxis],b[:,newaxis]))
<span class="built_in">array</span>([[ <span class="number">4.</span>,  <span class="number">2.</span>],
       [ <span class="number">2.</span>,  <span class="number">8.</span>]])
&gt;&gt;&gt; vstack((a[:,newaxis],b[:,newaxis])) <span class="preprocessor"># The behavior of vstack is different</span>
<span class="built_in">array</span>([[ <span class="number">4.</span>],
       [ <span class="number">2.</span>],
       [ <span class="number">2.</span>],
       [ <span class="number">8.</span>]])
</code></pre><p><code>row_stack</code>函数，另一方面，将一维数组以行组合成二维数组。</p>
<p>对那些维度比二维更高的数组，<code>hstack</code>沿着第二个轴组合，<code>vstack</code>沿着第一个轴组合,<code>concatenate</code>允许可选参数给出组合时沿着的轴。</p>
<p><em>Note</em></p>
<p>在复杂情况下，<code>r_[]</code>和<code>c_[]</code>对创建沿着一个方向组合的数很有用，它们允许范围符号(“:”):</p>
<pre><code>&gt;&gt;&gt; r_[<span class="number">1</span>:<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span>]
<span class="built_in">array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">4</span>])
</code></pre><p>当使用数组作为参数时，<code>r_</code>和<code>c_</code>的默认行为和<code>vstack</code>和<code>hstack</code>很像，但是允许可选的参数给出组合所沿着的轴的代号。</p>
<p>更多函数hstack , vstack, column_stack , row_stack , concatenate , c_ , r_<br>参见<a href="http://scipy.org/Numpy_Example_List" target="_blank" rel="external">NumPy示例</a>.</p>
<h3 id="将一个数组分割(split)成几个小数组">将一个数组分割(split)成几个小数组</h3><p>使用<code>hsplit</code>你能将数组沿着它的水平轴分割，或者指定返回相同形状数组的个数，或者指定在哪些列后发生分割:</p>
<pre><code>&gt;&gt;&gt; a = floor(<span class="number">10</span>*random.random((<span class="number">2</span>,<span class="number">12</span>)))
&gt;&gt;&gt; a
array(<span class="string">[[ 8.,  8.,  3.,  9.,  0.,  4.,  3.,  0.,  0.,  6.,  4.,  4.],
       [ 0.,  3.,  2.,  9.,  6.,  0.,  4.,  5.,  7.,  5.,  1.,  4.]]</span>)
&gt;&gt;&gt; hsplit(a,<span class="number">3</span>)   # Split a into <span class="number">3</span>
[array(<span class="string">[[ 8.,  8.,  3.,  9.],
       [ 0.,  3.,  2.,  9.]]</span>), array(<span class="string">[[ 0.,  4.,  3.,  0.],
       [ 6.,  0.,  4.,  5.]]</span>), array(<span class="string">[[ 0.,  6.,  4.,  4.],
       [ 7.,  5.,  1.,  4.]]</span>)]
&gt;&gt;&gt; hsplit(a,(<span class="number">3</span>,<span class="number">4</span>))   # Split a after the third <span class="keyword">and</span> the fourth column
[array(<span class="string">[[ 8.,  8.,  3.],
       [ 0.,  3.,  2.]]</span>), array(<span class="string">[[ 9.],
       [ 9.]]</span>), array(<span class="string">[[ 0.,  4.,  3.,  0.,  0.,  6.,  4.,  4.],
       [ 6.,  0.,  4.,  5.,  7.,  5.,  1.,  4.]]</span>)]
</code></pre><p><code>vsplit</code>沿着纵向的轴分割，<code>array split</code>允许指定沿哪个轴分割。</p>
<h2 id="复制和视图">复制和视图</h2><p>当运算和处理数组时，它们的数据有时被拷贝到新的数组有时不是。这通常是新手的困惑之源。这有三种情况:</p>
<h3 id="完全不拷贝">完全不拷贝</h3><p>简单的赋值不拷贝数组对象或它们的数据。</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; a = arange(<span class="number">12</span>)
<span class="prompt">&gt;&gt;</span>&gt; b = a            <span class="comment"># no new object is created</span>
<span class="prompt">&gt;&gt;</span>&gt; b is a           <span class="comment"># a and b are two names for the same ndarray object</span>
<span class="constant">True</span>
<span class="prompt">&gt;&gt;</span>&gt; b.shape = <span class="number">3</span>,<span class="number">4</span>    <span class="comment"># changes the shape of a</span>
<span class="prompt">&gt;&gt;</span>&gt; a.shape
(<span class="number">3</span>, <span class="number">4</span>)
</code></pre><p>Python 传递不定对象作为参考<a href="形参">^4</a>，所以函数调用不拷贝数组。</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span>
<span class="prompt">... </span>    <span class="keyword">print</span> id(x)
...
<span class="prompt">&gt;&gt;&gt; </span>id(a)                           <span class="comment"># id is a unique identifier of an object</span>
<span class="number">148293216</span>
<span class="prompt">&gt;&gt;&gt; </span>f(a)
<span class="number">148293216</span>
</code></pre><h3 id="视图(view)和浅复制">视图(view)和浅复制</h3><p>不同的数组对象分享同一个数据。视图方法创造一个新的数组对象指向同一数据。</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; c = a.view()
<span class="prompt">&gt;&gt;</span>&gt; c is a
<span class="constant">False</span>
<span class="prompt">&gt;&gt;</span>&gt; c.base is a                        <span class="comment"># c is a view of the data owned by a</span>
<span class="constant">True</span>
<span class="prompt">&gt;&gt;</span>&gt; c.flags.owndata
<span class="constant">False</span>
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; c.shape = <span class="number">2</span>,<span class="number">6</span>                      <span class="comment"># a's shape doesn't change</span>
<span class="prompt">&gt;&gt;</span>&gt; a.shape
(<span class="number">3</span>, <span class="number">4</span>)
<span class="prompt">&gt;&gt;</span>&gt; c[<span class="number">0</span>,<span class="number">4</span>] = <span class="number">1234</span>                      <span class="comment"># a's data changes</span>
<span class="prompt">&gt;&gt;</span>&gt; a
array([[   <span class="number">0</span>,    <span class="number">1</span>,    <span class="number">2</span>,    <span class="number">3</span>],
       [<span class="number">1234</span>,    <span class="number">5</span>,    <span class="number">6</span>,    <span class="number">7</span>],
       [   <span class="number">8</span>,    <span class="number">9</span>,   <span class="number">10</span>,   <span class="number">11</span>]])
</code></pre><p>切片数组返回它的一个视图：</p>
<pre><code>&gt;&gt;&gt; s = a[ : , <span class="number">1</span>:<span class="number">3</span>]     <span class="preprocessor"># spaces added for clarity; could also be written <span class="string">"s = a[:,1:3]"</span></span>
&gt;&gt;&gt; s[:] = <span class="number">10</span>           <span class="preprocessor"># s[:] is a view of s. Note the difference between s=<span class="number">10</span> and s[:]=<span class="number">10</span></span>
&gt;&gt;&gt; <span class="function">a
<span class="title">array</span><span class="params">([[   <span class="number">0</span>,   <span class="number">10</span>,   <span class="number">10</span>,    <span class="number">3</span>],
       [<span class="number">1234</span>,   <span class="number">10</span>,   <span class="number">10</span>,    <span class="number">7</span>],
       [   <span class="number">8</span>,   <span class="number">10</span>,   <span class="number">10</span>,   <span class="number">11</span>]])</span></span>
</code></pre><h2 id="深复制">深复制</h2><p>这个复制方法完全复制数组和它的数据。</p>
<pre><code>&gt;&gt;&gt; d = a.copy()                          # a <span class="keyword">new</span> array <span class="class"><span class="keyword">object</span> <span class="keyword"><span class="keyword">with</span></span> <span class="title">new</span> <span class="title">data</span> <span class="title">is</span> <span class="title">created</span>
</span>&gt;&gt;&gt; d is a
<span class="type">False</span>
&gt;&gt;&gt; d.base is a                           # d doesn<span class="symbol">'t</span> share anything <span class="keyword">with</span> a
<span class="type">False</span>
&gt;&gt;&gt; d[<span class="number">0</span>,<span class="number">0</span>] = <span class="number">9999</span>
&gt;&gt;&gt; a
array([[   <span class="number">0</span>,   <span class="number">10</span>,   <span class="number">10</span>,    <span class="number">3</span>],
       [<span class="number">1234</span>,   <span class="number">10</span>,   <span class="number">10</span>,    <span class="number">7</span>],
       [   <span class="number">8</span>,   <span class="number">10</span>,   <span class="number">10</span>,   <span class="number">11</span>]])
</code></pre><h3 id="函数和方法(method)总览">函数和方法(method)总览</h3><p>这是个NumPy函数和方法分类排列目录。这些名字链接到<a href="http://scipy.org/Numpy_Example_List" target="_blank" rel="external">NumPy示例</a>,你可以看到这些函数起作用。<a href="0轴">^5</a></p>
<p><em>创建数组</em></p>
<pre><code>arange, array, copy, empty, empty_like, <span class="built_in">eye</span>, fromfile, fromfunction, identity, <span class="built_in">linspace</span>, <span class="built_in">logspace</span>, mgrid, ogrid, <span class="built_in">ones</span>, ones_like, r , <span class="built_in">zeros</span>, zeros_like 
</code></pre><p><em>转化</em></p>
<pre><code>astype, atleast <span class="number">1</span>d, atleast <span class="number">2</span>d, atleast <span class="number">3</span>d, mat 
</code></pre><p><em>操作</em></p>
<pre><code>array <span class="built_in">split</span>, column stack, concatenate, diagonal, <span class="keyword">dsplit</span>, dstack, hsplit, hstack, item, newaxis, ravel, <span class="built_in">repeat</span>, reshape, <span class="keyword">resize</span>, squeeze, swapaxes, take, transpose, <span class="keyword">vsplit</span>, vstack 
</code></pre><p><em>询问</em></p>
<pre><code><span class="built_in">all</span>, <span class="built_in">any</span>, nonzero, <span class="keyword">where</span> 
</code></pre><p><em>排序</em></p>
<pre><code>argmax, argmin, argsort, <span class="built_in">max</span>, <span class="built_in">min</span>, <span class="keyword">ptp</span>, searchsorted, <span class="built_in">sort</span> 
</code></pre><p><em>运算</em></p>
<pre><code>choose, compress, <span class="built_in">cumprod</span>, cumsum, inner, fill, <span class="built_in">imag</span>, <span class="built_in">prod</span>, put, putmask, real, <span class="built_in">sum</span> 
</code></pre><p><em>基本统计</em></p>
<pre><code><span class="built_in">cov</span>, mean, std, <span class="built_in">var</span> 
</code></pre><p><em>基本线性代数</em></p>
<pre><code><span class="built_in">cross</span>, <span class="built_in">dot</span>, outer, svd, vdot
</code></pre><h2 id="进阶">进阶</h2><h3 id="广播法则(rule)">广播法则(rule)</h3><p>广播法则能使通用函数有意义地处理不具有相同形状的输入。</p>
<p>广播第一法则是，如果所有的输入数组维度不都相同，一个“1”将被重复地添加在维度较小的数组上直至所有的数组拥有一样的维度。</p>
<p>广播第二法则确定长度为1的数组沿着特殊的方向表现地好像它有沿着那个方向最大形状的大小。对数组来说，沿着那个维度的数组元素的值理应相同。</p>
<p>应用广播法则之后，所有数组的大小必须匹配。更多细节可以从这个<a href="http://scipy.org/EricsBroadcastingDoc" target="_blank" rel="external">文档</a>找到。</p>
<h2 id="花哨的索引和索引技巧">花哨的索引和索引技巧</h2><p>NumPy比普通Python序列提供更多的索引功能。除了索引整数和切片，正如我们之前看到的，数组可以被整数数组和布尔数组索引。</p>
<h3 id="通过数组索引">通过数组索引</h3><pre><code>&gt;&gt;&gt; a = arange(<span class="number">12</span>)**<span class="number">2</span>                          <span class="preprocessor"># the first <span class="number">12</span> square numbers</span>
&gt;&gt;&gt; i = <span class="built_in">array</span>( [ <span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">5</span> ] )                 <span class="preprocessor"># an array of indices</span>
&gt;&gt;&gt; a[i]                                       <span class="preprocessor"># the elements of a at the positions i</span>
<span class="built_in">array</span>([ <span class="number">1</span>,  <span class="number">1</span>,  <span class="number">9</span>, <span class="number">64</span>, <span class="number">25</span>])
&gt;&gt;&gt;
&gt;&gt;&gt; j = <span class="built_in">array</span>( [ [ <span class="number">3</span>, <span class="number">4</span>], [ <span class="number">9</span>, <span class="number">7</span> ] ] )         <span class="preprocessor"># a bidimensional array of indices</span>
&gt;&gt;&gt; a[j]                                       <span class="preprocessor"># the same shape as j</span>
<span class="built_in">array</span>([[ <span class="number">9</span>, <span class="number">16</span>],
       [<span class="number">81</span>, <span class="number">49</span>]])
</code></pre><p>当被索引数组a是多维的时，每一个唯一的索引数列指向a的第一维<a href="0轴">^5</a>。以下示例通过将图片标签用调色版转换成色彩图像展示了这种行为。</p>
<pre><code>&gt;&gt;&gt; palette = <span class="built_in">array</span>( [ [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],                <span class="preprocessor"># black</span>
...                    [<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>],              <span class="preprocessor"># red</span>
...                    [<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>],              <span class="preprocessor"># green</span>
...                    [<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>],              <span class="preprocessor"># blue</span>
...                    [<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>] ] )       <span class="preprocessor"># white</span>
&gt;&gt;&gt; image = <span class="built_in">array</span>( [ [ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span> ],           <span class="preprocessor"># each value corresponds to a color in the palette</span>
...                  [ <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">0</span> ]  ] )
&gt;&gt;&gt; palette[image]                            <span class="preprocessor"># the (<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>) color image</span>
<span class="built_in">array</span>([[[  <span class="number">0</span>,   <span class="number">0</span>,   <span class="number">0</span>],
        [<span class="number">255</span>,   <span class="number">0</span>,   <span class="number">0</span>],
        [  <span class="number">0</span>, <span class="number">255</span>,   <span class="number">0</span>],
        [  <span class="number">0</span>,   <span class="number">0</span>,   <span class="number">0</span>]],
       [[  <span class="number">0</span>,   <span class="number">0</span>,   <span class="number">0</span>],
        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],
        [<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>],
        [  <span class="number">0</span>,   <span class="number">0</span>,   <span class="number">0</span>]]])
</code></pre><p>我们也可以给出不不止一维的索引，每一维的索引数组必须有相同的形状。</p>
<pre><code>&gt;&gt;&gt; a = arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)
&gt;&gt;&gt; a
array(<span class="string">[[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]]</span>)
&gt;&gt;&gt; i = array( [ [<span class="number">0</span>,<span class="number">1</span>],                        # indices <span class="keyword">for</span> the first dim of a
...              [<span class="number">1</span>,<span class="number">2</span>] ] )
&gt;&gt;&gt; j = array( [ [<span class="number">2</span>,<span class="number">1</span>],                        # indices <span class="keyword">for</span> the second dim
...              [<span class="number">3</span>,<span class="number">3</span>] ] )
&gt;&gt;&gt;
&gt;&gt;&gt; a[i,j]                                     # i <span class="keyword">and</span> j must have equal shape
array(<span class="string">[[ 2,  5],
       [ 7, 11]]</span>)
&gt;&gt;&gt;
&gt;&gt;&gt; a[i,<span class="number">2</span>]
array(<span class="string">[[ 2,  6],
       [ 6, 10]]</span>)
&gt;&gt;&gt;
&gt;&gt;&gt; a[:,j]                                     # i.e., a[ : , j]
array(<span class="string">[[[ 2,  1],
        [ 3,  3]]</span>,
       <span class="string">[[ 6,  5],
        [ 7,  7]]</span>,
       <span class="string">[[10,  9],
        [11, 11]]</span>])
</code></pre><p>自然，我们可以把i和j放到序列中(比如说列表)然后通过list索引。</p>
<pre><code>&gt;&gt;&gt; l = [i,j]
&gt;&gt;&gt; a[l]                                       <span class="preprocessor"># equivalent to a[i,j]</span>
<span class="built_in">array</span>([[ <span class="number">2</span>,  <span class="number">5</span>],
       [ <span class="number">7</span>, <span class="number">11</span>]])
</code></pre><p>然而，我们不能把i和j放在一个数组中，因为这个数组将被解释成索引a的第一维。</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; s = array( [i,j] )
<span class="prompt">&gt;&gt;</span>&gt; a[s]                                       <span class="comment"># not what we want</span>
---------------------------------------------------------------------------
<span class="constant">IndexError</span>                                <span class="constant">Traceback</span> (most recent call last)
&lt;ipython-input-<span class="number">100</span>-b912f631cc75&gt; <span class="keyword">in</span> &lt;<span class="class"><span class="keyword">module</span>&gt;()</span>
----&gt; <span class="number">1</span> a[s]

<span class="constant">IndexError</span><span class="symbol">:</span> index (<span class="number">3</span>) out of range (<span class="number">0</span>&lt;=index&lt;<span class="number">2</span>) <span class="keyword">in</span> dimension <span class="number">0</span>
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; a[tuple(s)]                                <span class="comment"># same as a[i,j]</span>
array([[ <span class="number">2</span>,  <span class="number">5</span>],
       [ <span class="number">7</span>, <span class="number">11</span>]])
</code></pre><p>另一个常用的数组索引用法是搜索时间序列最大值<a href="我也不知道在翻译什么了……">^6</a>。</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; time = linspace(<span class="number">20</span>, <span class="number">145</span>, <span class="number">5</span>)                 <span class="comment"># time scale</span>
<span class="prompt">&gt;&gt;</span>&gt; data = sin(arange(<span class="number">20</span>)).reshape(<span class="number">5</span>,<span class="number">4</span>)         <span class="comment"># 4 time-dependent series</span>
<span class="prompt">&gt;&gt;</span>&gt; time
array([  <span class="number">20</span>.  ,   <span class="number">51.25</span>,   <span class="number">82.5</span> ,  <span class="number">113.75</span>,  <span class="number">145</span>.  ])
<span class="prompt">&gt;&gt;</span>&gt; data
array([[ <span class="number">0</span>.        ,  <span class="number">0</span>.<span class="number">84147098</span>,  <span class="number">0</span>.<span class="number">90929743</span>,  <span class="number">0</span>.<span class="number">14112001</span>],
       [-<span class="number">0</span>.<span class="number">7568025</span> , -<span class="number">0</span>.<span class="number">95892427</span>, -<span class="number">0</span>.<span class="number">2794155</span> ,  <span class="number">0</span>.<span class="number">6569866</span> ],
       [ <span class="number">0</span>.<span class="number">98935825</span>,  <span class="number">0</span>.<span class="number">41211849</span>, -<span class="number">0</span>.<span class="number">54402111</span>, -<span class="number">0</span>.<span class="number">99999021</span>],
       [-<span class="number">0</span>.<span class="number">53657292</span>,  <span class="number">0</span>.<span class="number">42016704</span>,  <span class="number">0</span>.<span class="number">99060736</span>,  <span class="number">0</span>.<span class="number">65028784</span>],
       [-<span class="number">0</span>.<span class="number">28790332</span>, -<span class="number">0</span>.<span class="number">96139749</span>, -<span class="number">0</span>.<span class="number">75098725</span>,  <span class="number">0</span>.<span class="number">14987721</span>]])
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; ind = data.argmax(axis=<span class="number">0</span>)                   <span class="comment"># index of the maxima for each series</span>
<span class="prompt">&gt;&gt;</span>&gt; ind
array([<span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>])
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; time_max = time[ ind]                       <span class="comment"># times corresponding to the maxima</span>
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; data_max = data[ind, xrange(data.shape[<span class="number">1</span>])] <span class="comment"># =&gt; data[ind[0],0], data[ind[1],1]...</span>
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; time_max
array([  <span class="number">82.5</span> ,   <span class="number">20</span>.  ,  <span class="number">113.75</span>,   <span class="number">51.25</span>])
<span class="prompt">&gt;&gt;</span>&gt; data_max
array([ <span class="number">0</span>.<span class="number">98935825</span>,  <span class="number">0</span>.<span class="number">84147098</span>,  <span class="number">0</span>.<span class="number">99060736</span>,  <span class="number">0</span>.<span class="number">6569866</span> ])
<span class="prompt">&gt;&gt;</span>&gt;
&gt;&gt;&gt; all(data_max == data.max(axis=<span class="number">0</span>))
<span class="constant">True</span>
</code></pre><p>你也可以使用数组索引作为目标来赋值：</p>
<pre><code>&gt;&gt;&gt; <span class="tag">a</span> = <span class="function"><span class="title">arange</span><span class="params">(<span class="number">5</span>)</span></span>
&gt;&gt;&gt; <span class="tag">a</span>
<span class="function"><span class="title">array</span><span class="params">([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span></span>
&gt;&gt;&gt; <span class="tag">a</span>[[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]] = <span class="number">0</span>
&gt;&gt;&gt; <span class="tag">a</span>
<span class="function"><span class="title">array</span><span class="params">([<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>])</span></span>
</code></pre><p>然而，当一个索引列表包含重复时，赋值被多次完成，保留最后的值：</p>
<pre><code>&gt;&gt;&gt; a = arange(<span class="number">5</span>)
&gt;&gt;&gt; a[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>]]=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]
&gt;&gt;&gt; <span class="function">a
<span class="title">array</span><span class="params">([<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>])</span></span>
</code></pre><p>这足够合理，但是小心如果你想用Python的<code>+=</code>结构，可能结果并非你所期望：</p>
<pre><code>&gt;&gt;&gt; <span class="tag">a</span> = <span class="function"><span class="title">arange</span><span class="params">(<span class="number">5</span>)</span></span>
&gt;&gt;&gt; <span class="tag">a</span>[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>]]+=<span class="number">1</span>
&gt;&gt;&gt; <span class="tag">a</span>
<span class="function"><span class="title">array</span><span class="params">([<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>])</span></span>
</code></pre><p>即使0在索引列表中出现两次，索引为0的元素仅仅增加一次。这是因为Python要求<code>a+=1</code>和<code>a=a+1</code>等同。</p>
<h3 id="通过布尔数组索引">通过布尔数组索引</h3><p>当我们使用整数数组索引数组时，我们提供一个索引列表去选择。通过布尔数组索引的方法是不同的我们显式地选择数组中我们想要和不想要的元素。</p>
<p>我们能想到的使用布尔数组的索引最自然方式就是使用和原数组一样形状的布尔数组。</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span>a = arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)
<span class="prompt">&gt;&gt;&gt; </span>b = a &gt; <span class="number">4</span>
<span class="prompt">&gt;&gt;&gt; </span>b                                          <span class="comment"># b is a boolean with a's shape</span>
array([[<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">False</span>],
       [<span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">True</span>],
       [<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">True</span>]], dtype=bool)
<span class="prompt">&gt;&gt;&gt; </span>a[b]                                       <span class="comment"># 1d array with the selected elements</span>
array([ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])
</code></pre><p>这个属性在赋值时非常有用：</p>
<pre><code>&gt;&gt;&gt; a[b] = <span class="number">0</span>                                   <span class="preprocessor"># All elements of <span class="string">'a'</span> higher than <span class="number">4</span> become <span class="number">0</span></span>
&gt;&gt;&gt; <span class="function">a
<span class="title">array</span><span class="params">([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],
       [<span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],
       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]])</span></span>
</code></pre><p>你可以参考<a href="http://scipy.org/Tentative_NumPy_Tutorial/Mandelbrot_Set_Example" target="_blank" rel="external">曼德博集合示例</a>看看如何使用布尔索引来生成曼德博集合的图像。</p>
<p>第二种通过布尔来索引的方法更近似于整数索引；对数组的每个维度我们给一个一维布尔数组来选择我们想要的切片。</p>
<pre><code>&gt;&gt;&gt; a = arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)
&gt;&gt;&gt; b1 = <span class="built_in">array</span>([False,True,True])             <span class="preprocessor"># first dim selection</span>
&gt;&gt;&gt; b2 = <span class="built_in">array</span>([True,False,True,False])       <span class="preprocessor"># second dim selection</span>
&gt;&gt;&gt;
&gt;&gt;&gt; a[b1,:]                                   <span class="preprocessor"># selecting rows</span>
<span class="built_in">array</span>([[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],
       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])
&gt;&gt;&gt;
&gt;&gt;&gt; a[b1]                                     <span class="preprocessor"># same thing</span>
<span class="built_in">array</span>([[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],
       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])
&gt;&gt;&gt;
&gt;&gt;&gt; a[:,b2]                                   <span class="preprocessor"># selecting columns</span>
<span class="built_in">array</span>([[ <span class="number">0</span>,  <span class="number">2</span>],
       [ <span class="number">4</span>,  <span class="number">6</span>],
       [ <span class="number">8</span>, <span class="number">10</span>]])
&gt;&gt;&gt;
&gt;&gt;&gt; a[b1,b2]                                  <span class="preprocessor"># a weird thing to do</span>
<span class="built_in">array</span>([ <span class="number">4</span>, <span class="number">10</span>])
</code></pre><p>注意一维数组的长度必须和你想要切片的维度或轴的长度一致，在之前的例子中，b1是一个秩为1长度为三的数组(a的行数)，b2(长度为4)与a的第二秩(列)相一致。<a href="上面最后一个例子，b1和b2中的true个数必须一致">^7</a></p>
<h3 id="ix_()函数">ix_()函数</h3><p><code>ix_</code>函数可以为了获得<a href="http://zh.wikipedia.org/wiki/%E5%A4%9A%E5%85%83%E7%BB%84" target="_blank" rel="external">多元组</a>的结果而用来结合不同向量。例如，如果你想要用所有向量a、b和c元素组成的三元组来计算<code>a+b*c</code>：</p>
<pre><code>&gt;&gt;&gt; a = array([<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])
&gt;&gt;&gt; b = array([<span class="number">8</span>,<span class="number">5</span>,<span class="number">4</span>])
&gt;&gt;&gt; c = array([<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">3</span>])
&gt;&gt;&gt; ax,bx,cx = ix_(a,b,c)
&gt;&gt;&gt; ax
array(<span class="string">[[[2]]</span>,

       <span class="string">[[3]]</span>,

       <span class="string">[[4]]</span>,

       <span class="string">[[5]]</span>])
&gt;&gt;&gt; bx
array(<span class="string">[[[8],
        [5],
        [4]]</span>])
&gt;&gt;&gt; cx
array(<span class="string">[[[5, 4, 6, 8, 3]]</span>])
&gt;&gt;&gt; ax.shape, bx.shape, cx.shape
((<span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>))
&gt;&gt;&gt; result = ax+bx*cx
&gt;&gt;&gt; result
array(<span class="string">[[[42, 34, 50, 66, 26],
        [27, 22, 32, 42, 17],
        [22, 18, 26, 34, 14]]</span>,
       <span class="string">[[43, 35, 51, 67, 27],
        [28, 23, 33, 43, 18],
        [23, 19, 27, 35, 15]]</span>,
       <span class="string">[[44, 36, 52, 68, 28],
        [29, 24, 34, 44, 19],
        [24, 20, 28, 36, 16]]</span>,
       <span class="string">[[45, 37, 53, 69, 29],
        [30, 25, 35, 45, 20],
        [25, 21, 29, 37, 17]]</span>])
&gt;&gt;&gt; result[<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>]
<span class="number">17</span>
&gt;&gt;&gt; a[<span class="number">3</span>]+b[<span class="number">2</span>]*c[<span class="number">4</span>]
<span class="number">17</span>
</code></pre><p>你也可以实行如下简化：</p>
<pre><code><span class="function"><span class="keyword">def</span> <span class="title">ufunc_reduce</span><span class="params">(ufct, *vectors)</span>:</span>
    vs = ix_(*vectors)
    r = ufct.identity
    <span class="keyword">for</span> v <span class="keyword">in</span> vs:
        r = ufct(r,v)
    <span class="keyword">return</span> r
</code></pre><p>然后这样使用它：</p>
<pre><code>&gt;&gt;&gt; ufunc_reduce(add,a,b,c)
<span class="built_in">array</span>([[[<span class="number">15</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">13</span>],
        [<span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">10</span>],
        [<span class="number">11</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>,  <span class="number">9</span>]],
       [[<span class="number">16</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">14</span>],
        [<span class="number">13</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">11</span>],
        [<span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">10</span>]],
       [[<span class="number">17</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">20</span>, <span class="number">15</span>],
        [<span class="number">14</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">12</span>],
        [<span class="number">13</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">11</span>]],
       [[<span class="number">18</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">16</span>],
        [<span class="number">15</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">13</span>],
        [<span class="number">14</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">12</span>]]])
</code></pre><p>这个reduce与ufunc.reduce(比如说add.reduce)相比的优势在于它利用了广播法则，避免了创建一个输出大小乘以向量个数的参数数组。<a href="我不怎么明白……总之避免创建一个很大的数组。">^8</a></p>
<h3 id="用字符串索引">用字符串索引</h3><p>参见<a href="http://www.scipy.org/RecordArrays" target="_blank" rel="external">RecordArray</a>。</p>
<h2 id="线性代数">线性代数</h2><p>继续前进，基本线性代数包含在这里。</p>
<h3 id="简单数组运算">简单数组运算</h3><p>参考numpy文件夹中的linalg.py获得更多信息</p>
<pre><code>&gt;&gt;&gt; from numpy import *
&gt;&gt;&gt; from numpy.linalg import *

&gt;&gt;&gt; a = array(<span class="string">[[1.0, 2.0], [3.0, 4.0]]</span>)
&gt;&gt;&gt; <span class="built_in">print</span> a
<span class="string">[[ 1.  2.]
 [ 3.  4.]]</span>

&gt;&gt;&gt; a.transpose()
array(<span class="string">[[ 1.,  3.],
       [ 2.,  4.]]</span>)

&gt;&gt;&gt; inv(a)
array(<span class="string">[[-2. ,  1. ],
       [ 1.5, -0.5]]</span>)

&gt;&gt;&gt; u = eye(<span class="number">2</span>) # unit <span class="number">2</span>x2 matrix; <span class="string">"eye"</span> represents <span class="string">"I"</span>
&gt;&gt;&gt; u
array(<span class="string">[[ 1.,  0.],
       [ 0.,  1.]]</span>)
&gt;&gt;&gt; j = array(<span class="string">[[0.0, -1.0], [1.0, 0.0]]</span>)

&gt;&gt;&gt; dot (j, j) # matrix product
array(<span class="string">[[-1.,  0.],
       [ 0., -1.]]</span>)

&gt;&gt;&gt; trace(u)  # trace
 <span class="number">2.0</span>

&gt;&gt;&gt; y = array(<span class="string">[[5.], [7.]]</span>)
&gt;&gt;&gt; solve(a, y)
array(<span class="string">[[-3.],
       [ 4.]]</span>)

&gt;&gt;&gt; eig(j)
(array([ <span class="number">0.</span>+<span class="number">1.</span>j,  <span class="number">0.</span>-<span class="number">1.</span>j]),
array(<span class="string">[[ 0.70710678+0.j,  0.70710678+0.j],
       [ 0.00000000-0.70710678j,  0.00000000+0.70710678j]]</span>))
Parameters:
    square matrix

Returns
    The eigenvalues, each repeated according to its multiplicity.

    The normalized (unit <span class="string">"length"</span>) eigenvectors, such that the
    column ``v[:,i]`` is the eigenvector corresponding to the
    eigenvalue ``w[i]`` .
</code></pre><h3 id="矩阵类">矩阵类</h3><p>这是一个关于矩阵类的简短介绍。</p>
<pre><code>&gt;&gt;&gt; A = matrix(<span class="string">'1.0 2.0; 3.0 4.0'</span>)
&gt;&gt;&gt; A
<span class="string">[[ 1.  2.]
 [ 3.  4.]]</span>
&gt;&gt;&gt; <span class="built_in">type</span>(A)  # file where class is defined
&lt;class <span class="string">'numpy.matrixlib.defmatrix.matrix'</span>&gt;

&gt;&gt;&gt; A.T  # transpose
<span class="string">[[ 1.  3.]
 [ 2.  4.]]</span>

&gt;&gt;&gt; X = matrix(<span class="string">'5.0 7.0'</span>)
&gt;&gt;&gt; Y = X.T
&gt;&gt;&gt; Y
<span class="string">[[5.]
 [7.]]</span>

&gt;&gt;&gt; <span class="built_in">print</span> A*Y  # matrix multiplication
<span class="string">[[19.]
 [43.]]</span>

&gt;&gt;&gt; <span class="built_in">print</span> A.I  # inverse
<span class="string">[[-2.   1. ]
 [ 1.5 -0.5]]</span>

&gt;&gt;&gt; solve(A, Y)  # solving linear equation
matrix(<span class="string">[[-3.],
        [ 4.]]</span>)
</code></pre><h3 id="索引：比较矩阵和二维数组">索引：比较矩阵和二维数组</h3><p>注意NumPy中数组和矩阵有些重要的区别。NumPy提供了两个基本的对象：一个N维数组对象和一个通用函数对象。其它对象都是建构在它们之上的。特别的，矩阵是继承自NumPy数组对象的二维数组对象。对数组和矩阵，索引都必须包含合适的一个或多个这些组合：整数标量、省略号(ellipses)、整数列表;布尔值，整数或布尔值构成的元组，和一个一维整数或布尔值数组。矩阵可以被用作矩阵的索引，但是通常需要数组、列表或者其它形式来完成这个任务。</p>
<p>像平常在Python中一样，索引是从0开始的。传统上我们用矩形的行和列表示一个二维数组或矩阵，其中沿着0轴的方向被穿过的称作行，沿着1轴的方向被穿过的是列。<a href="水平是1轴，垂直是0轴。">^9</a></p>
<p>让我们创建数组和矩阵用来切片：</p>
<pre><code>&gt;&gt;&gt; A = <span class="function"><span class="title">arange</span><span class="params">(<span class="number">12</span>)</span></span>
&gt;&gt;&gt; A
<span class="function"><span class="title">array</span><span class="params">([ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span></span>
&gt;&gt;&gt; A<span class="class">.shape</span> = (<span class="number">3</span>,<span class="number">4</span>)
&gt;&gt;&gt; M = <span class="function"><span class="title">mat</span><span class="params">(A.copy()</span></span>)
&gt;&gt;&gt; print <span class="function"><span class="title">type</span><span class="params">(A)</span></span>,<span class="string">"  "</span>,<span class="function"><span class="title">type</span><span class="params">(M)</span></span>
&lt;type <span class="string">'numpy.ndarray'</span>&gt;    &lt;class <span class="string">'numpy.core.defmatrix.matrix'</span>&gt;
&gt;&gt;&gt; print A
[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]
 [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]
 [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]
&gt;&gt;&gt; print M
[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]
 [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]
 [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]
</code></pre><p>现在，让我们简单的切几片。基本的切片使用切片对象或整数。例如，<code>A[:]</code>和<code>M[:]</code>的求值将表现得和Python索引很相似。然而要注意很重要的一点就是NumPy切片数组<em>不</em>创建数据的副本;切片提供统一数据的视图。</p>
<pre><code>&gt;&gt;&gt; print A[:]; print A[:].shape
[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]
 [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]
 [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]
(<span class="number">3</span>, <span class="number">4</span>)
&gt;&gt;&gt; print M[:]; print M[:].shape
[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]
 [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]
 [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]
(<span class="number">3</span>, <span class="number">4</span>)
</code></pre><p>现在有些和Python索引不同的了：你可以同时使用逗号分割索引来沿着多个轴索引。</p>
<pre><code>&gt;&gt;&gt; print A[:,<span class="number">1</span>]; print A[:,<span class="number">1</span>].shape
[<span class="number">1</span> <span class="number">5</span> <span class="number">9</span>]
(<span class="number">3</span>,)
&gt;&gt;&gt; print M[:,<span class="number">1</span>]; print M[:,<span class="number">1</span>].shape
[[<span class="number">1</span>]
 [<span class="number">5</span>]
 [<span class="number">9</span>]]
(<span class="number">3</span>, <span class="number">1</span>)
</code></pre><p>注意最后两个结果的不同。对二维数组使用一个冒号产生一个一维数组，然而矩阵产生了一个二维矩阵。<a href="`type(M[:,1])`和`type(A[:,1])`你可以看到是这样。">^10</a>例如，一个<code>M[2,:]</code>切片产生了一个形状为(1,4)的矩阵，相比之下，一个数组的切片总是产生一个最低可能维度<a href="什么叫尽可能低的维度？不懂。">^11</a>的数组。例如，如果C是一个三维数组，<code>C[...,1]</code>产生一个二维的数组而<code>C[1,:,1]</code>产生一个一维数组。从这时开始，如果相应的矩阵切片结果是相同的话，我们将只展示数组切片的结果。</p>
<p>假如我们想要一个数组的第一列和第三列，一种方法是使用列表切片：</p>
<pre><code>&gt;&gt;&gt; A[:,[<span class="number">1</span>,<span class="number">3</span>]]
<span class="built_in">array</span>([[ <span class="number">1</span>,  <span class="number">3</span>],
       [ <span class="number">5</span>,  <span class="number">7</span>],
       [ <span class="number">9</span>, <span class="number">11</span>]])
</code></pre><p>稍微复杂点的方法是使用<code>take()</code>方法(method):</p>
<pre><code>&gt;&gt;&gt; A[:,].take([<span class="number">1</span>,<span class="number">3</span>],axis=<span class="number">1</span>)
<span class="built_in">array</span>([[ <span class="number">1</span>,  <span class="number">3</span>],
       [ <span class="number">5</span>,  <span class="number">7</span>],
       [ <span class="number">9</span>, <span class="number">11</span>]])
</code></pre><p>如果我们想跳过第一行，我们可以这样：</p>
<pre><code>&gt;&gt;&gt; A[<span class="number">1</span>:,].take([<span class="number">1</span>,<span class="number">3</span>],axis=<span class="number">1</span>)
<span class="built_in">array</span>([[ <span class="number">5</span>,  <span class="number">7</span>],
       [ <span class="number">9</span>, <span class="number">11</span>]])
</code></pre><p>或者我们仅仅使用<code>A[1:,[1,3]]</code>。还有一种方法是通过矩阵向量积(叉积)。</p>
<pre><code>&gt;&gt;&gt; A[ix_((<span class="number">1</span>,<span class="number">2</span>),(<span class="number">1</span>,<span class="number">3</span>))]
<span class="built_in">array</span>([[ <span class="number">5</span>,  <span class="number">7</span>],
       [ <span class="number">9</span>, <span class="number">11</span>]])
</code></pre><p>为了读者的方便，再次写下之前的矩阵：</p>
<pre><code>&gt;&gt;&gt; print A
[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]
 [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]
 [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]
</code></pre><p>现在让我们做些更复杂的。比如说我们想要保留第一行大于1的列。一种方法是创建布尔索引：</p>
<pre><code>&gt;&gt;&gt; A[<span class="number">0</span>,:]&gt;<span class="number">1</span>
<span class="built_in">array</span>([False, False, True, True], dtype=<span class="keyword">bool</span>)
&gt;&gt;&gt; A[:,A[<span class="number">0</span>,:]&gt;<span class="number">1</span>]
<span class="built_in">array</span>([[ <span class="number">2</span>,  <span class="number">3</span>],
       [ <span class="number">6</span>,  <span class="number">7</span>],
       [<span class="number">10</span>, <span class="number">11</span>]])
</code></pre><p>就是我们想要的！但是索引矩阵没这么方便。</p>
<pre><code>&gt;&gt;&gt; M[<span class="number">0</span>,:]&gt;<span class="number">1</span>
matrix(<span class="string">[[False, False, True, True]]</span>, dtype=bool)
&gt;&gt;&gt; M[:,M[<span class="number">0</span>,:]&gt;<span class="number">1</span>]
matrix(<span class="string">[[2, 3]]</span>)
</code></pre><p>这个过程的问题是用“矩阵切片”来切片产生一个矩阵<a href="用矩阵切片">^12</a>，但是矩阵有个方便的<code>A</code>属性，它的值是数组呈现的。所以我们仅仅做以下替代：</p>
<pre><code>&gt;&gt;&gt; M[:,M.A[<span class="number">0</span>,:]&gt;<span class="number">1</span>]
matrix([[ <span class="number">2</span>,  <span class="number">3</span>],
        [ <span class="number">6</span>,  <span class="number">7</span>],
        [<span class="number">10</span>, <span class="number">11</span>]])
</code></pre><p>如果我们想要在矩阵两个方向有条件地切片，我们必须稍微调整策略，代之以：</p>
<pre><code>&gt;&gt;&gt; A[A[:,<span class="number">0</span>]&gt;<span class="number">2</span>,A[<span class="number">0</span>,:]&gt;<span class="number">1</span>]
<span class="built_in">array</span>([ <span class="number">6</span>, <span class="number">11</span>])
&gt;&gt;&gt; M[M.A[:,<span class="number">0</span>]&gt;<span class="number">2</span>,M.A[<span class="number">0</span>,:]&gt;<span class="number">1</span>]
matrix([[ <span class="number">6</span>, <span class="number">11</span>]])
</code></pre><p>我们需要使用向量积<code>ix_</code>:</p>
<pre><code>&gt;&gt;&gt; A[ix_(A[:,<span class="number">0</span>]&gt;<span class="number">2</span>,A[<span class="number">0</span>,:]&gt;<span class="number">1</span>)]
<span class="built_in">array</span>([[ <span class="number">6</span>,  <span class="number">7</span>],
       [<span class="number">10</span>, <span class="number">11</span>]])
&gt;&gt;&gt; M[ix_(M.A[:,<span class="number">0</span>]&gt;<span class="number">2</span>,M.A[<span class="number">0</span>,:]&gt;<span class="number">1</span>)]
matrix([[ <span class="number">6</span>,  <span class="number">7</span>],
        [<span class="number">10</span>, <span class="number">11</span>]])
</code></pre><h2 id="技巧和提示">技巧和提示</h2><p>下面我们给出简短和有用的提示。</p>
<h3 id="“自动”改变形状">“自动”改变形状</h3><p>更改数组的维度，你可以省略一个尺寸，它将被自动推导出来。</p>
<pre><code>&gt;&gt;&gt; a = arange(<span class="number">30</span>)
&gt;&gt;&gt; a.shape = <span class="number">2</span>,-<span class="number">1</span>,<span class="number">3</span>  <span class="preprocessor"># -<span class="number">1</span> means <span class="string">"whatever is needed"</span></span>
&gt;&gt;&gt; a.shape
(<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>)
&gt;&gt;&gt; <span class="function">a
<span class="title">array</span><span class="params">([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],
        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],
        [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],
        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],
        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>]],
       [[<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],
        [<span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>],
        [<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],
        [<span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>],
        [<span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>]]])</span></span>
</code></pre><h3 id="向量组合(stacking)">向量组合(stacking)</h3><p>我们如何用两个相同尺寸的行向量列表构建一个二维数组？在MATLAB中这非常简单：如果x和y是两个相同长度的向量，你仅仅需要做<code>m=[x;y]</code>。在NumPy中这个过程通过函数<code>column_stack</code>、<code>dstack</code>、<code>hstack</code>和<code>vstack</code>来完成，取决于你想要在那个维度上组合。例如：</p>
<pre><code>x = arange(<span class="number">0</span>,<span class="number">10</span>,<span class="number">2</span>)                     <span class="preprocessor"># x=([<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>])</span>
y = arange(<span class="number">5</span>)                          <span class="preprocessor"># y=([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span>
m = vstack([x,y])                      <span class="preprocessor"># m=([[<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>],</span>
                                       <span class="preprocessor">#     [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]])</span>
xy = hstack([x,y])                     <span class="preprocessor"># xy =([<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span>
</code></pre><p>二维以上这些函数背后的逻辑会很奇怪。</p>
<p>参考<a href="http://scipy.org/NumPy_for_Matlab_Users" target="_blank" rel="external">写个Matlab用户的NumPy指南</a>并且在这里添加你的新发现: )</p>
<h3 id="直方图(histogram)">直方图(histogram)</h3><p>NumPy中<code>histogram</code>函数应用到一个数组返回一对变量：直方图数组和箱式向量。注意：<code>matplotlib</code>也有一个用来建立直方图的函数(叫作<code>hist</code>,正如matlab中一样)与NumPy中的不同。主要的差别是<code>pylab.hist</code>自动绘制直方图，而<code>numpy.histogram</code>仅仅产生数据。</p>
<pre><code>import numpy
import pylab
<span class="preprocessor"># Build a vector of <span class="number">10000</span> normal deviates with variance <span class="number">0.5</span>^<span class="number">2</span> and mean <span class="number">2</span></span>
mu, sigma = <span class="number">2</span>, <span class="number">0.5</span>
v = numpy.random.normal(mu,sigma,<span class="number">10000</span>)
<span class="preprocessor"># Plot a normalized histogram with <span class="number">50</span> bins</span>
pylab.hist(v, bins=<span class="number">50</span>, normed=<span class="number">1</span>)       <span class="preprocessor"># matplotlib version (plot)</span>
pylab.show()
<span class="preprocessor"># Compute the histogram with numpy and then plot it</span>
(n, bins) = numpy.histogram(v, bins=<span class="number">50</span>, normed=True)  <span class="preprocessor"># NumPy version (no plot)</span>
pylab.plot(<span class="number">.5</span>*(bins[<span class="number">1</span>:]+bins[:-<span class="number">1</span>]), n)
pylab.show()
</code></pre><h2 id="参考文献">参考文献</h2><ul>
<li>The <a href="http://docs.python.org/tut/tut.html" target="_blank" rel="external">Python tutorial</a>.</li>
<li>The <a href="http://scipy.org/Numpy_Example_List" target="_blank" rel="external">Numpy Example List</a>.</li>
<li>The nonexistent <a href="http://scipy.org/NumPy_Tutorial" target="_blank" rel="external">NumPy Tutorial</a> at scipy.org, where we can find the old Numeric documentation.</li>
<li>The <a href="http://www.tramy.us/" target="_blank" rel="external">Guide to NumPy</a> book.</li>
<li>The <a href="http://scipy.org/SciPy_Tutorial" target="_blank" rel="external">SciPy Tutorial</a> and a <a href="http://www.rexx.com/~dkuhlman/scipy_course_01.html" target="_blank" rel="external">SciPy course online</a></li>
<li><a href="http://scipy.org/NumPy_for_Matlab_Users" target="_blank" rel="external">NumPy for Matlab Users</a>.</li>
<li>A <a href="http://mathesaurus.sf.net/" target="_blank" rel="external">matlab, R, IDL, NumPy/SciPy dictionary</a>. </li>
</ul>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/Life/2012/08/17/to-be-an-epicurean/" itemprop="url">
                  To Be An Epicurean
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-17T00:00:00+08:00" content="2012-08-17">
              2012-08-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index">
                    <span itemprop="name">Life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p><strong>胡言乱语，请随意喷。</strong></p>
<h2 id="起">起</h2><p>晚上我正对着一堆python的东西不知所措时，室友自习回来，怒斥着考研太难过，表示不想考了。瞬间我们寝室便从四人考研将要沦落到我一个人了，这不是什么问题，也就是将来一个人困难更多些而已。然后他补充了一句：人活了为了什么？不就是为了爽吗？</p>
<p>我忽然感觉语塞，不知如何应答。说不出有什么问题，但心中拼命有个声音在问着：是吗是吗是这样吗？</p>
<p>感觉不对劲，很不对劲。</p>
<p>我不是一个反享乐主义者，事实上，我觉得每一个人都应该尽力享受他们的生命。若干月前我在图书馆看到一本享乐主义手册，书中虽然罗列了史上臭名昭著的享乐主义者，但极力鼓励人们享受自己的生活，过一个轻松愉快的人生。</p>
<p>但总感觉有哪里不对劲，但又理不清究竟是哪里不对。</p>
<h2 id="承">承</h2><p>于是心神不宁地去操场跑步，仰头看着久违的美丽星空。矛盾在心中一直萦绕，这无关紧要的问题为什么让我如此心神不宁？</p>
<p>我也许不是个纯粹的享乐主义者，甚至在很多方面我都倾向于苦修主义者，希望借以磨砺自己的意志。</p>
<p>但我只是跟他人方向不同罢了，互联网和文字使那些与自我时空千里之遥的思想在我心之土壤生根发芽，比周边的人更多塑造了我。我只是把自己的执迷不悟和强烈的欲望发泄在了我因此所感兴趣的领域上——数学、艺术、计算机。但我依然在他人不关心的方面贪嗔痴怪，不觉不慧。</p>
<p>我寻找、追寻、计划、妄想，依然也是使我感觉更“爽”，像在技术上的成就感、hack的乐趣，艺术的美和数学的美和精致。</p>
<p>既然我亦如是，到底哪里感觉不对劲？</p>
<h2 id="转">转</h2><p>我凝视天空，为城市光污染而星光黯淡的星空扼腕，</p>
<p>忽然寒颤，忽然明白</p>
<p>我怕那些极端的享乐主义者，怕他们的“爽”硬要强加在自己头上。</p>
<p>怕自己的信念与执着被自以为是的享乐主义者们扼杀。</p>
<p>怕众人只看见自己所见。</p>
<p>怕抬头再没了那份好奇的冲动，</p>
<p>探索的精神与好奇心。</p>
<p>虽然也勉强算是一个epicurean，</p>
<p>但有比那更得吾心的</p>
<p>我无法想象上千年来我们都酒池肉林</p>
<p>还以为我们看到的就如同所看到的世界</p>
<p>还以为自己是万物中心的世界</p>
<p>总之，我痛恨醉生梦死的世界和止步不前的死水。</p>
<p>然而我依然还是个享乐主义者。</p>
<h2 id="合">合</h2><p>我思索整个开源社区，没有利益支持却如何发展起来</p>
<p>我思索这些年来让我着迷的东西</p>
<p>思索那些明明让我疲乏而孤独的东西怎么能让我夜以继日的迷恋其中。</p>
<p>思索那些为某种信念忘我的人</p>
<p>思索那些为了某种乐趣迷失到另一个世界的人</p>
<p>他们选择了怎样的人生。世人又怎么看他们。</p>
<p>其实所有的人都是享乐主义者，但又如此不同</p>
<p>享乐主义不只是食色。这世界神赐给人类的乐趣如此之多</p>
<p>以致生命如此之精彩</p>
<p>我只是希望，不同的人、不同信念的人、不同乐趣的人</p>
<p>把目光从自身移向更广阔的宇宙，更多理解和包容。</p>
<p>我所言所为</p>
<p>未必能改变世界，只是撒下思想的种子。</p>
<p>如若有缘，它会在合适的地方于合适的时间生根发芽，</p>
<p>甚至结成硕果，繁育成林。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/Life/2012/08/15/galgame/" itemprop="url">
                  GALGAME
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-15T00:00:00+08:00" content="2012-08-15">
              2012-08-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index">
                    <span itemprop="name">Life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="GALGAME">GALGAME</h1><h2 id="Galgame初体验——AIR">Galgame初体验——AIR</h2><p>第一次接触galgame<a href="美少女游戏。其实您一定知道什么意思，就算不知道也可以google/baidu。">^1</a>大概是一年以前，忽然看到当年痴迷动漫时看过<a href="http://baike.baidu.com/view/4449.htm#sub6281444" target="_blank" rel="external">《AIR》</a>的游戏原作下载，正好闲的……于是便莫名开始了GALGAME初体验。到头也不记得剧情什么什么的了，只记得最后把某条线一气照着网上胡乱搜来的攻略通关，然后就是那什么什么h图的CG<a href="[百度百科解释](http://baike.baidu.com/view/4406.htm#sub8281901)">^2</a>。</p>
<p>对这个galgame经典之作总体印象不怎么样,感觉画面有些古老，音乐也没什么印象<a href="鸟之诗？">^3</a>,现在剧情早忘的一干二净，连有没有配音都不记得了。反正后来很久很久都觉得，这种游戏貌似也没什么意思嘛。<a href="好吧，其实我总共就接触过两个Galgame，所以见识浅薄，口出狂言，见谅。">^4</a></p>
<p>之后接触linux，兴趣开始泛滥<a href="泛滥，数学、计算机、一堆计算机语言、数据挖掘与可视化、计算软件、文本处理、web前端、linux系统及工具集、动态及静态博客系统、图像处理……">^6</a>，没时间和心思干其它的了。</p>
<h2 id="Another_Galgame_one_year_later">Another Galgame one year later</h2><p><code>_我怎么就没想到我又开始玩Galgame了！！！_</code></p>
<p>前几天在arch论坛上看到有人推荐<a href="http://katawa-shoujo.com/" target="_blank" rel="external">katawa shoujo</a><a href="片轮少女，即残疾少女的意思。">^5</a>，然后在archlinux贴吧看到有人贴图。感觉画面做得挺精致的，又渐渐听说国际团队制作，Creative Commons协议发布，原生linux支持……</p>
<p>好吧，总之我手贱了，花了一点时间和精力让它运行在我的linux x86_64之上。</p>
<p>然后想，费力劳神折腾好，难道不玩玩看？</p>
<p>于是作为考研党可耻地花时间开始攻略Galgame……</p>
<p>片首动画直接把我震惊了，做的真精致。</p>
<p>音轨也很棒</p>
<p>故事也……只能说有种很奇怪的感觉，似乎remind me of something，反正最后打算每天花近一个小时读读这个视觉小说。虽然一句话有两个单词不认识，开着电子词典查个不停.</p>
<p>上游戏效果图，这个场景忽然有种耳目一新的感觉，也许是因为画面，色调，音乐，或者是出乎意料的剧情：</p>
<p><img src="http://fmn.rrfmn.com/fmn058/20120815/1740/p_large_COVT_6e6d000009051263.jpg" alt="katawa-shoujo"></p>
<h2 id="选择">选择</h2><p>galgame这种游戏基本是依靠玩家的选择来决定剧情和结局的，每当做完选择，对未选之事便浮想联翩。老感觉自己错过了什么重要而不同的精彩剧情。自己的人生有何尝不是，选择之前它充满可能性。选择之后却一切都不能回头，只能浮想联翩，当初我若是做出了不同的选择，我将会是怎样的我，遇到怎样的人。一切都必将变化很多，万事都是缘分，发生后便是刻骨铭心的命运。</p>
<p>不知道准备把兴趣转变成自己的工作是个什么结果、也许当作兴趣更好、工作反而会把所有的乐趣毁掉。长恨此生非我有、何时忘却营营。准备到最后可能是踏遍铁鞋无觅处，无心插柳却成荫。不关福祸、做现在的打算。</p>
<p>To-do list：</p>
<ul>
<li>learning python the hard way</li>
<li>htdp</li>
<li>prolog</li>
<li>common lisp</li>
<li>gimp/krita/inkscape</li>
</ul>
<p><strong>^o^ go for it!</strong></p>
<p>之前的选择，已经让我踏上看不清未来的路，福兮？祸兮？</p>
<hr>
<h2 id="Footnotes">Footnotes</h2>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/Life/2012/08/11//" itemprop="url">
                  随笔——关于学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-11T00:00:00+08:00" content="2012-08-11">
              2012-08-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index">
                    <span itemprop="name">Life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="近日简记">近日简记</h2><p>自从回家没把本带回去，半个月隔绝linux，隔绝各类和计算机相关的东西。在这里的日志便从每三四天一篇缩减到似乎不再维护似的。其实现在倒一点没闲下来，只是没以前那么有大把大把的时间了。六点半起床，打开电脑看奥运新闻，洗衣服，早饭、去自习，中午午饭回来上网看看、学学python，小憩一下，滚到教室继续自习，偶尔会去实验室打打酱油。晚饭回来，继续打开电脑折腾。其实这一天天就这么过去了。半个月之前晚上八点去操场慢跑一个小时，现在缩短到九点跑个半小时……日子就这么一天天过去。</p>
<h2 id="Learn_Python">Learn Python</h2><p>从一个月之前断断续续地，竟然把A Byte of Python看完了，虽然很多东西也不甚明白，而且忘了大半。但总有了个轻松愉快的开端，总之这本书看起来令人愉快。之后看看《learn python the hard way》，作者的很多话我深以为然，反正那篇NB哄哄的序言把我吸引进来了，结果发现有之前那本书的底子之后看起来太简单了点……但作者关于学习一样东西的许多见解确是很值得一看的。</p>
<h3 id="The_Hard_Way_Is_Easier">The Hard Way Is Easier</h3><p>这里有段很精彩的关于练习和坚持的言论，我真得很喜欢它：</p>
<blockquote>
<h2 id="A_Note_On_Practice_And_Persistence">A Note On Practice And Persistence</h2><p>While you are studying programming, I’m studying how to play guitar. I practice it every day for at least 2 hours a day. I play scales, chords, and arpeggios for an hour at least and then learn music theory, ear training, songs and anything else I can. Some days I study guitar and music for 8 hours because I feel like it and it’s fun. To me repetitive practice is natural and just how to learn something. I know that to get good at anything you have to practice every day, even if I suck that day (which is often) or it’s difficult. Keep trying and eventually it’ll be easier and fun.</p>
<p>As you study this book, and continue with programming, remember that anything worth doing is difficult at first. Maybe you are the kind of person who is afraid of failure so you give up at the first sign of difficulty. Maybe you never learned self-discipline so you can’t do anything that’s “boring”. Maybe you were told that you are “gifted” so you never attempt anything that might make you seem stupid or not a prodigy. Maybe you are competitive and unfairly compare yourself to someone like me who’s been programming for 20+ years.</p>
<p>Whatever your reason for wanting to quit, keep at it. Force yourself. If you run into an Extra Credit you can’t do, or a lesson you just do not understand, then skip it and come back to it later. Just keep going because with programming there’s this very odd thing that happens.</p>
<p>At first, you will not understand anything. It’ll be weird, just like with learning any human language. You will struggle with words, and not know what symbols are what, and it’ll all be very confusing. Then one day BANG your brain will snap and you will suddenly “get it”. If you keep doing the exercises and keep trying to understand them, you will get it. You might not be a master coder, but you will at least understand how programming works.</p>
<p>If you give up, you won’t ever reach this point. You will hit the first confusing thing (which is everything at first) and then stop. If you keep trying, keep typing it in, trying to understand it and reading about it, you will eventually get it.</p>
<p>But, if you go through this whole book, and you still do not understand how to code, at least you gave it a shot. You can say you tried your best and a little more and it didn’t work out, but at least you tried. You can be proud of that.</p>
</blockquote>
<p>这的确是本很“简单的书”，我觉得作者以下的话可以送给那些妄想走捷径自大而不愿付出的人(No pains,no gains):</p>
<blockquote>
<p>Empty before you fill. You will have a hard time learning from someone with more knowledge if you already know everything.</p>
</blockquote>
<p>当然还有这一句玩笑话……</p>
<blockquote>
<p>Go learn Lisp. I hear people who know everything really like Lisp.</p>
</blockquote>
<p>关于一个看上去很艰巨的大任务或者大项目，比如面临考研复习的自己，作者送出了这么一段句话：</p>
<blockquote>
<p>One final word of advice: Every programmer becomes paralyzed by irrational fear starting a new large project. They then use procrastination to avoid confronting this fear and end up not getting their program working or even started. I do this. Everyone does this. The best way to avoid this is to make a list of things you should do, and then do them one at a time.</p>
<p>Just start doing it, do a small version, make it bigger, keep a list of things to do, and do them.</p>
</blockquote>
<p>好像人们常说的细化目标，日积月累，步步为营。更关键的在于——开始去做。</p>
<p>就像当你决定做什么时，空想除了让你更好受永远不会有任何作用，但当你走出房门的那一刻，虽然什么也没做，情况确彻底地改变了。<a href="我其实在说晚上去跑步的情况。有时候会拖到很晚才去。">^1</a></p>
<p>作者经常让你花上几乎一整周的时间来<em>记忆</em>,记忆一定是学习一样东西时非常重要的东西，不管怎样，基本的东西你要记住。这些东西像英语中的词汇一样，是一切开始的基础。所以不要偷懒，<em>No pains, no gains</em>.</p>
<p>在学习的过程中我们经常性挫败感十足，这很糟糕。因为就我目前体验来说，要没有之前安装配置linux那种成就感让我如此上瘾，我真不会如此视折腾为乐事“坚持”到现在。所以，想办法让自己充满成就感。</p>
<p>尝试受挫会让自己感觉很蠢，but</p>
<blockquote>
<p>The most important thing when doing this exercise is: “There is no failure, only trying.”</p>
</blockquote>
<p>学习一段时间会很累？感觉有些不明白？作者经常安慰吾等菜鸟读者说：</p>
<blockquote>
<p>Just take it slow and do not hurt your brain. Hopefully by now these symbols are natural for you so this isn’t a big effort. It’s best to take 15 minutes at a time with your list and then take a break. Giving your brain a rest will help you learn faster with less frustration.</p>
</blockquote>
<p>很多credits都要求读者去自己求助于搜索引擎、文档，我觉得这才是学习，这才是zen，这才会有乐趣。</p>
<p>除了非常重要一致不能跳过的东西<a href="比如说python的安装……">^2</a>,大多东西都可以先跳过的，总之不要让自己挫败感十足。充满自信和乐趣是持续前进的动力。</p>
<p><em>Happy hacking,happy learning</em></p>
<hr>
<h2 id="这是题外话">这是题外话</h2><p>很多想得很好却没做到的事情。只能说自己想得太多：</p>
<p><img src="http://fmn.rrimg.com/fmn065/20120811/2210/p_large_KvH1_63ff00004f3c1263.jpg" hight="400" width="200" alt="梦想很美"></p>
<p>在weibo上说，我现在在学python。于是一位common lisp造诣很高的高人问我？你不学scheme了？我这才想起来从图书馆借的htdp，看着还不算累，但东西实在多。之后因为sagemath和自己在学校的创新项目和python的千丝万缕，又碰到python简明教材这本令人愉快的读物，投到scheme的热情便完全转移到python上了。</p>
<p>忽然便想起最近背的单词passion。激情、喜爱简直是一码事。虽然生活如此如此那般，但有passion的人生还是幸福的。</p>
<h2 id="Footnotes">Footnotes</h2>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/11/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/13/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Liu Yuyang" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Liu Yuyang</p>
        </div>
        <p class="site-description motion-element" itemprop="description">我希望生活是诗的，是画的，是无数动听的音符。我希望我是自由的，摇滚的，有一颗黑客的心。</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">165</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">23</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">55</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2011 - 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Yuyang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
