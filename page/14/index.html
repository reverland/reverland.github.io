<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
    <link href='//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Reverland, Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Reverland的行知阁" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/default_avatar.jpg?v=0.4.5.2" />






<meta name="description" content="我希望生活是诗的，是画的，是无数动听的音符。我希望我是自由的，摇滚的，有一颗黑客的心。">
<meta property="og:type" content="website">
<meta property="og:title" content="Reverland的行知阁">
<meta property="og:url" content="http://reverland.org/page/14/index.html">
<meta property="og:site_name" content="Reverland的行知阁">
<meta property="og:description" content="我希望生活是诗的，是画的，是无数动听的音符。我希望我是自由的，摇滚的，有一颗黑客的心。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Reverland的行知阁">
<meta name="twitter:description" content="我希望生活是诗的，是画的，是无数动听的音符。我希望我是自由的，摇滚的，有一颗黑客的心。">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> Reverland的行知阁 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Reverland的行知阁</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">开放、分享、自由与进步</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/life/2012/08/15/galgame/" itemprop="url">
                  GALGAME
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-15T00:00:00+08:00" content="2012-08-15">
              2012-08-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/life/" itemprop="url" rel="index">
                    <span itemprop="name">life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/life/2012/08/15/galgame/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="life/2012/08/15/galgame/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="GALGAME">GALGAME</h1><h2 id="Galgame初体验——AIR">Galgame初体验——AIR</h2><p>第一次接触galgame<a href="美少女游戏。其实您一定知道什么意思，就算不知道也可以google/baidu。">^1</a>大概是一年以前，忽然看到当年痴迷动漫时看过<a href="http://baike.baidu.com/view/4449.htm#sub6281444" target="_blank" rel="external">《AIR》</a>的游戏原作下载，正好闲的……于是便莫名开始了GALGAME初体验。到头也不记得剧情什么什么的了，只记得最后把某条线一气照着网上胡乱搜来的攻略通关，然后就是那什么什么h图的CG<a href="[百度百科解释](http://baike.baidu.com/view/4406.htm#sub8281901)">^2</a>。</p>
<p>对这个galgame经典之作总体印象不怎么样,感觉画面有些古老，音乐也没什么印象<a href="鸟之诗？">^3</a>,现在剧情早忘的一干二净，连有没有配音都不记得了。反正后来很久很久都觉得，这种游戏貌似也没什么意思嘛。<a href="好吧，其实我总共就接触过两个Galgame，所以见识浅薄，口出狂言，见谅。">^4</a></p>
<p>之后接触linux，兴趣开始泛滥<a href="泛滥，数学、计算机、一堆计算机语言、数据挖掘与可视化、计算软件、文本处理、web前端、linux系统及工具集、动态及静态博客系统、图像处理……">^6</a>，没时间和心思干其它的了。</p>
<h2 id="Another_Galgame_one_year_later">Another Galgame one year later</h2><p><code>_我怎么就没想到我又开始玩Galgame了！！！_</code></p>
<p>前几天在arch论坛上看到有人推荐<a href="http://katawa-shoujo.com/" target="_blank" rel="external">katawa shoujo</a><a href="片轮少女，即残疾少女的意思。">^5</a>，然后在archlinux贴吧看到有人贴图。感觉画面做得挺精致的，又渐渐听说国际团队制作，Creative Commons协议发布，原生linux支持……</p>
<p>好吧，总之我手贱了，花了一点时间和精力让它运行在我的linux x86_64之上。</p>
<p>然后想，费力劳神折腾好，难道不玩玩看？</p>
<p>于是作为考研党可耻地花时间开始攻略Galgame……</p>
<p>片首动画直接把我震惊了，做的真精致。</p>
<p>音轨也很棒</p>
<p>故事也……只能说有种很奇怪的感觉，似乎remind me of something，反正最后打算每天花近一个小时读读这个视觉小说。虽然一句话有两个单词不认识，开着电子词典查个不停.</p>
<p>上游戏效果图，这个场景忽然有种耳目一新的感觉，也许是因为画面，色调，音乐，或者是出乎意料的剧情：</p>
<p><img src="http://fmn.rrfmn.com/fmn058/20120815/1740/p_large_COVT_6e6d000009051263.jpg" alt="katawa-shoujo"></p>
<h2 id="选择">选择</h2><p>galgame这种游戏基本是依靠玩家的选择来决定剧情和结局的，每当做完选择，对未选之事便浮想联翩。老感觉自己错过了什么重要而不同的精彩剧情。自己的人生有何尝不是，选择之前它充满可能性。选择之后却一切都不能回头，只能浮想联翩，当初我若是做出了不同的选择，我将会是怎样的我，遇到怎样的人。一切都必将变化很多，万事都是缘分，发生后便是刻骨铭心的命运。</p>
<p>不知道准备把兴趣转变成自己的工作是个什么结果、也许当作兴趣更好、工作反而会把所有的乐趣毁掉。长恨此生非我有、何时忘却营营。准备到最后可能是踏遍铁鞋无觅处，无心插柳却成荫。不关福祸、做现在的打算。</p>
<p>To-do list：</p>
<ul>
<li>learning python the hard way</li>
<li>htdp</li>
<li>prolog</li>
<li>common lisp</li>
<li>gimp/krita/inkscape</li>
</ul>
<p><strong>^o^ go for it!</strong></p>
<p>之前的选择，已经让我踏上看不清未来的路，福兮？祸兮？</p>
<hr>
<h2 id="Footnotes">Footnotes</h2>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/life/2012/08/11/" itemprop="url">
                  随笔——关于学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-11T00:00:00+08:00" content="2012-08-11">
              2012-08-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/life/" itemprop="url" rel="index">
                    <span itemprop="name">life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/life/2012/08/11/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="life/2012/08/11//" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="近日简记">近日简记</h2><p>自从回家没把本带回去，半个月隔绝linux，隔绝各类和计算机相关的东西。在这里的日志便从每三四天一篇缩减到似乎不再维护似的。其实现在倒一点没闲下来，只是没以前那么有大把大把的时间了。六点半起床，打开电脑看奥运新闻，洗衣服，早饭、去自习，中午午饭回来上网看看、学学python，小憩一下，滚到教室继续自习，偶尔会去实验室打打酱油。晚饭回来，继续打开电脑折腾。其实这一天天就这么过去了。半个月之前晚上八点去操场慢跑一个小时，现在缩短到九点跑个半小时……日子就这么一天天过去。</p>
<h2 id="Learn_Python">Learn Python</h2><p>从一个月之前断断续续地，竟然把A Byte of Python看完了，虽然很多东西也不甚明白，而且忘了大半。但总有了个轻松愉快的开端，总之这本书看起来令人愉快。之后看看《learn python the hard way》，作者的很多话我深以为然，反正那篇NB哄哄的序言把我吸引进来了，结果发现有之前那本书的底子之后看起来太简单了点……但作者关于学习一样东西的许多见解确是很值得一看的。</p>
<h3 id="The_Hard_Way_Is_Easier">The Hard Way Is Easier</h3><p>这里有段很精彩的关于练习和坚持的言论，我真得很喜欢它：</p>
<blockquote>
<h2 id="A_Note_On_Practice_And_Persistence">A Note On Practice And Persistence</h2><p>While you are studying programming, I’m studying how to play guitar. I practice it every day for at least 2 hours a day. I play scales, chords, and arpeggios for an hour at least and then learn music theory, ear training, songs and anything else I can. Some days I study guitar and music for 8 hours because I feel like it and it’s fun. To me repetitive practice is natural and just how to learn something. I know that to get good at anything you have to practice every day, even if I suck that day (which is often) or it’s difficult. Keep trying and eventually it’ll be easier and fun.</p>
<p>As you study this book, and continue with programming, remember that anything worth doing is difficult at first. Maybe you are the kind of person who is afraid of failure so you give up at the first sign of difficulty. Maybe you never learned self-discipline so you can’t do anything that’s “boring”. Maybe you were told that you are “gifted” so you never attempt anything that might make you seem stupid or not a prodigy. Maybe you are competitive and unfairly compare yourself to someone like me who’s been programming for 20+ years.</p>
<p>Whatever your reason for wanting to quit, keep at it. Force yourself. If you run into an Extra Credit you can’t do, or a lesson you just do not understand, then skip it and come back to it later. Just keep going because with programming there’s this very odd thing that happens.</p>
<p>At first, you will not understand anything. It’ll be weird, just like with learning any human language. You will struggle with words, and not know what symbols are what, and it’ll all be very confusing. Then one day BANG your brain will snap and you will suddenly “get it”. If you keep doing the exercises and keep trying to understand them, you will get it. You might not be a master coder, but you will at least understand how programming works.</p>
<p>If you give up, you won’t ever reach this point. You will hit the first confusing thing (which is everything at first) and then stop. If you keep trying, keep typing it in, trying to understand it and reading about it, you will eventually get it.</p>
<p>But, if you go through this whole book, and you still do not understand how to code, at least you gave it a shot. You can say you tried your best and a little more and it didn’t work out, but at least you tried. You can be proud of that.</p>
</blockquote>
<p>这的确是本很“简单的书”，我觉得作者以下的话可以送给那些妄想走捷径自大而不愿付出的人(No pains,no gains):</p>
<blockquote>
<p>Empty before you fill. You will have a hard time learning from someone with more knowledge if you already know everything.</p>
</blockquote>
<p>当然还有这一句玩笑话……</p>
<blockquote>
<p>Go learn Lisp. I hear people who know everything really like Lisp.</p>
</blockquote>
<p>关于一个看上去很艰巨的大任务或者大项目，比如面临考研复习的自己，作者送出了这么一段句话：</p>
<blockquote>
<p>One final word of advice: Every programmer becomes paralyzed by irrational fear starting a new large project. They then use procrastination to avoid confronting this fear and end up not getting their program working or even started. I do this. Everyone does this. The best way to avoid this is to make a list of things you should do, and then do them one at a time.</p>
<p>Just start doing it, do a small version, make it bigger, keep a list of things to do, and do them.</p>
</blockquote>
<p>好像人们常说的细化目标，日积月累，步步为营。更关键的在于——开始去做。</p>
<p>就像当你决定做什么时，空想除了让你更好受永远不会有任何作用，但当你走出房门的那一刻，虽然什么也没做，情况确彻底地改变了。<a href="我其实在说晚上去跑步的情况。有时候会拖到很晚才去。">^1</a></p>
<p>作者经常让你花上几乎一整周的时间来<em>记忆</em>,记忆一定是学习一样东西时非常重要的东西，不管怎样，基本的东西你要记住。这些东西像英语中的词汇一样，是一切开始的基础。所以不要偷懒，<em>No pains, no gains</em>.</p>
<p>在学习的过程中我们经常性挫败感十足，这很糟糕。因为就我目前体验来说，要没有之前安装配置linux那种成就感让我如此上瘾，我真不会如此视折腾为乐事“坚持”到现在。所以，想办法让自己充满成就感。</p>
<p>尝试受挫会让自己感觉很蠢，but</p>
<blockquote>
<p>The most important thing when doing this exercise is: “There is no failure, only trying.”</p>
</blockquote>
<p>学习一段时间会很累？感觉有些不明白？作者经常安慰吾等菜鸟读者说：</p>
<blockquote>
<p>Just take it slow and do not hurt your brain. Hopefully by now these symbols are natural for you so this isn’t a big effort. It’s best to take 15 minutes at a time with your list and then take a break. Giving your brain a rest will help you learn faster with less frustration.</p>
</blockquote>
<p>很多credits都要求读者去自己求助于搜索引擎、文档，我觉得这才是学习，这才是zen，这才会有乐趣。</p>
<p>除了非常重要一致不能跳过的东西<a href="比如说python的安装……">^2</a>,大多东西都可以先跳过的，总之不要让自己挫败感十足。充满自信和乐趣是持续前进的动力。</p>
<p><em>Happy hacking,happy learning</em></p>
<hr>
<h2 id="这是题外话">这是题外话</h2><p>很多想得很好却没做到的事情。只能说自己想得太多：</p>
<p><img src="http://fmn.rrimg.com/fmn065/20120811/2210/p_large_KvH1_63ff00004f3c1263.jpg" hight="400" width="200" alt="梦想很美"></p>
<p>在weibo上说，我现在在学python。于是一位common lisp造诣很高的高人问我？你不学scheme了？我这才想起来从图书馆借的htdp，看着还不算累，但东西实在多。之后因为sagemath和自己在学校的创新项目和python的千丝万缕，又碰到python简明教材这本令人愉快的读物，投到scheme的热情便完全转移到python上了。</p>
<p>忽然便想起最近背的单词passion。激情、喜爱简直是一码事。虽然生活如此如此那般，但有passion的人生还是幸福的。</p>
<h2 id="Footnotes">Footnotes</h2>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/life/2012/08/04/" itemprop="url">
                  这只是篇随笔
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-08-04T00:00:00+08:00" content="2012-08-04">
              2012-08-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/life/" itemprop="url" rel="index">
                    <span itemprop="name">life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/life/2012/08/04/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="life/2012/08/04//" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="2012年08月04日随笔">2012年08月04日随笔</h1><p>其实是好久没在这写东西了。<code>^o^</code></p>
<h2 id="无锡的夜">无锡的夜</h2><p>晚上去跑步时，JNU的夜shocked me.当站在宽阔的操场上，凝视着安详高远的天空，宁静平和的初升明月,南边一溜美丽祥和的云朵,东边若隐若现的城市灯火，黑暗中飒飒作响的树影，西边绵延而沉默的山峦，头顶点点的星辰。夏夜的晚风穿过身旁，撩拨着我的衣裳，也撩拨着我的神经。</p>
<h2 id="好像那片云">好像那片云</h2><p>云千奇百怪，诡奇壮丽，它们是天空最亮丽的风景线。它洁白如雪过，它压抑阴沉的想要坠落过,它曾排山倒海压来，也曾宁静的好像不变的山峦。</p>
<p>然而它最终要散，无影无踪。</p>
<p>就像我所追求的，我所喜爱的，我所经历的，我所拥有的。</p>
<p>在生命经历一个个奇幻的形态后烟消云散。</p>
<p>曾经的美丽只留存在他人的记忆之中。</p>
<p>跑完步时，南边的云散得无影无踪，好像从未存在。</p>
<h2 id="linuxer周年记">linuxer周年记</h2><p>入门是件很奇特的事，我视之为缘分,思之为注定。</p>
<p>一切在阴差阳错间成就，也许像从前曾有缘过的一样缘尽于某日</p>
<p>然而就这么改变了我一年的人生</p>
<p>之前生命中点点阴差阳错点点成线，汇集成今</p>
<p>那个轨迹，就是人们所说的命运？</p>
<p>是否在他人眼里是彻头彻尾的宅loser？</p>
<p>是否被看成不通世情的sb？</p>
<p>It dosen’t matter.</p>
<p>我喜欢开源社区的氛围，开放、共享、自由与进步。</p>
<p>我认同黑客的精神，自强、求索、执着、包容。</p>
<p>我相信人生有很多值得去体验和经历的事，有很多有趣的东西：哲学、文学、艺术、数学、计算机、还有风景，还有girl……</p>
<p>我相信世界充满乐趣和值得探索的问题。</p>
<p>感谢上苍让我看到一个热心、分享、积极探索、奉献的社区。</p>
<p>很高兴与那些富有创造力、执着、热心、积极探索、充满趣味、积极进步的人交流、从他们那里学习，被他们鞭策、鼓励。</p>
<p>我觉得这是神赐给我此生的礼物，让我在尘世呼吸到不一样的自由气息，好像来自天堂，重新refresh被功利的世界奴役的疲惫的身躯与心灵。</p>
<p>那些contributors,是最可爱的人。</p>
<h2 id="21">21</h2><p>21岁了，爱也好，恨也好，时间不等人。</p>
<p>看着静美的夜色，忽然想起牡丹亭中几句话，萦绕耳畔：</p>
<blockquote>
<p>原来姹紫嫣红开遍，似这般都付与断井颓垣。良辰美景奈何天，便赏心乐事谁家院？朝飞暮卷，云霞翠轩，雨丝风片，烟波画船。锦屏人忒看的这韶光贱！ </p>
</blockquote>
<p>光阴不在，这些逝去的日子。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/life/2012/07/13/" itemprop="url">
                  回忆
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-07-13T00:00:00+08:00" content="2012-07-13">
              2012-07-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/life/" itemprop="url" rel="index">
                    <span itemprop="name">life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/life/2012/07/13/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="life/2012/07/13//" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="回忆">回忆</h1><p>我向来厌恶回忆，当被它的触角在夜幕中拉住，你永远别指望从中抽身，回忆越陷越深，一层一层向过去延伸，好像永远没有终点。</p>
<p>我向来厌恶面对过去，过去的哀伤与委屈，过去的快乐与迷恋，都在回忆中幻化成不可抑制的情愫与遗憾。回忆越陷越深，它在你的心头缠绕了一圈又一圈，当回忆越行越远，往事便像猴子头上的紧箍咒一样越来越紧，让人压抑的喘不过气。</p>
<p>不知为什么，感觉往事不堪回首。虽然它普通的不能再普通，虽然它平淡的不能再平淡，但我不愿回头.让记忆随着光阴越流越远吧，我希望永远不要再见到它。</p>
<p>可是它总是找上我。终有一天，还是要面对自己的懦弱，愚蠢与自私。</p>
<blockquote>
<p>有一种被人抛诸脑后的过去，包含一些不该遗忘的点点滴滴。欢笑之余，我将故旧拾起，才刹见自己的薄情。人世间似乎存在着某种公平，每个人都曾被抛掷在他人的遗忘中；而今你所有哽咽难宣的话语，也正是你曾为人所期盼，却永远听不见的字句。</p>
<p>赫曼· 赫塞—-</p>
</blockquote>
<h2 id="大学之前">大学之前</h2><p>不想多说，封尘的不想重启。简单的写下，简单地卸下，轻装面对未来。</p>
<h2 id="大学">大学</h2><blockquote>
<p>所谓大学者,非谓有大楼之谓也,有大师之谓也。</p>
<p>梅贻琦1931年在清华的就职演说—-</p>
</blockquote>
<p>说什么好呢，本来没想到来这里。高考之前想去南京大学，考完试知道毁了，打点好好准备了一堆要报的二本大学，一本随手填了个江南大学，只因为作为革命老区的朴素人民，觉得无锡这地方比较发达。报专业的时候报的教育技术，因为自己虽然是学理科的，但一直想搞文科<a href="当年文理分科违心的选了理科，因为我讨厌考政治和历史，估计按我的风格考那个大学都考不上。">^1</a>。但老爸是搞教育的，想这行业尼玛有个毛前途啊，别报这个。我那时当然无所谓了，反正谁知道将来大学毕业做什么，那就这啥 <strong>光信息科学与技术</strong> 吧。</p>
<p>关于这牛b的专业名我要唠叨两句：还记得去派出所开国防生证明的时候，那位警察大叔来句，唉，你这专业不错啊。我想是么？然后去招生办查分的时候招生办大叔也来了句，你这个专业高科技，有前途。我想看样子没差了。<strong>来到传说中江南第一学府，尼玛来到理学院，再上了三年学，我算知道这是什么玩意了</strong>。</p>
<p>于是乎阴差阳错来到无锡这地方。初来乍到，这里商业气息以排山倒海之势扑面而来。各路江湖骗子、学长学姐、商业机构、云集此地…… 然后我就不多说了，三年过去，我已经不把这里当大学看了。</p>
<p>其实也不想黑咱亲爱的大江大，学校风景秀丽，一看就是花大力气大资金维护打造初来的，基本上这个大花园是各路情侣、闲人饭后闲逛的良处。学校四周也到处都是公园，总之风景不错就是了。有这么种感觉，咱大江大就是环蠡湖绿化带的一部分。</p>
<p>不该跑题的，虽然有很多怨念，但也不是一无是处，好歹教育部直属211大学，有心报这里的别这么就被我的胡言乱语吐槽走了，也许其它地方还不如这儿。</p>
<h3 id="外联">外联</h3><p>大一上学期，外联还是比较忙的。然后又身在两个组织的外联，于是打了一个学期的酱油<a href="打酱油？按很多人的标准来说，我大学打的酱油真是数不胜数啊。">^2</a>。最后的结果是一分钱没有拉到，不过那时候真是勇气十足啊，跑商店，闯大楼，进政府，当然，脾气好点的会听你说完，脾气差点的也没到轰我的地步…… 然后尼玛有赞助商了宣传也是我们的事，遍历宿舍做宣传，食堂门口发传单，四处张贴海报……</p>
<p>说到底，我那时不是很给力，不过很有<strong>勇气</strong>。</p>
<h3 id="骑迹">骑迹</h3><p>也不知为何了，加了个名为骑迹的组织，买了辆 Giant ATX690[^3]，准备暑假远征。没想到暗暗影响了舍友，四个人先花了几天骑车游遍了江南六大古镇，然后我知道我脾气有多差了……总之，因为脾气不好和室友别扭了很抱歉，但一直没说出过口。暑假和社团的兄弟们从学校骑车出发远征北京，难忘的七月啊。然后我又体验到自己脾气有多不好了，然而，抱歉的话一直没说出口，一路都给大家拖后腿了。</p>
<p>远征之前和骑迹，室友出去都比较多，无锡周边什么的总是去逛逛。到远征结束，基本上再没怎么出去了。最后一次出行在2011年4月26日，骑迹的24小时环太湖活动，光荣的做了压队。没想到之后，再也没骑车出去过了。<a href="因为再后来车丢了，想去也没机会了。不丢也懒得出去了。">^4</a></p>
<h3 id="泡图书馆">泡图书馆</h3><p>大一经常泡图书馆，别人都以为我在学习，其实都是在看闲书。因为好奇很多偏见、歧视从何而来，为什么人们会这样会那样，好奇人的本性，所以看了好多心理学社会学的书。现在都忘了，当时的笔记可是做了一本又一本……</p>
<p>最后的相关结论是，基本都是假说……</p>
<p>那时我第一次认识到人是有多健忘，后来问我一个天天看数学和计算机学科国外论著的室友，你看这能记住吗？他说不行，我问那看了有什么用？他说很多思想会内化成为你的一部分。当时感觉这话安慰的意思多余实际的意义，两年后接触另一个神奇的领域时我才体味到这个意思。</p>
<h3 id="动漫">动漫</h3><p>在室友旁边看死神，然后感觉不错。然后开始动漫宅化一发不可收拾，先后看了一堆新番旧番。当时痴迷的，借室友mp4看空之境界，借室友电脑看Monster，寒假在家天天看eva。去郑州病房陪父亲的时候，当时还买了本《动感新势力》，没想到那本10年三月的85期，是我唯一买的动漫相关的东西。</p>
<p>最后，忘记是何年何月，看完Lain、攻壳机动队和虫师之后，口味越来越小众，再未找到入的了法眼的动漫，也就再也没兴致看其它的动漫了。</p>
<h3 id="小说">小说</h3><p>忘记何时，迷过一阵日系推理小说。大概是远征前的假期，当时图书馆所有能借到的东野圭吾的、京极夏彦的、宫部美雪的……推理小说，到后来痴迷上整个日系文学，村上村树、松本清张、太宰治<a href="《人间失格》是最震撼我的小说之一，另一本是加缪的《局外人》">^5</a>……，唯一遗憾没看《丰饶之美》和《源氏物语》，再后来因为信长之野望这个游戏对整个日本战国史产生兴趣好好研究了一番，扯淡的是又找了本叫《中国历代军事战略（上、下）》<a href="很棒的一本书，纯粹的历史书，很少有这么好看的">^6</a>的看了一遍。</p>
<p>好了不跑题了，还是说小说。当时手机可以上网，经常用手机上轻小说论坛看小说。《文学少女》那阵真是让我痴迷上了各种小说了，好多图书馆都没有，当时我是疯狂荐购，图书馆方面的回复倒很简单：<em>不适合本馆收藏</em><a href="历史的讽刺在于，它后来买了一大堆我荐购过和没荐购过的轻小说">^7</a>。</p>
<p>总之，那段日子是动漫、小说、甚至还玩过air的游戏交错的日子。很虚空不是？我只是想从那里发现意义，寻找意义。他人的作品改变了我，启发了我。但意义也仅限于此。我放弃动漫小说、文学时，心头一点感觉都没有。</p>
<p>对了，忘了讲讲科幻小说。在郑州病房的夜晚，看着阿西莫夫的科幻小说打发漫漫长夜，我才知道科幻小说还可以写得这么棒这么有深度。后来去年寒假，看了遍《光明王》，那种宗教和科技交织的奇幻感觉让我激动万分，于是我找来txt版的把它用<em>LaTeX</em>重新排了一遍。那个时候，又有个东西影响了我。</p>
<h3 id="Dota">Dota</h3><p>现在，我旁边的室友还在每日忙着dota。</p>
<p>这是个迷人的游戏，有几个月很喜欢。我在一个游戏中寻找意义，体悟人生，有很多对现实有启发的思想渐渐影响和融入自我。更重要的，拉近了孤独的自己和很多人的关系，一致多年以来我第一次觉得和好多人有的聊的了。然而，仅此而已。之后遇见的东西，让我走火入魔了，几乎彻底把它扔掉了。</p>
<h3 id="TED">TED</h3><blockquote>
<p>Ideas worth spreading.</p>
<p>TED理念—-</p>
</blockquote>
<p>TED<a href="http://www.ted.com/" target="_blank" rel="external">1</a>是什么？Technology、Entertainment、Design，有阵对这个特着迷,它展示了一个新奇的世界，你看到这里还有一群人相信思想的力量，充满热情，相信能通过传播思想和理念改变世界，你会不激动吗？当你身边充满着成天感慨无所事事，生命缺乏激情之时你会不喜欢它吗？那时的TED展示给我很多很棒的理念。TEDxWuxi第一场面向大众的分享会当然要去了，设计学院一个学长关于设计的演讲在我心中埋下了”设计友好”的种子，现在看待很多产品和服务，都要想好多……</p>
<h3 id="数学建模">数学建模</h3><blockquote>
<p>当然我在大学的时候，还不可能把从前的点点滴滴串连起来，但是当我十年后回顾这一切的时候，真的豁然开朗了。 </p>
<p>Steve Jobs—-</p>
</blockquote>
<p>数学建模对我来说是个阴差阳错的事，如果不是某人这么一晃：我们组队去吧。我绝对不会想着去参加它的，甚至大学两年间从未考虑过数学建模这种事。</p>
<p>然而晃我的人没有参加，我一个人过去了。</p>
<p>细节不想多说，黑学校黑这个比赛的也懒得说。总之，从那时开始，人生开始巨变，而这种变化是我的选择，不是身不由己。</p>
<p>组队时，本来和一个同学说好同队，结果组队时莫名的负了她。慌忙组队之时慌忙组了队，连声抱歉也没说。我觉得自己的一生总是错过了太多道谢和道歉的机会，腼腆的性格也让我无法说出口。</p>
<p>前面半个月集训很爽，我第一次知道计算机不只是游戏机、影碟机和上网本，第一次发现自己有多强大，从无基础的是写代码越写越high，感觉我们那个房间里那些物联网学院的都没我强大<a href="我自大了，见笑。之前虽然开过matlab课，对计算机毫无兴趣的我都在后面打魔兽的……">^8</a>。然后也算第一次喜欢上了数学，特别是数据挖掘与数据分析。</p>
<p>后半个月越来越觉得这比赛是在扯淡，痛苦的感觉一天到晚就做题了什么也学不到。</p>
<p>然后的比赛是我在大学打的又一次酱油，还不好意思地拉着两名想拿成绩的队友一起酱油了。</p>
<p>最后比赛那天很抱歉没很给力，把本带去蹭学校的网更新ubuntu了，第二天早上正要忙的时候头晕脑胀的睡着了。</p>
<h3 id="GNU/Linux">GNU/Linux</h3><blockquote>
<p>Keep it simple,Stupid.</p>
<p>KISS哲学—-</p>
</blockquote>
<p>数学建模时用了一个叫SAS的统计软件，老师表示买不起。买不起？于是我上网查了查，一年几十万。</p>
<p>这不是重点，重点在于一种叫R的统计语言走进了我的世界，它带我进入了开源的世界。</p>
<p>也就这么一阴差阳错，无意瞥见的一种和我从来没什么关系的东西吸引了我的注意力，我想找一个做统计分析的强大软件，而SAS盗版都不安逸。然而R的口碑很好<a href="即使现在在国际也是很流行，搞统计的八成特别学术上的八成用它。前阵看到本12年2月出的新书讲R做数据挖掘的，作者竟然一个是政治学家一个是生物学家，给跪了。">^9</a>,据说也很强大，而且开源。嗯？开源是个什么玩意，能吃吗？然后我开始递归的google起来[^10]。</p>
<p>另外数学建模那阵老见一群飞在天上的大牛们黑word吹<a href="http://www.latex-project.org/" target="_blank" rel="external">LaTeX</a>，我心说LaTeX是什么？于是也开始了在google的递归搜索。</p>
<p>结果很简单，先是装了个火狐，感觉不错，又阴差阳错装个YLMF OS<a href="一种国人做的linux系统">^11</a>，然后某次本上的XP蓝屏了，我就把windows格了。</p>
<p>接下来的一年，是折腾的一年。从计算软件到服务器架设，从建站到前端，从排版到图形处理，从文本编辑到设计真是无所不折腾……也渐渐见识了很多领域的东西，没有什么比这个更开阔视野了，人生也从未这么丰富多彩过<a href="副作用是社交基本封闭，与旁人基本没得聊，基本不会接触妹子……以前还会和同学去打打网球什么的，某次受伤后现在只能自己默默跑步了。">^12</a>。设计、哲学、人性、科技、信仰从未这么复杂的交错起来，才明白世界很大，人生很短<a href="请珍惜自己的生命，遵从自己的心。人的生命体验，只有经历过才会明白。就像毛姆《人生的枷锁》中所说：答案只有自己找出才有意义。">^13</a>。</p>
<h2 id="然后呢">然后呢</h2><p>还有一些愿望,这是关于未来的：</p>
<ul>
<li><p>我想去从事并非光科相关的行业，如果身体条件允许的话，我想从事互联网或者数据挖掘的工作</p>
</li>
<li><p>全程马拉松，把跑步变成自己的人生习惯之一</p>
</li>
<li><p>想学习绘画，图像处理，视觉设计的东西，但并不靠它吃饭</p>
</li>
<li><p>想学会弹吉他，因为还有想唱的歌</p>
</li>
<li><p>希望将来有空余时间，把那些自己想看的书看完。</p>
</li>
<li><p>空闲时能参加开源项目，从中体会hack的乐趣</p>
</li>
</ul>
<h2 id="我的家">我的家</h2><p>随便一想就像收不住的闸，不想了。我不能哭丧着脸回去，人生苦短，我要试着带回去快乐与活力。</p>
<p>作文一篇，向过去告别，向无锡暂别，我已经<em>21</em>了。</p>
<hr>
<h2 id="Footnotes">Footnotes</h2><p>[^3]: 当时社团团购，整个学校就我一个…… 一直没感谢我当时技术部的部长和当时的会长。</p>
<p>[^10]: 要问我为何不用baidu，我真想不留情面的说那玩意是个垃圾。但鉴于很多人拿他搜盗版搜游戏还凑合，就不黑它了。如果你查的资料是英语居多，或者偏重技术，google基本是唯一的选择。但国内的google一直都不好用，每次搜到东西打不开时或google被重置时，我都想说： <em>fuck gfw</em> 。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/test/2012/07/11/" itemprop="url">
                  这两天的二逼日子
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-07-11T00:00:00+08:00" content="2012-07-11">
              2012-07-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/test/" itemprop="url" rel="index">
                    <span itemprop="name">test</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/test/2012/07/11/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="test/2012/07/11//" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="这几天我都干啥了">这几天我都干啥了</h1><p>这几天我都干些啥了呢，在这个幻灯片中，我将做个小结</p>
<p><img src="http://fmn.rrimg.com/fmn063/20120708/1320/p_large_lamv_658f000005f61261.jpg" alt="dt的tweak"></p>
<hr>
<h2 id="为啥我要宅两天">为啥我要宅两天</h2><p>前几天的考研复习那个不亦乐乎，高数终于看了三章不到，概率论终于看了不到三章。我想想怎么着回家前的这几天也得好好学习一阵，可你妹的 <em>我感冒了</em></p>
<hr>
<h2 id="那卧病寝室这几天在干吗？">那卧病寝室这几天在干吗？</h2><ul>
<li>普通说法叫折腾</li>
<li>文艺说法叫hack</li>
<li>说得二逼一点我其实就是蛋疼</li>
</ul>
<hr>
<h2 id="水人人水贴吧水论坛">水人人水贴吧水论坛</h2><ul>
<li>好吧，你之前看到的那个win7 图吧，其实就是我闲的蛋疼用archlinux+kde伪装的，然后到baidu的win8 吧发截图玩</li>
<li>貌似人人也没少水</li>
<li>貌似论坛也没少去，什么byr啊，jnrain啊，u 坛啊</li>
</ul>
<hr>
<h2 id="学习python">学习python</h2><h3 id="Why_python">Why python</h3><p>本来是学习sage的，因为看到ustc有个<a href="http://home.ustc.edu.cn/~wyfyw/iSL/" target="_blank" rel="external">创新项目</a>就是推广这个的。最后发现很多python的东西，于是学python去了。</p>
<h3 id="折腾大略">折腾大略</h3><ul>
<li>首先配置vim找到了<a href="https://github.com/klen/python-mode" target="_blank" rel="external">python-mode</a>,看视频demo很棒，于是折腾了一天，终于能比较方便的使用了，结果是把supertab插件废掉，系统默认python改成2了，x输入法在vim中用不了了，暂时也许永久地用起了神奇的vimim.</li>
<li>见byr坛上有连两个帖子热议python,结果是先选了python2</li>
<li>看看<a href="http://woodpecker.org.cn/abyteofpython_cn/chinese/" target="_blank" rel="external">python 简明教程</a>感觉看着很平滑，没有这么挫败感。一口气看到第九章</li>
</ul>
<hr>
<h2 id="搜集OS娘">搜集OS娘</h2><p>是的，我好好学习了OS娘的相关知识，并搜集了<a href="http://photo.renren.com/photo/306127150/album-647659933?curPage=1" target="_blank" rel="external">一大堆OS娘的图片</a></p>
<p><img src="http://fmn.rrimg.com/fmn065/20120710/1325/p_large_8tXz_2508000054681263.jpg" alt="OS girl"></p>
<hr>
<h2 id="总结一下吧">总结一下吧</h2><p>这两天过得及其惨不忍睹，为什么每天跑一个小时步说感冒就感冒？我在电脑前时间太长了吧……所以<em>回家不带电脑</em>，最好明天也别碰</p>
<p>这两天过得及其二逼，一早起床坐到电脑前，到晚上念念不舍上床，偶尔吃饭出去下，喝水活动下，上厕所闲逛下……目测旁边忙着dota的和我一样……</p>
<p>身子更弱了……</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#这段代码测试高亮</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"珍爱生命，远离折腾"</span></span><br></pre></td></tr></table></figure>
<p>靠，我该洗洗睡了……</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/lisp/2012/07/09/land-of-lisp/" itemprop="url">
                  land of lisp读书笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-07-09T00:00:00+08:00" content="2012-07-09">
              2012-07-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/lisp/" itemprop="url" rel="index">
                    <span itemprop="name">lisp</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/lisp/2012/07/09/land-of-lisp/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="lisp/2012/07/09/land-of-lisp/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Happy_Hacking">Happy Hacking</h1><p>我第一次读这本书，便被其浓郁的黑客风格与幽默所吸引，它向我展示了common lisp这门语言强大与趣味的一面。之前从来没有试着度过原版图书，但看到这么可爱一本书，竟然吸引我一边用着取词软件一边用着google翻译给看完了。</p>
<p>说是看完了，其实有很多地方都是略略而过，与其说我是学习了一遍common lisp，不如说是大致了解了一下它。很多东西像AI，程序设计，算法的东西都是云里雾里，好在作者假设读者什么也不知道，详细而幽默的解说引人入胜，看起来虽然很累但趣味性十足。所以，即使是lisp菜鸟，这本书也是很推荐。<a href="好像此书就是为了初学者设计的……">^1</a></p>
<p>说说我学到的：学到了很多优秀而强大的common lisp技术，在有些地方还进行了自己的hack，甚至学到了服务器、http协议、svg和html、博弈算法的一些东西。</p>
<p>也说说从这本书中衍生的新想法：</p>
<ul>
<li><p>lisp做web应用还是蛮好的，正好弥补lisp缺乏图形界面库的短版，</p>
</li>
<li><p>common lisp强大但复杂，也许scheme才是我心仪的语言<a href="对一个信奉KISS原则的人尤其如此想，特别是崇尚极简主义的人呢">^2</a></p>
</li>
<li><p>语言障碍仍然是个很大的问题，要好好学习英语这门世界性语言。</p>
</li>
</ul>
<p>将我4月26日至7月7日的读书笔记集合在这里,虽然水平很烂但斗胆放在这里，希望对他人有帮助</p>
<hr>
<p><a href="http://reverland.org/tags.html#land-of-lisp-ref">land of lisp读书笔记</a></p>
<hr>
<p>忽然发现这个还在草稿里……</p>
<p>2012年09月22日 星期六 13时26分44秒</p>
<h2 id="Footnotes">Footnotes</h2>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/lisp/2012/07/07/dice-of-doom-v4/" itemprop="url">
                  Dice of Doom v4
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-07-07T00:00:00+08:00" content="2012-07-07">
              2012-07-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/lisp/" itemprop="url" rel="index">
                    <span itemprop="name">lisp</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/lisp/2012/07/07/dice-of-doom-v4/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="lisp/2012/07/07/dice-of-doom-v4/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="最终版的Dice_of_Doom">最终版的Dice of Doom</h1><p>这个游戏终于结束了，基本上这本书的主要内容也算看完了。实际上，我根本就写不出这些东西，源码也读的云里雾里。但这是一本很有趣的书，我想看完htdp之后用htdp推荐风格重新处理下这本书的代码，顺便也复习一下。</p>
<h2 id="让Dice_of_Doom_更加的有趣">让Dice of Doom 更加的有趣</h2><p>我们上回完成的版本虽然很棒，但总缺乏些什么。因为之前程序的设计，我们可以很轻易的扩展它，让它变得更有趣</p>
<p>先加载我们之前的游戏<a href="对从官网下载的源码和书中的源码可能需要修改，具体参见前几篇读书笔记。">^1</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(load &#34;dice-v3&#34;);</span><br></pre></td></tr></table></figure>
<h3 id="增加玩家数">增加玩家数</h3><p>因为我们之前的架构，增加玩家数很简单。为了增加玩家数后计算机能反应敏捷，让它变“傻”一点。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defparameter *num-players* 4)&#10;(defparameter *die-colors* &#39;((255 63 63) (63 63 255) (63 255 63) (255 63 255)))&#10;(defparameter *max-dice* 5)&#10;(defparameter *ai-level* 2)</span><br></pre></td></tr></table></figure>
<h3 id="建立概率节点">建立概率节点</h3><p>我们本质上是向游戏树中加入几率节点，先升级attacking-moves函数，增加个board-attack-fail分支。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun attacking-moves (board cur-player spare-dice)&#10;  (labels ((player (pos)&#10;             (car (aref board pos)))&#10;           (dice (pos)&#10;             (cadr (aref board pos))))&#10;    (lazy-mapcan (lambda (src)&#10;                   (if (eq (player src) cur-player)&#10;                     (lazy-mapcan&#10;                       (lambda (dst)&#10;                         (if (and (not (eq (player dst) cur-player))&#10;                                  (&#62; (dice src) 1))&#10;                           (make-lazy (list (list (list src dst)&#10;                                                  (game-tree (board-attack board cur-player src dst (dice src))&#10;                                                             cur-player&#10;                                                             (+ spare-dice (dice dst))&#10;                                                             nil)&#10;                                                  (game-tree (board-attack-fail board cur-player src dst (dice src))&#10;                                                             cur-player&#10;                                                             (+ spare-dice (dice dst))&#10;                                                             nil))))&#10;                           (lazy-nil)))&#10;                       (make-lazy (neighbors src)))&#10;                     (lazy-nil)))&#10;                 (make-lazy (loop for n below *board-hexnum*&#10;                                  collect n)))))</span><br></pre></td></tr></table></figure>
<p>board-attack-fail函数遍历所有位置。如果这个位置是攻击方就只能留下一个骰子</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun board-attack-fail (board player src dst dice)&#10;  (board-array (loop for pos from 0&#10;                     for hex across board&#10;                     collect (if (eq pos src)&#10;                               (list player 1)&#10;                               hex))))</span><br></pre></td></tr></table></figure>
<h3 id="让骰子滚动起来">让骰子滚动起来</h3><p>一下程序让一堆骰子滚动起来，并判断谁赢了</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;rolling the dice&#10;(defun roll-dice (dice-num)&#10;  (let ((total (loop repeat dice-num&#10;                     sum (1+ (random 6)))))&#10;    (fresh-line)&#10;    (format t &#34;On ~a dice rolled ~a. &#34; dice-num total)&#10;    total))&#10;(defun roll-against (src-dice dst-dice)&#10;  (&#62; (roll-dice src-dice) (roll-dice dst-dice)))</span><br></pre></td></tr></table></figure>
<p>我们还需要在游戏引擎中调用让骰子滚动的代码,选出正确的子树</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun pick-chance-branch (board move)&#10;  (labels ((dice (pos)&#10;             (cadr (aref board pos))))&#10;    (let ((path (car move)))&#10;      (if (or (null path) (roll-against (dice (car path))&#10;                                        (dice (cadr path))))&#10;        (cadr move)&#10;        (caddr move)))))</span><br></pre></td></tr></table></figure>
<p>更新handle-computer函数让它调用选择几率分支的函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun handle-human (tree)&#10;  (fresh-line)&#10;  (princ &#34;choose your move:&#34;)&#10;  (let ((moves (caddr tree)))&#10;    (labels ((print-moves (moves n)&#10;               (unless (lazy-null moves)&#10;                 (let* ((move (lazy-car moves))&#10;                        (action (car move)))&#10;                   (fresh-line)&#10;                   (format t &#34;~a. &#34; n)&#10;                   (if action&#10;                     (format t &#34;~a -&#62; ~a&#34; (car action) (cadr action))&#10;                     (princ &#34;end turn&#34;)))&#10;                 (print-moves (lazy-cdr moves) (1+ n)))))&#10;      (print-moves moves 1))&#10;    (fresh-line)&#10;    (pick-chance-branch (cadr tree) (lazy-nth (1- (read)) moves))))</span><br></pre></td></tr></table></figure>
<p>同样我们可以处理handle-computer函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun handle-computer (tree)&#10;  (let ((ratings (get-ratings (limit-tree-depth tree *ai-level*) (car tree))))&#10;    (pick-chance-branch&#10;      (cadr tree)&#10;      (lazy-nth (position (apply #&#39;max ratings) ratings) (caddr tree)))))</span><br></pre></td></tr></table></figure>
<h3 id="升级AI">升级AI</h3><p>但现在还有个问题，AI还没有考虑骰子的滚动，依然认为骰子多的一定获胜。因此需要更新AI。</p>
<p>根据概率论原理，我们可以得到这样一个矩阵来表征攻击成功的概率</p>
<table>
<thead>
<tr>
<th style="text-align:center">防守方\攻击方</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0.84</td>
<td style="text-align:center">0.97</td>
<td style="text-align:center">1.0</td>
<td style="text-align:center">1.0</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">0.44</td>
<td style="text-align:center">0.78</td>
<td style="text-align:center">0.94</td>
<td style="text-align:center">0.99</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">0.15</td>
<td style="text-align:center">0.45</td>
<td style="text-align:center">0.74</td>
<td style="text-align:center">0.91</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">0.04</td>
<td style="text-align:center">0.19</td>
<td style="text-align:center">0.46</td>
<td style="text-align:center">0.72</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">0.01</td>
<td style="text-align:center">0.06</td>
<td style="text-align:center">0.22</td>
<td style="text-align:center">0.46</td>
</tr>
</tbody>
</table>
<p>现在把这个概率交给计算机，更新get-ratings函数,给评分加权</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun get-ratings (tree player)&#10;  (let ((board (cadr tree)))&#10;    (labels ((dice (pos)&#10;               (cadr (aref board pos))))&#10;      (take-all (lazy-mapcar&#10;                  (lambda (move)&#10;                    (let ((path (car move)))&#10;                      (if path&#10;                        (let* ((src (car path))&#10;                               (dst (cadr path))&#10;                               (odds (aref (aref *dice-odds*&#10;                                                 (1- (dice dst)))&#10;                                           (- (dice src) 2))))&#10;                          (+ (* odds (rate-position (cadr move) player))&#10;                             (* (- 1 odds) (rate-position (caddr move)&#10;                                                          player))))&#10;                        (rate-position (cadr move) player))))&#10;                  (caddr tree))))))</span><br></pre></td></tr></table></figure>
<p>为了让修剪游戏树的函数能工作，还需要做些修改让它能处理新的游戏树。同时为了简化不再使用alpha-beta算法。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun limit-tree-depth (tree depth)&#10;  (list (car tree)&#10;        (cadr tree)&#10;        (if (zerop depth)&#10;          (lazy-nil)&#10;          (lazy-mapcar (lambda (move)&#10;                         (cons (car move)&#10;                               (mapcar (lambda (x)&#10;                                         (limit-tree-depth x (1- depth)))&#10;                                       (cdr move))))&#10;                       (caddr tree)))))&#10;;We mapcar across the tail of each move, so trimming is performed on&#10;;both branches of any chance nodes.</span><br></pre></td></tr></table></figure>
<h3 id="改进增援方案">改进增援方案</h3><p>之前是依据消灭敌人多少来决定增援骰子数。现在我们换一种方法：依据占据的最大领地来决定增援多少。这使游戏的地缘性更加复杂。</p>
<p>回想我们之前在<a href="http://reverland.org/Tech/2012/05/01/grand-theft-wumpus/">wumpus游戏</a>里写过的相似函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun get-connected (board player pos)&#10;  (labels ((check-pos (pos visited)&#10;             (if (and (eq (car (aref board pos)) player)&#10;                      (not (member pos visited)))&#10;               (check-neighbors (neighbors pos) (cons pos visited))&#10;               visited))&#10;           (check-neighbors (lst visited)&#10;             (if lst&#10;               (check-neighbors (cdr lst) (check-pos (car lst) visited))&#10;               visited)))&#10;    (check-pos pos &#39;())))</span><br></pre></td></tr></table></figure>
<p>获得最大的集群,最后添加援军，注意，spare-dice仍然作为参数传递但已经不再被add-new-dice使用了。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun largest-cluster-size (board player)&#10;  (labels ((f (pos visited best)&#10;             (if (&#60; pos *board-hexnum*)&#10;               (if (and (eq (car (aref board pos)) player)&#10;                        (not (member pos visited)))&#10;                 (let* ((cluster (get-connected board player pos))&#10;                        (size (length cluster)))&#10;                   (if (&#62; size best)&#10;                     (f (1+ pos) (append cluster visited) size)&#10;                     (f (1+ pos) (append cluster visited) best)))&#10;                 (f (1+ pos) visited best))&#10;               best)))&#10;    (f 0 &#39;() 0)))&#10;(defun add-new-dice (board player spare-dice)&#10;  (labels ((f (lst n)&#10;             (cond ((zerop n) lst)&#10;                   ((null lst) nil)&#10;                   (t (let ((cur-player (caar lst))&#10;                            (cur-dice (cadar lst)))&#10;                        (if (and (eq cur-player player) (&#60; cur-dice *max-dice*))&#10;                          (cons (list cur-player (1+ cur-dice))&#10;                                (f (cdr lst) (1- n)))&#10;                          (cons (car lst) (f (cdr lst) n))))))))&#10;    (board-array (f (coerce board &#39;list)&#10;                   (largest-cluster-size board player)))))</span><br></pre></td></tr></table></figure>
<p>享受你的劳动成果吧</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(serve #&#39;dod-request-handleer)</span><br></pre></td></tr></table></figure>
<h2 id="疑问">疑问</h2><p>我发现我可以选中任何自己的领地，只要上面的骰子数大于2。我可以攻击任何强大的敌人，而且一定能成功。不知道哪里的更改或错误！！</p>
<hr>
<h2 id="Footnotes">Footnotes</h2>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/math/2012/07/05/" itemprop="url">
                  概率论与数理统计基础
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-07-05T00:00:00+08:00" content="2012-07-05">
              2012-07-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/math/" itemprop="url" rel="index">
                    <span itemprop="name">math</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/math/2012/07/05/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="math/2012/07/05//" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="概率论与数理统计基础">概率论与数理统计基础</h1><h2 id="为什么有了这篇文章">为什么有了这篇文章</h2><p>按以往的风格，大概是我想做什么所以就做了什么。但这次不太一样，首先是代人上数学实验课，matlab搞得我云里雾里，一年前深以为然并给我很大影响的东西都忘到九霄云外了，老师布置个聚类分析的练习一点都不会，完全不知怎么下手。其次加上忙着准备考研，无心折腾这折腾那，虽然很有意思……，再次网上看到满天的牛，飞过来飞过去，那个自惭形晦。好了，我胡言乱语，莫深究什么意思。</p>
<p>想想一年了，在各个领域摸爬滚打之后发现自己一无是处，收获在哪里？只能说开阔了视野，告诉自己很多东西我曾经也知道过，思考过，选择过。</p>
<p>下午看了看概率论与统计，想到自己当初拿着好几本讲R的书学习的日子，现在连个痕迹都没有留下，数学建模学到的东西也忘的精光，唉，先看看基础吧。然后回到寝室，忽然就想试试sagemath和markdown……</p>
<h2 id="概率论基本概念">概率论基本概念</h2><p>先来个全概率公式：<br>     设实验E的样本空间为S，A为E的事件，$B_1,\cdots,B_n $为S的一个划分，且 $P(B_i) &gt; 0 (i = 1,2,\cdots,n)$,则</p>
<p>$$<br>P(A)=\sum_{i=1}^n P(A \vert B_i)P(B_i)<br>$$</p>
<p>再来个贝叶斯公式：</p>
<p>$$<br>P(B_i \vert A) = \frac{P(A \vert B_i)P(B<em>i)}{\sum</em>{j=1}^n P(A|B_j)P(B_j)} , i=1,2,\cdots ,n.<br>$$</p>
<p>A,B,C三个事件相互独立</p>
<p>$$<br>\begin{equation<em>}<br>\left.<br>\begin{array}{l}<br>P(AB)=P(A)P(B) \<br>P(BC)=P(B)P(C) \<br>P(AC)=P(A)P(C) \<br>P(ABC)=P(A)P(B)P(C)<br>\end{array}<br>\right}<br>\end{equation</em>}<br>$$</p>
<h2 id="离散随机变量常见分布">离散随机变量常见分布</h2><p>先来个(0-1)分布<a href="表格做的好难看……有空再改吧">^1</a></p>
<table>
<thead>
<tr>
<th>X</th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
</tr>
</thead>
<tbody>
<tr>
<td>$P_k$</td>
<td style="text-align:center">1-p</td>
<td style="text-align:center">p</td>
</tr>
</tbody>
</table>
<p>二项分布,记为$X \sim b(n,p)$</p>
<p>$$<br>P{X=k}=\binom{n}{k}p^kq^{n-k},k=0,1,2,\cdots,n.<br>$$</p>
<p>泊松分布,记做$X \sim \pi(\lambda)$</p>
<p>$$<br>P{X = k}=\frac{\lambda^ke^{-\lambda}}{k!},k=0,1,2,\cdots,<br>$$</p>
<p>泊松定理</p>
<p>$$<br>\lim\limits_{n\to \infty} \binom{n}{k}p_n^k(1-p_n)^{n-k} = \frac{\lambda^ke^{-\lambda}}{k!}<br>$$</p>
<h2 id="三种连续型随机变量">三种连续型随机变量</h2><p>###均匀分布</p>
<p>概率密度函数，图中取$b=2,a=1$。</p>
<p>$$<br>\begin{equation}<br>f(x)=\left{<br>\begin{array}{l}<br>\frac{1}{b-a},a &lt; x &lt; b \<br>0, else<br>\end{array}<br>\right.<br>\end{equation}<br>$$</p>
<p><img src="http://fmn.rrfmn.com/fmn058/20120705/2310/p_large_Wt1C_4925000043391261.jpg" hight="200" width="400" alt="均匀分布概率密度"></p>
<p>其分布函数为</p>
<p>$$<br>\begin{equation}<br>F(x)=\left{<br>\begin{array}{l}<br>0,  x&lt;a \<br>\frac{x-a}{b-a}, a \leq x &lt; b \<br>1, x \geq b<br>\end{array}<br>\right.<br>\end{equation}<br>$$</p>
<p><img src="http://fmn.rrimg.com/fmn059/20120705/2310/p_large_DfWR_4925000043381261.jpg" hight="200" width="400" alt="均匀分布分布函数"></p>
<h2 id="指数分布">指数分布</h2><p>概率分布函数，图像中红、蓝、绿三种颜色曲线分别是$\theta$取0.5、1、2时所绘制。</p>
<p>$$<br>\begin{equation}<br>f(x)=\left{<br>\begin{array}{l}<br>\frac{1}{\theta}e^{-\frac{x}{\theta}}, x &gt; 0,\<br>0, else,<br>\end{array}<br>\right.<br>\end{equation}<br>$$</p>
<p><img src="http://fmn.rrimg.com/fmn056/20120705/2310/p_large_sWxZ_49250000433a1261.jpg" hight="200" width="400" alt="指数分布概率密度"></p>
<p>分布函数</p>
<p>$$<br>\begin{equation}<br>F(x)=\left{<br>\begin{array}{l}<br>1-e^{-\frac{x}{\theta}}, x &gt; 0,\<br>0, else,<br>\end{array}<br>\right.<br>\end{equation}<br>$$</p>
<p><img src="http://fmn.rrfmn.com/fmn058/20120705/2310/p_large_KHxd_49250000433b1261.jpg" hight="200" width="400" alt="指数函数分布函数"></p>
<h2 id="正态分布">正态分布</h2><p>概率密度函数,图中$\mu$为0,红、蓝、绿三种颜色图像分别取$\sigma=0.5,1,2$。</p>
<p>$$<br>f(x)=\frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2}},-\infty &lt; x &lt;\infty<br>$$</p>
<p><img src="http://fmn.rrimg.com/fmn059/20120705/2310/p_large_PZvg_49250000433c1261.jpg" hight="200" width="400" alt="正态分布概率密度函数"></p>
<p>分布函数</p>
<p>$$<br>F(x)=\frac{1}{\sqrt{2\pi}\sigma}\int_{-\infty}^x e^{-\frac{(x-\mu)^2}{2\sigma^2}} dt<br>$$</p>
<hr>
<h2 id="后记">后记</h2><p>markdown+mathjax不是一般蛋疼啊……，<code>\$B_i,B_j\$</code>总把<code>i,B</code>给强调了，让它以代码形式mathjax又不解析了……最近看不进英文的文档了，mathjax的文档胡乱翻了半天什么也没记住……</p>
<p>textile倒好，可没想到出现更奇葩的<code>P(C)</code>竟然解析成P &#169; ……<code>= =</code></p>
<p>总之，I hate math，以后再也不自己瞎折腾了……</p>
<h2 id="Changelog">Changelog</h2><p>###2012年07月06日 星期五 08时18分46秒</p>
<p>早上爬起来看看mathjax文档，然后试试发现昨天的奇葩问题消失了……懒得折腾的孩子们参考这里处理：<a href="http://doswa.com/2011/07/20/mathjax-in-markdown.html" target="_blank" rel="external">MathJax in Markdown</a>,想折腾的可以去折腾什么pandoc<a href="据说是haskell写的">^2</a>的……</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/lisp/2012/07/02/webdice-of-doom/" itemprop="url">
                  基于web的Dice of Doom
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-07-02T00:00:00+08:00" content="2012-07-02">
              2012-07-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/lisp/" itemprop="url" rel="index">
                    <span itemprop="name">lisp</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/lisp/2012/07/02/webdice-of-doom/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="lisp/2012/07/02/webdice-of-doom/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="基于web的Dice_of_Doom游戏">基于web的Dice of Doom游戏</h1><p>眼看最后两章了,虽然AI那里云山雾罩,然而看到web又精神为之一震,真是看得高潮迭起啊。作者也很给力，直接用html5来编写web应用，把svg直接嵌入到html中。可惜作者用的是firefox3.7 alpha，为了在我的archlinux x86_64的firefox12上运行良好，还是多废了些心机。这章看着很爽。</p>
<h2 id="绘制游戏元素">绘制游戏元素</h2><p>毋庸置疑，所有游戏界面要用svg画出来，于是我们之前写得 <a href="/lisp/2012/06/16/dsl/">svg库</a> 要派上用场了。什么？已经没有了？那么从该书主页上下载<a href="http://landoflisp.com/source.html" target="_blank" rel="external">svg.lisp</a>.</p>
<p>由于要创建个基于web的应用程序，之前的<a href="/lisp/2012/05/12/web-server-written-in-lisp/">webserver</a>也需要加载。</p>
<p>当然还有我们的游戏新引擎<a href="/lisp/2012/06/29/dice-of-doom-v2/">Dice of Doom v2</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(cd &#34;~/Documents/lisp&#34;) &#10;(load &#34;dice_of_doom_v2&#34;)&#10;(load &#34;webserver&#34;)&#10;(load &#34;svg.lisp&#34;)</span><br></pre></td></tr></table></figure>
<p>然后需要先设定一些常数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defparameter *board-width* 900);&#38754;&#26495;&#23485;&#24230;&#10;(defparameter *board-height* 500);&#38754;&#26495;&#39640;&#24230;&#10;(defparameter *board-scale* 64);&#38754;&#26495;&#32553;&#25918;&#27604;&#20363;&#10;(defparameter *top-offset* 3);&#20004;&#25694;&#36215;&#26469;&#30340;&#39600;&#23376;&#30456;&#23545;&#20301;&#31227;&#10;(defparameter *dice-scale* 40);&#39600;&#23376;&#32553;&#25918;&#27604;&#20363;&#10;(defparameter *dot-size* 0.05);&#39600;&#23376;&#19978;&#28857;&#30340;&#22823;&#23567;</span><br></pre></td></tr></table></figure>
<p>接下来画骰子</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun draw-die-svg (x y col)&#10;  (labels ((calc-pt (pt)&#10;             (cons (+ x (* *dice-scale* (car pt)))&#10;                   (+ y (* *dice-scale* (cdr pt)))))&#10;           (f (pol col)&#10;             (polygon (mapcar #&#39;calc-pt pol) col)))&#10;    (f &#39;((0 . -1) (-0.6 . -0.75) (0 . -0.5) (0.6 . -0.75))&#10;       (brightness col 40))&#10;    (f &#39;((0 . -0.5) (-0.6 . -0.75) (-0.6 . 0) (0 . 0.25))&#10;       col)&#10;    (f &#39;((0 . -0.5) (0.6 . -0.75) (0.6 . 0) (0 . 0.25))&#10;       (brightness col -40))&#10;    (mapc (lambda (x y)&#10;            (polygon (mapcar (lambda (xx yy)&#10;                               (calc-pt (cons (+ x (* xx *dot-size*))&#10;                                              (+ y (* yy *dot-size*)))))&#10;                             &#39;(-1 -1 1 1)&#10;                             &#39;(-1 1 1 -1))&#10;                     &#39;(255 255 255)))&#10;          &#39;(-0.05 0.125 0.3 -0.3 -0.125 0.05 0.2 0.2 0.45 0.45 -0.45 -0.2)&#10;          &#39;(-0.875 -0.80 -0.725 -0.775 -0.70 -0.625 -0.35 -0.05 -0.45 -0.15 -0.45 -0.05))))&#10;;(with-open-file (*standard-output* &#34;die.svg&#34; :direction :output :if-exists :supersede) (svg 100 100 (draw-die-svg 50 50 &#39;(255 0 0))))</span><br></pre></td></tr></table></figure>
<p>再画一小块面板</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun draw-tile-svg (x y pos hex xx yy col chosen-tile)&#10;  (loop for z below 2&#10;        do (polygon (mapcar (lambda (pt)&#10;                              (cons (+ xx (* *board-scale* (car pt)))&#10;                                    (+ yy (* *board-scale*&#10;                                             (+ (cdr pt) (* (- 1 z) 0.1))))))&#10;                            &#39;((-1 . -0.2) (0 . -0.5) (1 . -0.2)&#10;                                          (1 . 0.2) (0 . 0.5) (-1 . 0.2)))&#10;                    (if (eql pos chosen-tile)&#10;                      (brightness col 100)&#10;                      col)))&#10;  (loop for z below (second hex)&#10;        do (draw-die-svg (+ xx&#10;                            (* *dice-scale*&#10;                               0.3&#10;                               (if (oddp (+ x y z))&#10;                                 -0.3&#10;                                 0.3)))&#10;                         (- yy (* *dice-scale* z 0.8)) col)))&#10;&#10;;(with-open-file (*standard-output* &#34;tile.svg&#34; :direction :output) (svg 300 300 (draw-tile-svg 0 0 0 &#39;(0 3) 100 150 &#39;(255 0 0) nil)))</span><br></pre></td></tr></table></figure>
<p>接下来是整个面板</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;Draw the Board&#10;(defparameter *die-colors* &#39;((255 63 63) (63 63 255)))&#10;(defun draw-board-svg (board chosen-tile legal-tiles)&#10;  (loop for y below *board-size*&#10;        do (loop for x below *board-size*&#10;                 for pos = (+ x (* *board-size* y))&#10;                 for hex = (aref board pos)&#10;                 for xx = (* *board-scale* (+ (* 2 x) (- *board-size* y)))&#10;                 for yy = (* *board-scale* (+ (* y 0.7) *top-offset*))&#10;                 for col = (brightness (nth (first hex) *die-colors*)&#10;                                       (* -15 (- *board-size* y)))&#10;                 do (if (member pos legal-tiles)&#10;                      (tag g ()&#10;                        (tag a (&#34;xlink:href&#34; (make-game-link pos))&#10;                          (draw-tile-svg x y pos hex xx yy col chosen-tile)))&#10;                      (draw-tile-svg x y pos hex xx yy col chosen-tile)))))&#10;(defun make-game-link (pos)&#10;  (format nil &#34;/game.html?chosen=~a&#34; pos))&#10;;(with-open-file (*standard-output* &#34;board.svg&#34; :direction :output :if-exists :supersede) (svg *board-width* *board-height* (draw-board-svg (gen-board) nil nil)))</span><br></pre></td></tr></table></figure>
<p>这有个问题，之前我们svg宏不是像上文中那样定义的，svg宏需要稍加修改，具体参见本书的<a href="http://landoflisp.com/errata.html" target="_blank" rel="external">errata</a></p>
<h2 id="建立Web服务器">建立Web服务器</h2><p>先写游戏的驱动</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defparameter *cur-game-tree* nil);&#21021;&#22987;&#21270;&#24403;&#21069;&#28216;&#25103;&#26641;&#10;(defparameter *from-tile* nil);&#36873;&#25321;&#30340;&#19968;&#29255;&#38754;&#26495;&#10;&#10;(defun dod-request-handler (path header params)&#10;  (if (equal path &#34;game.html&#34;)&#10;    (progn (princ &#34;HTTP/1.1 200 OK&#10;&#10;                  &#60;!doctype html&#62;&#10;                  &#60;html&#62;&#60;head&#62;&#60;/head&#62;&#60;body&#62;&#34;)&#10;           (tag center ()&#10;             (princ &#34;Welcome to DICE OF DOOM!&#34;)&#10;             (tag br ())&#10;             (let ((chosen (assoc &#39;chosen params)))&#10;               (when (or (not *cur-game-tree*) (not chosen))&#10;                 (setf chosen nil)&#10;                 (web-initialize))&#10;               (cond ((lazy-null (caddr *cur-game-tree*))&#10;                      (web-announce-winner (cadr *cur-game-tree*)))&#10;                     ((zerop (car *cur-game-tree*))&#10;                      (web-handle-human&#10;                        (when chosen&#10;                          (read-from-string (cdr chosen)))))&#10;                     (t (web-handle-computer))))&#10;             (tag br ())&#10;             (draw-dod-page *cur-game-tree* *from-tile*))&#10;           (princ &#34;&#60;/body&#62;&#60;/html&#62;&#34;)) &#10;    (princ &#34;Sorry... I don&#39;t know that page.&#34;)))</span><br></pre></td></tr></table></figure>
<p>在这里我稍作修改，更改了服务器返回给浏览器的信息，使它更加符合标准能在firefox12中运行正常。</p>
<p>我们只做了一个超级简化的服务器，功能弱爆了，但作者许诺能在最后一章很轻易的扩展。之后我们处理些基于webserver的函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun web-initialize ()&#10;  (setf *from-tile* nil)&#10;  (setf *cur-game-tree* (game-tree (gen-board) 0 0 t)))&#10;;&#23459;&#24067;&#32988;&#32773;web version&#10;(defun web-announce-winner (board)&#10;  (fresh-line)&#10;  (let ((w (winners board)))&#10;    (if (&#62; (length w ) 1)&#10;      (format t &#34;The game is a tie between ~a&#34; (mapcar #&#39;player-letter w))&#10;      (format t &#34;The winner is ~a&#34; (player-letter (car w)))))&#10;  (tag a (href &#34;game.html&#34;)&#10;    (princ &#34; play again&#34;)))&#10;;&#22788;&#29702;&#20154;&#31867;&#29609;&#23478;&#10;(defun web-handle-human (pos)&#10;  (cond ((not pos) (princ &#34;Please choose a hex to move from:&#34;))&#10;        ((eq pos &#39;pass) (setf *cur-game-tree*&#10;                              (cadr (lazy-car (caddr *cur-game-tree*))))&#10;                        (princ &#34;Your reinforcements have been placed.&#34;)&#10;                        (tag a (href (make-game-link nil))&#10;                          (princ &#34;continue&#34;)))&#10;        ((not *from-tile*) (setf *from-tile* pos)&#10;                           (princ &#34;Now choose a destination:&#34;))&#10;        ((eq pos *from-tile*) (setf *from-tile* nil)&#10;                              (princ &#34;Move cancelled.&#34;))&#10;        (t (setf *cur-game-tree*&#10;                 (cadr (lazy-find-if (lambda (move)&#10;                                       (equal (car move)&#10;                                              (list *from-tile* pos)))&#10;                                     (caddr *cur-game-tree*))))&#10;           (setf *from-tile* nil)&#10;           (princ &#34;You may now &#34;)&#10;           (tag a (href (make-game-link &#39;pass))&#10;             (princ &#34;pass&#34;))&#10;           (princ &#34; or make another move:&#34;))))&#10;;&#22788;&#29702;&#35745;&#31639;&#26426;&#29609;&#23478;&#10;(defun web-handle-computer ()&#10;  (setf *cur-game-tree* (handle-computer *cur-game-tree*))&#10;  (princ &#34;The computer has moved. &#34;)&#10;  (tag script ()&#10;    (princ&#10;      &#34;window.setTimeout(&#39;window.location=\&#34;game.html?chosen=NIL\&#34;&#39;,3000)&#34;)));javascript&#65292;&#25913;&#25104;3&#31186;&#20102;&#65292;&#24863;&#35273;5&#31186;&#22312;&#25105;&#36825;&#37324;&#22826;&#24930;&#20102;</span><br></pre></td></tr></table></figure>
<p>然后在html中绘制svg游戏面板时有些tweak，首先是svg，你遵照之前errata提到的修正svg宏后才能正常显示，否则只显示一小块或完全看不到时可别吃惊。另外是作者定义两次点击同一片游戏面板代表取消，但它的legal-tile（合法面板）中却没有包含本身，以致于不能正常取消选中。我做了如下修改，把当前选中的游戏面板添加进合法面板中。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;caXXXXXXXdr&#8230;&#8230;&#20197;&#21518;&#25105;&#35201;&#29992;firstsecond&#25913;&#20889;&#10;(defun draw-dod-page (tree selected-tile)&#10;  (svg *board-width* ;svg&#35201;&#26356;&#25913;&#65281;&#65281;&#10;       *board-height* &#10;       (draw-board-svg (cadr tree)&#10;                       selected-tile&#10;                       (cons selected-tile;what I add &#10;                             (take-all (if selected-tile&#10;                                   (lazy-mapcar&#10;                                     (lambda (move)&#10;                                       (when (eql (caar move)&#10;                                                  selected-tile)&#10;                                         (cadar move)))&#10;                                     (caddr tree))&#10;                                   (lazy-mapcar #&#39;caar (caddr tree))))))))</span><br></pre></td></tr></table></figure>
<p>然后很显然，enjoy我们基于网络的游戏吧</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(serve #&#39;dod-request-handler)</span><br></pre></td></tr></table></figure>
<hr>

<h2 id="游戏截图">游戏截图</h2><p>截个图看看效果</p>
<p><img src="http://fmn.rrimg.com/fmn064/20120702/1345/p_large_vHyz_01a000007c271262.jpg!" alt=""></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/lisp/2012/06/29/dice-of-doom-v2/" itemprop="url">
                  Dice of Doom v2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2012-06-29T00:00:00+08:00" content="2012-06-29">
              2012-06-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/lisp/" itemprop="url" rel="index">
                    <span itemprop="name">lisp</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/lisp/2012/06/29/dice-of-doom-v2/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="lisp/2012/06/29/dice-of-doom-v2/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Dice_of_Doom_v2">Dice of Doom v2</h1><p>我已经不怎么看得懂在讲什么了，所以胡言乱语请见谅,有几个问题:</p>
<h1 id="记不起之前的游戏树什么样了，我又懒得回头去看。是不是某种决策树？">记不起之前的游戏树什么样了，我又懒得回头去看。是不是某种决策树？</h1><h1 id="不停的函数接着函数扩展看起来很方便，但又要求你时刻记得之前实现的细节，以实现正确的改进">不停的函数接着函数扩展看起来很方便，但又要求你时刻记得之前实现的细节，以实现正确的改进</h1><h1 id="作者的编程风格，以后还是按htdp里说的玩去吧，起码不会像现在这样晕。">作者的编程风格，以后还是按htdp里说的玩去吧，起码不会像现在这样晕。</h1><h1 id="英语还是障碍啊，有时候看完一大段文字后不知道在讲什么，囧了。">英语还是障碍啊，有时候看完一大段文字后不知道在讲什么，囧了。</h1><h2 id="Dice_of_Doom_v2-1">Dice of Doom v2</h2><p>首先加载之前我们完成的 <a href="/lisp/2012/05/23/dice-of-doom/">Dice of Doom</a> 源码和为惰性求值所实现的一系列库文件。没有的话就从land of lisp网站上下载吧，话说这本书真贵要40刀左右，豆瓣上竟然380元人民币……</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(load &#34;dice_of_doom_v1.lisp&#34;)&#10;(load &#34;lazy.lisp&#34;)</span><br></pre></td></tr></table></figure>
<p>然后先把游戏board扩大到4x4。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defparameter *board-size* 4)&#10;(defparameter *board-hexnum* (* *board-size* *board-size*))</span><br></pre></td></tr></table></figure>
<p>下面把Dice of Doom游戏全面lazy化吧</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun add-passing-move (board player spare-dice first-move moves)&#10;  (if first-move&#10;    moves&#10;    (lazy-cons (list nil&#10;                     (game-tree (add-new-dice board player&#10;                                              (1- spare-dice))&#10;                                (mod (1+ player) *num-players*)&#10;                                0&#10;                                t))&#10;               moves)))&#10;(defun attacking-moves (board cur-player spare-dice)&#10;  (labels ((player (pos)&#10;             (car (aref board pos)))&#10;           (dice (pos)&#10;             (cadr (aref board pos))))&#10;    (lazy-mapcan&#10;      (lambda (src)&#10;        (if (eq (player src) cur-player)&#10;          (lazy-mapcan&#10;            (lambda (dst)&#10;              (if (and (not (eq (player dst)&#10;                                cur-player))&#10;                       (&#62; (dice src) (dice dst)))&#10;                (make-lazy&#10;                  (list (list (list src dst)&#10;                              (game-tree (board-attack board&#10;                                                       cur-player&#10;                                                       src&#10;                                                       dst&#10;                                                       (dice src))&#10;                                         cur-player&#10;                                         (+ spare-dice (dice dst))&#10;                                         nil))))&#10;                (lazy-nil)))&#10;            (make-lazy (neighbors src)))&#10;          (lazy-nil)))&#10;      (make-lazy (loop for n below *board-hexnum*&#10;                       collect n)))))</span><br></pre></td></tr></table></figure>
<p>注意lazy-mapcan要求被创建的列表是惰性的，现在你知道htdp标明每个函数输入输出的习惯多好了吧……</p>
<p>lazy化handle-human函数和play-vs-human函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun handle-human (tree)&#10;  (fresh-line)&#10;  (princ &#34;choose your move:&#34;)&#10;  (let ((moves (caddr tree)))&#10;    (labels ((print-moves (moves n)&#10;               (unless (lazy-null moves)&#10;                 (let* ((move (lazy-car moves))&#10;                        (action (car move)))&#10;                   (fresh-line)&#10;                   (format t &#34;~a. &#34; n)&#10;                   (if action&#10;                     (format t &#34;~a -&#62; ~a&#34; (car action) (cadr action))&#10;                     (princ &#34;end turn&#34;)))&#10;                 (print-moves (lazy-cdr moves) (1+ n)))))&#10;      (print-moves moves 1))&#10;    (fresh-line)&#10;    (cadr (lazy-nth (1- (read)) moves))))&#10;(defun play-vs-human (tree)&#10;  (print-info tree)&#10;  (if (not (lazy-null (caddr tree)))&#10;    (play-vs-human (handle-human tree))&#10;    (announce-winner (cadr tree))))</span><br></pre></td></tr></table></figure>
<p>现在你可以试试人人对战了，速度不错。</p>
<h2 id="让AI运行在更大的游戏区域">让AI运行在更大的游戏区域</h2><p>对AI的惰性化之前，我们先做一些修剪的工作，这是对AI决策树/游戏树算法的优化[1]。</p>
<p>我们现在的AI很尽职尽责的搜索计算所有的可能的结果。但在大的游戏面板中这样很累，为了在效率上取得平衡，限制AI的考虑决策树深度</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun limit-tree-depth (tree depth)&#10;  (list (car tree)&#10;        (cadr tree)&#10;        (if (zerop depth)&#10;          (lazy-nil)&#10;          (lazy-mapcar (lambda (move)&#10;                         (list (car move)&#10;                               (limit-tree-depth (cadr move) (1- depth))))&#10;                       (caddr tree)))))&#10;(defparameter *ai-level* 4)&#10;(defun handle-computer (tree)&#10;  (let ((ratings (get-ratings (limit-tree-depth tree *ai-level*)&#10;                              (car tree))))&#10;    (cadr (lazy-nth (position (apply #&#39;max ratings) ratings)&#10;                    (caddr tree)))))&#10;(defun play-vs-computer (tree)&#10;  (print-info tree)&#10;  (cond ((lazy-null (caddr tree)) (announce-winner (cadr tree)))&#10;        ((zerop (car tree)) (play-vs-computer (handle-human tree)))&#10;        (t (play-vs-computer (handle-computer tree)))))</span><br></pre></td></tr></table></figure>
<p>我没看懂……已经深深迷失在car cadr caddr的海洋之中，总之它限制了AI的思考深度，让它把评分限制在4步之内。[2]</p>
<h3 id="启发算法[3]">启发算法[3]</h3><p>让AI只思考较少的深度来实现投入和产出的统一。</p>
<p>让我们用更复杂的启发算法来重新对游戏面板评分:对一个自己的地盘，如果附近有比自己强大的敌人则评分1,否则则评分2。若该地盘属于对手则评分为-1</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun score-board (board player)&#10;  (loop for hex across board&#10;        for pos from 0&#10;        sum (if (eq (car hex) player)&#10;              (if (threatened pos board)&#10;                1&#10;                2)&#10;              -1)))&#10;;&#38468;&#36817;&#26377;&#26356;&#22810;&#39600;&#23376;&#30340;&#20301;&#32622;&#26377;&#23041;&#32961;&#10;(defun threatened (pos board)&#10;  (let* ((hex (aref board pos))&#10;         (player (car hex))&#10;         (dice (cadr hex)))&#10;    (loop for n in (neighbors pos)&#10;          do (let* ((nhex (aref board n))&#10;                    (nplayer (car nhex))&#10;                    (ndice (cadr nhex)))&#10;               (when (and (not (eq player nplayer)) (&#62; ndice dice))&#10;                 (return t))))))</span><br></pre></td></tr></table></figure>
<p>有意思的是，关于启发式作者这么说：在开发这个例子时，我模拟了使用不同版本score-board的各种对手，这个版本效果很好，开发启发式算法不是什么科学。囧～</p>
<p>惰性化get-ratings和rate-position函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun get-ratings (tree player)&#10;  (take-all (lazy-mapcar (lambda (move)&#10;                           (rate-position (cadr move) player))&#10;                         (caddr tree))))&#10;(defun rate-position (tree player)&#10;  (let ((moves (caddr tree)))&#10;    (if (not (lazy-null moves))&#10;      (apply (if (eq (car tree) player)&#10;               #&#39;max&#10;               #&#39;min)&#10;             (get-ratings tree player))&#10;      (score-board (cadr tree) player))))</span><br></pre></td></tr></table></figure>
<p>现在可以试试和计算机过招了。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(play-vs-computer (game-tree (gen-board) 0 0 t))</span><br></pre></td></tr></table></figure>
<p>据说先行者有优势，计算机大概有3/4的几率获胜。</p>
<h3 id="alpha-beta_算法[4]">alpha-beta 算法[4]</h3><p> @此部分不只所云，请见谅。@</p>
<p>AI实际上执行一种深度优先搜索。</p>
<p>alpha-beta算法是把已知的一定更差的子树从决策树中剪掉的算法，熟称剪枝算法。</p>
<p>本游戏中游戏树的顶端上是最大最小算法，非顶端上是score-board评分……</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun ab-get-ratings-max (tree player upper-limit lower-limit)&#10;  (labels ((f (moves lower-limit)&#10;             (unless (lazy-null moves)&#10;               (let ((x (ab-rate-position (cadr (lazy-car moves))&#10;                                          player&#10;                                          upper-limit&#10;                                          lower-limit)))&#10;                 (if (&#62;= x upper-limit)&#10;                   (list x)&#10;                   (cons x (f (lazy-cdr moves) (max x lower-limit))))))))&#10;    (f (caddr tree) lower-limit)))&#10;&#10;(defun ab-get-ratings-min (tree player upper-limit lower-limit)&#10;  (labels ((f (moves upper-limit)&#10;             (unless (lazy-null moves)&#10;               (let ((x (ab-rate-position (cadr (lazy-car moves))&#10;                                          player&#10;                                          upper-limit&#10;                                          lower-limit)))&#10;                 (if (&#60;= x lower-limit)&#10;                   (list x)&#10;                   (cons x (f (lazy-cdr moves) (min x upper-limit))))))))&#10;    (f (caddr tree) upper-limit)))&#10;&#10;(defun ab-rate-position (tree player upper-limit lower-limit)&#10;  (let ((moves (caddr tree)))&#10;    (if (not (lazy-null moves))&#10;      (if (eq (car tree) player)&#10;        (apply #&#39;max (ab-get-ratings-max tree&#10;                                         player&#10;                                         upper-limit&#10;                                         lower-limit))&#10;        (apply #&#39;min (ab-get-ratings-min tree&#10;                                         player&#10;                                         upper-limit&#10;                                         lower-limit)))&#10;      (score-board (cadr tree) player))))</span><br></pre></td></tr></table></figure>
<p>这三个函数怎么实现及实现什么……不知道，深感自己英语不行啊，大段大段看完不知道在讲什么，哪天有兴致了对照对弈程序基本技术再看吧……I am confused now.[6]</p>
<p>改进我们的handle-computer函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defun handle-computer (tree)&#10;  (let ((ratings (ab-get-ratings-max (limit-tree-depth tree *ai-level*)&#10;                                     (car tree)&#10;                                     most-positive-fixnum&#10;                                     most-negative-fixnum)))&#10;    (cadr (lazy-nth (position (apply #&#39;max ratings) ratings) (caddr tree)))))</span><br></pre></td></tr></table></figure>
<p>现在把游戏面板扩大到5x5</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(defparameter *board-size* 5)&#10;(defparameter *board-hexnum* (* *board-size* *board-size*))</span><br></pre></td></tr></table></figure>
<p>由于我们记忆化的原因，之前的4x4面板会被缓存。为了修正这个问题重新定义neighbors函数即可。</p>
<p>实验新的经过改进的游戏</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(play-vs-computer (game-tree (gen-board) 0 0 t))</span><br></pre></td></tr></table></figure>
<h2 id="小结">小结</h2><p>本章我们使用惰性求值方法改进我们的游戏，同时通过一些优化限制AI引擎搜索的决策树数目，我们学到了以下几点：</p>
<ul>
<li>惰性列表使你有可能使用无穷的列表和数据结构，并且很有效率</li>
<li>一旦你有了lazy宏和force函数，你就可以基于此创造更复杂的惰性列表库</li>
<li>启发性算法是不完美的算法，通过一些创造性的想法可以显著提高代码的性能。在我们的例子中我们使用启发式的算法来为游戏树的顶端评分。</li>
<li>一旦我们把游戏转化为惰性树，为了限制AI思考的移动的深度我们可以优雅地[5]修剪游戏树。</li>
<li>Alpha-beta算法让我们更多地优化了性能，通过修剪不会影响AI最后所思考的移动的评分。</li>
</ul>
<hr>

<h2 id="Footnotes">Footnotes</h2><p>[^4]: 参见 “<a href="http://en.wikipedia.org/wiki/Alpha-beta_pruning&quot;:http://en.wikipedia.org/wiki/Alpha-beta_pruning" target="_blank" rel="external">http://en.wikipedia.org/wiki/Alpha-beta_pruning&quot;:http://en.wikipedia.org/wiki/Alpha-beta_pruning</a></p>
<p>[^6]: 可以先看看 “alpha-beta剪枝算法”:<a href="http://www.xqbase.com/computer/search_alphabeta.htm" target="_blank" rel="external">http://www.xqbase.com/computer/search_alphabeta.htm</a></p>
<hr>

<h2 id="废话">废话</h2><p>说实话，看不懂了，愈发的看不懂。生命中某种虚空感强烈的袭来，明知自己做的是“没有意义”，也没有人在意的的东西，可我就是关心那些。</p>
<p>有时候真是不想理人，与很多人不怎么谈得来，我不喜欢到头来毫无建树的胡扯，也不喜欢扯不喜欢的东西。可有时无话可说无人可诉，人与人的差别就是这么大，不知何时。</p>
<p>有时侯如此疯狂，讨厌别人的干扰，不能容忍自己浪费生命。在他人眼里我不也是在浪费生命？我不知道，安慰我的人永远安慰我，另一个部分人永远看不起我。</p>
<p>我应该追求哪个世界与人生？一边是迷人的，我不知道余生还有多长，不想放手错过它，但它只在我的梦中。一条在横亘在这个世界，我却没有一丝爱意。</p>
<p>也许一切都是宿命。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Liu Yuyang" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Liu Yuyang</p>
        </div>
        <p class="site-description motion-element" itemprop="description">我希望生活是诗的，是画的，是无数动听的音符。我希望我是自由的，摇滚的，有一颗黑客的心。</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">177</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">23</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">62</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/reverland" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
                <a href="http://reverland.bitbucket.org/" target="_blank">曾经的的vimwiki</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://liutos.github.com/" target="_blank">Liutos</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.phoenixlzx.com/" target="_blank">凤凰君</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://gndrive.org/" target="_blank">高达数字实验室</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.cherrot.com/" target="_blank">Cherrot</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://xwyam.github.com/" target="_blank">xw_y_am</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://ishell.me" target="_blank">小东</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.kochiya.me/" target="_blank">AS酱</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.skydark.info/" target="_blank">skydark</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://thorb.cn/" target="_blank">thorb</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.suzibin.cn/" target="_blank">doug</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://armsword.com/" target="_blank">armsword</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://lilydjwg.is-programmer.com/" target="_blank">仙子</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://lazymind.me/" target="_blank">mapleray</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://gaohaoyang.github.io" target="_blank">HYG</a>
              </span>
            
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2011 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Yuyang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  

    <script type="text/javascript">
      var disqus_shortname = 'reverlandblog';
      var disqus_identifier = 'page/14/index.html';
      var disqus_title = '';
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  
  

</body>
</html>
