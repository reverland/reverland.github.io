<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>游泳日报 | Reverland的行知阁</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="python,swim," />
  

  <meta name="description" content="一起学游泳吧点我----&amp;gt;游泳日报&amp;lt;-----点我！
满满的热爱之心。
缘起作为一个游泳的狂热爱好者。狂热到恨不得每天都泡在水里。
被诊断为支气管炎的时候
双腿因为爬山废掉路都快走不动的时候
天降暴雨电闪雷鸣马路成海的时候
都义无反顾地冲去泳池
泡在水里……
这样自由随性的游了一年。
后来，
和一群游起来非常优雅漂亮的半职业运动员们一起游了几次
或者十几次
抑或几十次，之后
我觉得得好">
<meta property="og:type" content="article">
<meta property="og:title" content="游泳日报">
<meta property="og:url" content="http://reverland.org/python/2014/10/09//index.html">
<meta property="og:site_name" content="Reverland的行知阁">
<meta property="og:description" content="一起学游泳吧点我----&amp;gt;游泳日报&amp;lt;-----点我！
满满的热爱之心。
缘起作为一个游泳的狂热爱好者。狂热到恨不得每天都泡在水里。
被诊断为支气管炎的时候
双腿因为爬山废掉路都快走不动的时候
天降暴雨电闪雷鸣马路成海的时候
都义无反顾地冲去泳池
泡在水里……
这样自由随性的游了一年。
后来，
和一群游起来非常优雅漂亮的半职业运动员们一起游了几次
或者十几次
抑或几十次，之后
我觉得得好">
<meta property="og:updated_time" content="2015-11-15T06:01:31.539Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="游泳日报">
<meta name="twitter:description" content="一起学游泳吧点我----&amp;gt;游泳日报&amp;lt;-----点我！
满满的热爱之心。
缘起作为一个游泳的狂热爱好者。狂热到恨不得每天都泡在水里。
被诊断为支气管炎的时候
双腿因为爬山废掉路都快走不动的时候
天降暴雨电闪雷鸣马路成海的时候
都义无反顾地冲去泳池
泡在水里……
这样自由随性的游了一年。
后来，
和一群游起来非常优雅漂亮的半职业运动员们一起游了几次
或者十几次
抑或几十次，之后
我觉得得好">

  

  
    <link rel="icon" href="/images/favicon.ico">
  

  <link rel="stylesheet" href="/css/styles.css" type="text/css">

  

  

  

</head>

<body>
  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/archives/"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/category/"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/tag/"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/link/"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/about/"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/atom.xml"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一起学游泳吧"><span class="toc-text">一起学游泳吧</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缘起"><span class="toc-text">缘起</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#具体实现"><span class="toc-text">具体实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#爬虫部分"><span class="toc-text">爬虫部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#静态页面生成部分"><span class="toc-text">静态页面生成部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#辅助构建部分"><span class="toc-text">辅助构建部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#生成pdf部分"><span class="toc-text">生成pdf部分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其它"><span class="toc-text">其它</span></a></li></ol>
  </div>


<a class="back-top" href="#">
  <i class="icon-angle-up"></i>
</a>


<div class="content-post CENTER">
   <article id="post-" class="article article-type-post" itemscope itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">游泳日报</h1>

    <div class="article-meta">
      <span>2014-10-09</span>

      <span> | </span>

      <span class="article-author">Liu Yuyang</span>

      <span> | </span>

      
  <span class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </span>


    </div>
  </header>

  <div class="article-content">
    
      <h2 id="一起学游泳吧">一起学游泳吧</h2><p><code>点我----&gt;</code><a href="http://swim.reverland.org" target="_blank" rel="external">游泳日报</a><code>&lt;-----点我！</code></p>
<p>满满的热爱之心。</p>
<h2 id="缘起">缘起</h2><p>作为一个游泳的狂热爱好者。狂热到恨不得每天都泡在水里。</p>
<p>被诊断为支气管炎的时候</p>
<p>双腿因为爬山废掉路都快走不动的时候</p>
<p>天降暴雨电闪雷鸣马路成海的时候</p>
<p>都义无反顾地冲去泳池</p>
<p>泡在水里……</p>
<p>这样自由随性的游了一年。</p>
<p>后来，</p>
<p>和一群游起来非常优雅漂亮的半职业运动员们一起游了几次</p>
<p>或者十几次</p>
<p>抑或几十次，之后</p>
<p>我觉得得好好学习下。</p>
<p>于是通过伟大的互联网，</p>
<p>在<a href="http://topswim.net/" target="_blank" rel="external">游泳梦工厂</a>找到了很多</p>
<p>很多泳痴留下的武林秘笈。</p>
<p>欣喜异常！</p>
<p>但我觉得论坛上不好看……</p>
<p>于是诞生了把论坛上的帖子爬下来美化给自己看的愿望。</p>
<p>于是写了个爬虫……</p>
<p>后来，又想生成pdf，于是又折腾了下html转pdf。</p>
<p>后来，那阵经常刷知乎日报……于是又萌生了</p>
<p>制作<code>游泳日报</code>的想法。</p>
<p>最终写了一堆 <em>脚本</em> 来行使爬虫和静态页面生成的功能及其它辅助功能。</p>
<p>源码见<a href="https://github.com/reverland/topswim" target="_blank" rel="external">https://github.com/reverland/topswim</a></p>
<p>静态页面见<a href="https://github.com/reverland/topswim/tree/gh-pages" target="_blank" rel="external">https://github.com/reverland/topswim/tree/gh-pages</a></p>
<h2 id="具体实现">具体实现</h2><h3 id="爬虫部分">爬虫部分</h3><p>不是啥优雅的方法。</p>
<p>使用<code>lxml</code>和<code>requests</code>，把论坛页面的内容抓下来然后加上自定的内容。自己定义css文件。</p>
<h3 id="静态页面生成部分">静态页面生成部分</h3><p>首先是具体内容页面。根据爬取的内容，加上自定义的html内容。可能用jinja2啊什么模板什么的应该更优雅些，我这就以一种quick和dirty的脚本方式实现。</p>
<p>其次是首页生成方式。读取<code>rebuild.sh</code>文件取最新的六条生成首页。</p>
<p>最后是总目录页的生成。读取<code>rebuild.sh</code>内容获取所有内容。</p>
<h3 id="辅助构建部分">辅助构建部分</h3><p><code>update.sh</code>是主更新脚本。</p>
<p><code>update_index.py</code>和<code>update_toc.py</code>分别更新首页和总目录页。</p>
<p><code>rebuild.sh</code>负责重新构建所有内容页面。</p>
<h3 id="生成pdf部分">生成pdf部分</h3><p>使用<code>weasyprint</code>模块。</p>
<p>将视频替换为对应地址。</p>
<p>ps:开始使用<code>xhtml2pdf</code>模块，这东西支持中文字体要改，最关键的是中文不换行！！！即使最后按网上找来的设置什么wordwrap为cjk还是不换行。总之不推荐。</p>
<h2 id="其它">其它</h2><p>很多似乎需要优化的地方。</p>
<ol>
<li>把html文本和程序分离出来比较合适。</li>
<li>命令行参数处理用argparse啥的处理应该更加优雅</li>
<li>原谅我渣一样的前端水平。</li>
</ol>
<p>好吧，本渣只是一个script kid……</p>

    
  </div>
</article>

</div>


  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'reverlandblog';
    
    var disqus_url = 'http://reverland.org/python/2014/10/09//';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    




  </div>

  

</body>
</html>
